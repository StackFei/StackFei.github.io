<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Hooks | 守夜人笔记</title>
    <meta name="description" content="守夜人笔记">
    <meta name="generator" content="VuePress 1.3.1">
    <link rel="icon" href="/img/favicon.ico">
  <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    
    <link rel="preload" href="/assets/css/0.styles.f09e5b7a.css" as="style"><link rel="preload" href="/assets/js/app.903983bb.js" as="script"><link rel="preload" href="/assets/js/2.c5c844f9.js" as="script"><link rel="preload" href="/assets/js/4.29bcc168.js" as="script"><link rel="preload" href="/assets/js/10.acc61093.js" as="script"><link rel="prefetch" href="/assets/js/11.b5b7d313.js"><link rel="prefetch" href="/assets/js/12.044e77b3.js"><link rel="prefetch" href="/assets/js/13.f84ff47d.js"><link rel="prefetch" href="/assets/js/14.4f25373e.js"><link rel="prefetch" href="/assets/js/15.69ad7253.js"><link rel="prefetch" href="/assets/js/16.ac264240.js"><link rel="prefetch" href="/assets/js/17.8684da05.js"><link rel="prefetch" href="/assets/js/18.ceef7e7d.js"><link rel="prefetch" href="/assets/js/19.fdccf963.js"><link rel="prefetch" href="/assets/js/20.eea2ef94.js"><link rel="prefetch" href="/assets/js/21.436a904b.js"><link rel="prefetch" href="/assets/js/22.5b0e4632.js"><link rel="prefetch" href="/assets/js/23.456132eb.js"><link rel="prefetch" href="/assets/js/24.0c9dfbdb.js"><link rel="prefetch" href="/assets/js/25.1e46f166.js"><link rel="prefetch" href="/assets/js/26.bc6d72fe.js"><link rel="prefetch" href="/assets/js/27.699fbdd0.js"><link rel="prefetch" href="/assets/js/28.b4423e59.js"><link rel="prefetch" href="/assets/js/3.b94df1a7.js"><link rel="prefetch" href="/assets/js/5.a332531e.js"><link rel="prefetch" href="/assets/js/6.a34f260f.js"><link rel="prefetch" href="/assets/js/7.b152462c.js"><link rel="prefetch" href="/assets/js/8.6811b85d.js"><link rel="prefetch" href="/assets/js/9.a9a41e29.js">
    <link rel="stylesheet" href="/assets/css/0.styles.f09e5b7a.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">守夜人笔记</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  home
</a></div><div class="nav-item"><a href="/FAQ/" class="nav-link router-link-active">
  求索
</a></div><div class="nav-item"><a href="/Thought/" class="nav-link">
  随笔
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="GitHub" class="dropdown-title"><span class="title">GitHub</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/StackFei" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub首页
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  home
</a></div><div class="nav-item"><a href="/FAQ/" class="nav-link router-link-active">
  求索
</a></div><div class="nav-item"><a href="/Thought/" class="nav-link">
  随笔
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="GitHub" class="dropdown-title"><span class="title">GitHub</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/StackFei" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub首页
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/FAQ/" class="sidebar-link">📚JS手残</a></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>花里胡哨必备点</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/FAQ/ES/promise.html" class="sidebar-link">🚗promise</a></li><li><a href="/FAQ/ES/react-window.html" class="sidebar-link">🚕长列表</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>React中的一些小心得</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/FAQ/React/VirtualDom.html" class="sidebar-link">🌰简单的虚拟Dom</a></li><li><a href="/FAQ/React/react-router.html" class="sidebar-link">🍑router</a></li><li><a href="/FAQ/React/context.html" class="sidebar-link">🍇上下文</a></li><li><a href="/FAQ/React/react-redux.html" class="sidebar-link">🍎redux的通讯方式</a></li><li><a href="/FAQ/React/react-redux-middleware.html" class="sidebar-link">🍍简易中间件</a></li><li><a href="/FAQ/React/Hooks.html" class="active sidebar-link">🍊Hooks</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/FAQ/React/Hooks.html#前言" class="sidebar-link">前言</a></li><li class="sidebar-sub-header"><a href="/FAQ/React/Hooks.html#初识hooks" class="sidebar-link">初识Hooks</a></li><li class="sidebar-sub-header"><a href="/FAQ/React/Hooks.html#实操hooks" class="sidebar-link">实操Hooks</a></li><li class="sidebar-sub-header"><a href="/FAQ/React/Hooks.html#手搓hooks" class="sidebar-link">手搓Hooks</a></li></ul></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Vue的一些小笔记</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/FAQ/Vue/Cli.html" class="sidebar-link">🔨花里胡哨的cli</a></li><li><a href="/FAQ/Vue/observer.html" class="sidebar-link">🔧乞丐版本MvvM</a></li><li><a href="/FAQ/Vue/Communication.html" class="sidebar-link">🛠️记一次通信方式</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>日常杂玩</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/FAQ/Work/TSC.html" class="sidebar-link">🏋️‍♂️TypeScript</a></li><li><a href="/FAQ/Work/cicd.html" class="sidebar-link">🚴持续集成部署（ci/cd）</a></li><li><a href="/FAQ/Work/AOP.html" class="sidebar-link">🏌️‍♂️AOP面向切片编程</a></li><li><a href="/FAQ/Work/WeChat.html" class="sidebar-link">⛹️踩坑React系列小程序</a></li><li><a href="/FAQ/Work/Work1.html" class="sidebar-link">🤾‍♂️前端请求的正确打开方式</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>乱写系列</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/FAQ/Node/require.html" class="sidebar-link">🏀require基操</a></li><li><a href="/FAQ/Node/Koa.html" class="sidebar-link">⚽️初级Koa</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><blockquote><p><code>React</code> v16.7.0-alpha 中第一次引入了 Hooks 的概念，在 v16.8.0 版本被正式发布。<code>React hook</code> 在 <code>React</code> 中只是对 <code>React hook</code> 的概念性的描述，在开发中我们用到的实际功能都应该叫做 <code>React hook</code>。</p></blockquote> <h2 id="前言"><a href="#前言" class="header-anchor">#</a> 前言</h2> <p><code>React hook</code> 一经发行，收到广大程序员的拥戴。得益于 <code>React hook</code> 的函数式编程，写法相对于老式的类组件编程产出的代码量少了量的变化，但也并不是绝对的完美，老项目的代码量可不是一朝一夕能被清理掉的，况且还得兼容以前所有的逻辑。所以，迭代咱不考虑，但尝鲜也是足够的。这并不影响大家拥抱新技术。</p> <h2 id="初识hooks"><a href="#初识hooks" class="header-anchor">#</a> 初识Hooks</h2> <p>框架都素以钩子函数，来操作整个流程周期，<code>Hooks</code>就是整合聚合函数，减少代码量。现在来了解一下官方提供的钩子函数，基本钩子函数最为常见，其他的钩子函数视情况而使用。</p> <ul><li>基本钩子函数
<ul><li>useState</li> <li>useEffect</li> <li>useContext</li></ul></li> <li>其他钩子函数
<ul><li>useCallback</li> <li>useReducer</li> <li>useMemo</li> <li>useRef</li> <li>useLayoutEffect</li> <li>useImperativeHandle</li> <li>useDebugValue</li></ul></li></ul> <h3 id="基本操作"><a href="#基本操作" class="header-anchor">#</a> 基本操作</h3> <h3 id="usestate"><a href="#usestate" class="header-anchor">#</a> useState</h3> <p>此方法创建一个新的状态，接收一个固定的参数值，返回一个新的参数值，返回值由一个数组包装，包括返回新的状态值，以及修改状态值的方法，可以使用数组解构将其结构出来。最新版的 <code>React</code> 可以使用 <code>Fragment</code> 来包裹，避免使用多余的标签。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span>useState<span class="token punctuation">}</span> <span class="token keyword">from</span>  <span class="token string">'react'</span>
<span class="token keyword">const</span> <span class="token function-variable function">App</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">[</span>count<span class="token punctuation">,</span> setCount<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span><span class="token punctuation">(</span><span class="token operator">&lt;</span><span class="token operator">&gt;</span>
        <span class="token punctuation">{</span>count<span class="token punctuation">}</span>
        <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">setCount</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">ceil</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>改变count<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>使用方法简单粗暴，简单介绍一下，<code>useState</code> 第一个参数为初始值，第二个参数为操作初始值的方法，不传入的话默认为一个空数组，由其解构出来，如果有初始值，可以直接将其注入到 <code>useState(&quot;初始值&quot;)</code> 中，将事件直接绑定到元素之上，也是比较恶心的一件事，但函数式有没有生命周期来执行事件，岂不是很尴尬，接下来的一个钩子函数就能解决这个问题，自带生命周期。</p> <p><img src="/assets/img/hooks1.7743c3dd.gif" alt="hooks钩子函数"></p> <h3 id="useeffect"><a href="#useeffect" class="header-anchor">#</a> useEffect</h3> <p>语义化函数，副作用。传统开发中函数式组件，充当展示组件，不想类组件拥有自己的生命周期这一说法，既然要用函数式开发，又不能没有生命周期，<code>useEffect</code> 就是来充当这一角色。可以结合 <code>useState</code> 来完成整个页面从初始化到数据改变的过程。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> React <span class="token punctuation">,</span> <span class="token punctuation">{</span>useState<span class="token punctuation">,</span> useEffect<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>
<span class="token keyword">const</span> <span class="token function-variable function">App</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">[</span>count <span class="token punctuation">,</span> setCount<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token function">setCount</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">ceil</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>count<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span><span class="token punctuation">(</span><span class="token operator">&lt;</span><span class="token operator">&gt;</span>
        <span class="token punctuation">{</span>count<span class="token punctuation">}</span>
        <span class="token operator">&lt;</span>button<span class="token operator">&gt;</span>改变count<span class="token operator">&lt;</span>button<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>这样看起来就很舒服，但这仅仅只是在当前页面整个的改变数据，毫无周期可言，这也只是基本操作，<code>useEffect</code> 第一个参数是一个函数，用来操作事件，第二个参数是调用方法的前提，只要发生改变，变回触发事件，也是通过闭包来实现局部变量保存。这些会在之后的文章提到。接下来，模拟一下生命周期。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token function">setCount</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">ceil</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token function">setCount</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>count<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>简单的一句代码，就囊括了类方法中的 <code>componentDidMount</code>, <code>componentWillUnmout</code> 两个生命周期，这两个是在页面挂载/卸载阶段执行的方法，<code>useEffect</code> 第一个参数会在挂载时执行，如果返回第二个参数（方法）就会在当前组件卸载时执行返回的方法，即解决副作用问题。</p> <h3 id="usecallback"><a href="#usecallback" class="header-anchor">#</a> useCallback</h3> <p>顾名思义，回调函数。用于将相同逻辑的方法封装到同一个回调中，减少不必要的代码量，配合 <code>useEffect</code> 可谓是双宿双飞。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> React <span class="token punctuation">,</span> <span class="token punctuation">{</span>useState<span class="token punctuation">,</span> useEffect<span class="token punctuation">,</span> useCallback<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> message <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'antd'</span>
<span class="token keyword">const</span> <span class="token function-variable function">App</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">[</span>count <span class="token punctuation">,</span> setCount<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> <span class="token punctuation">[</span>count1 <span class="token punctuation">,</span> setCount1<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> calculateCount <span class="token operator">=</span> <span class="token function">useCallback</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>count1 <span class="token operator">&amp;&amp;</span> count2<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> count <span class="token operator">*</span> count1<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> count <span class="token operator">+</span> count1<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>count<span class="token punctuation">,</span> count1<span class="token punctuation">]</span><span class="token punctuation">)</span>

    <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token function">calculateCount</span><span class="token punctuation">(</span>count<span class="token punctuation">,</span> count1<span class="token punctuation">)</span><span class="token punctuation">;</span>
         message<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">执行副作用，最新值为</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>result<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>calculateCount<span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span><span class="token punctuation">(</span><span class="token operator">&lt;</span><span class="token operator">&gt;</span>
        <span class="token punctuation">{</span>count<span class="token punctuation">}</span>
        <span class="token operator">&lt;</span>button<span class="token operator">&gt;</span>改变count<span class="token operator">&lt;</span>button<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>button<span class="token operator">&gt;</span>改变count1<span class="token operator">&lt;</span>button<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>可以看出， <code>useCallback</code> 与 <code>useEffect</code> 的用法有异曲同工之妙，几乎可以说是一毛一样，两个相同逻辑的方法，封装到一个 <code>callback</code> 回调中，某一个值发生改变即可触发执行事件。</p> <p><img src="/assets/img/hooks2.06be665f.gif" alt="hooks钩子函数"></p> <h3 id="useref"><a href="#useref" class="header-anchor">#</a> useRef</h3> <p><code>useRef</code> 有点类似于 类组件中的 <code>createRef</code> 接收一个初始值，返回一个对象通过current获取到当前对象，并保存节点当前状态,且保存的变量不会随着数据的变化而重新生成，保持最后一次赋值状态。其功能配合上 <code>useCabllback</code>, <code>useEffect</code>,完美实现 <code>preProps/preState</code> 的功能。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token punctuation">[</span>count<span class="token punctuation">,</span> changeCount<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token punctuation">[</span>count1<span class="token punctuation">,</span> changeCount1<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 创建初始值为空对象的prestate</span>
<span class="token keyword">const</span> preState <span class="token operator">=</span> <span class="token function">useRef</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 依赖preState进行判断时可以先判断，最后保存最新的state数据</span>
<span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span> <span class="token operator">=</span> preState<span class="token punctuation">.</span>current<span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token comment">// 条件判断) {</span>
    <span class="token comment">// 逻辑</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// 保存最新的state</span>
  preState<span class="token punctuation">.</span>current <span class="token operator">=</span> <span class="token punctuation">{</span>
    count<span class="token punctuation">,</span>
    count1<span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><img src="/assets/img/hooks3.1eb6c56e.gif" alt="hooks钩子函数"></p> <h3 id="usememo"><a href="#usememo" class="header-anchor">#</a> useMemo</h3> <p>Memo 为 Memory 简写，<code>useMemo</code> 即使用记忆的内容。主要用于优化性能这块。就像前面所说 <code>useEffect</code> 没有设置第二个参数关联状态，每次都会触发。同样通过计算出来的值或者组件状态也都会重新计算/挂载，即使状态并没有发生改变。
在日常业务中， <code>useMemo</code> 可以用来缓存计算的值或组件，避免重复计算或者挂载带来不必要的性能浪费。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> useState<span class="token punctuation">,</span> useMemo <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> message <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'antd'</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">HookDemo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>count1<span class="token punctuation">,</span> changeCount1<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>count2<span class="token punctuation">,</span> changeCount2<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> calculateCount <span class="token operator">=</span> <span class="token function">useMemo</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    message<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">'重新生成计算结果'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> count1 <span class="token operator">*</span> <span class="token number">10</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>count1<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
      <span class="token punctuation">{</span>calculateCount<span class="token punctuation">}</span>
      <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token function">changeCount1</span><span class="token punctuation">(</span>count1 <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>改变count1<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token function">changeCount2</span><span class="token punctuation">(</span>count2 <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>改变count2<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>参数与 <code>useEffect</code> 等钩子函数无差别</p> <p><img src="/assets/img/hooks4.67e4d125.gif" alt="hooks钩子函数"></p> <p>初次了解可能只会觉得 <code>useMemo</code> 用来做计算缓存，返回值无非是数字类型或者字符串类型。其实，并不关心返回值类型，<code>useMemo</code> 内部只接受状态值，依据状态值返回另一个状态。简称 <code>雨我无瓜</code>。今天就先讲到这，下节再继续。</p> <h2 id="实操hooks"><a href="#实操hooks" class="header-anchor">#</a> 实操Hooks</h2> <blockquote><p>关于 <code>React hook</code> 已经有了基本的了解，进入到实战阶段</p></blockquote> <h3 id="回顾hooks特性"><a href="#回顾hooks特性" class="header-anchor">#</a> 回顾Hooks特性</h3> <p><code>hooks</code> 称得上是函数式组件吃饭的家伙了，凭借钩子函数来模仿生命周期的流程。靠其简洁的代码量配上高效的性能，可谓是一枝独秀。瞬间占领了类组件的大批江山，受到了广大开发者的青睐。
既然，已经学会了怎么用这些钩子，那就得用一些高级用法，不然会显得很low，真可谓头可断，发型不能乱。</p> <h3 id="编写自己的hooks组件"><a href="#编写自己的hooks组件" class="header-anchor">#</a> 编写自己的Hooks组件 <span class="badge tip" style="vertical-align:top;" data-v-26ebd6a3>基本类型hooks</span></h3> <p>最基本的钩子也就是返回包含了更多逻辑的 State 以及改变 State 方法的钩子。拿定时器来说，其最基本的就是返回当前的数字自减等功能，明确完功能后可以开始动手做了。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> useState<span class="token punctuation">,</span> useEffect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token function-variable function">App</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token function-variable function">useTimer</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> <span class="token punctuation">[</span>running<span class="token punctuation">,</span> setRunning<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">const</span> <span class="token punctuation">[</span>time<span class="token punctuation">,</span> setTime<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">60</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">let</span> interval<span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>running<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                interval <span class="token operator">=</span> <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                    <span class="token function">setTime</span><span class="token punctuation">(</span><span class="token parameter">prev</span> <span class="token operator">=&gt;</span> prev <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                <span class="token function">clearInterval</span><span class="token punctuation">(</span>interval<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>running<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">return</span> <span class="token punctuation">{</span>
            <span class="token comment">// 声明开始计数器方法</span>
            <span class="token function-variable function">start</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                <span class="token function">setRunning</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token comment">// 声明停止计数器方法</span>
            <span class="token function-variable function">stop</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                <span class="token function">setRunning</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token comment">// 声明重置计数器方法</span>
            <span class="token function-variable function">reset</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                <span class="token function">setTime</span><span class="token punctuation">(</span><span class="token number">60</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            time<span class="token punctuation">,</span>
            running<span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token comment">// 使用方法</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> start<span class="token punctuation">,</span> stop<span class="token punctuation">,</span> reset<span class="token punctuation">,</span> time<span class="token punctuation">,</span> running <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useTimer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">&lt;</span><span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token operator">!</span>running <span class="token operator">?</span> <span class="token string">'获取验证码'</span> <span class="token operator">:</span> time <span class="token operator">+</span> <span class="token string">'s后重发'</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span> <span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token number">1000</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>time <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">reset</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>time<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>大功告成；解释一下，先定义属于自己的 <code>hooks</code> 函数 <code>useTimer</code> 用来计算倒计时，给他默认两属性用来记录开始倒计时、倒计时间，用 <code>useEffect</code> 来运行倒计时减少，当然条件是倒计时 <code>running</code> 正在运行 ，记得清除倒计时
的副作用在 <code>useEffect</code> 第二个参数，对外暴露，开始 <code>start</code>, 结束 <code>stop</code>, 重置 <code>reset</code> 的方法，用来控制倒计时。用法也极为简单。效果如下，算得上是入门级别的demo</p> <p><img src="data:image/gif;base64,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" alt="hooks钩子函数"></p> <h3 id="编写自己的hooks组件-2"><a href="#编写自己的hooks组件-2" class="header-anchor">#</a> 编写自己的Hooks组件 <span class="badge tip" style="vertical-align:top;" data-v-26ebd6a3>基本类型hooks</span></h3> <p>当然仅仅倒计时并不能满足我们的好奇心，接下来干一个稍微复杂一点的，其实也不能算是复杂，只是将增加、减少、重置结合起来，功能虽增多，却也只是换汤不换药</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> useState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span>  <span class="token function-variable function">useCounter</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">initialValue</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// 接受初始化的值生成state</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>count<span class="token punctuation">,</span> changeCount<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span>initialValue<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 声明减少的方法</span>
  <span class="token keyword">const</span> <span class="token function-variable function">decrease</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">changeCount</span><span class="token punctuation">(</span>count <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// 声明增加的方法</span>
  <span class="token keyword">const</span> <span class="token function-variable function">increase</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">changeCount</span><span class="token punctuation">(</span>count <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// 声明重置计数器方法</span>
  <span class="token keyword">const</span> <span class="token function-variable function">resetCounter</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">changeCount</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token punctuation">[</span>count<span class="token punctuation">,</span> <span class="token punctuation">{</span> decrease<span class="token punctuation">,</span> increase<span class="token punctuation">,</span> resetCounter <span class="token punctuation">}</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">myHooksView</span>  <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  <span class="token comment">// 在函数组件中使用我们自己编写的hook生成一个计数器，并拿到所有操作方法的对象</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>count<span class="token punctuation">,</span> controlCount<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useCounter</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
  	<span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
    	当前数量：<span class="token punctuation">{</span>count<span class="token punctuation">}</span>
			<span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span>controlCount<span class="token punctuation">.</span>decrease<span class="token punctuation">}</span><span class="token operator">&gt;</span>减少<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
			<span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span>controlCount<span class="token punctuation">.</span>increase<span class="token punctuation">}</span><span class="token operator">&gt;</span>增加<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
			<span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span>controlCount<span class="token punctuation">.</span>resetCounter<span class="token punctuation">}</span><span class="token operator">&gt;</span>重置<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>用法类似，就不做过多介绍。</p> <p><img src="/assets/img/hooks6.ec44ff84.gif" alt="hooks钩子函数"></p> <h3 id="编写自己的hooks组件-3"><a href="#编写自己的hooks组件-3" class="header-anchor">#</a> 编写自己的Hooks组件 <span class="badge tip" style="vertical-align:top;" data-v-26ebd6a3>DOM类型hooks</span></h3> <p>翻完逻辑数值类型的 <code>hooks</code> 自定义组件这座山，就见到大海了？ 答案是 <code>NO</code> ,可不止是这点功能呢，还能自定义返回DOM节点的钩子函数，没想到吧。借用一下 <code>antd</code> 的库来操作以 Modal举例</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> useState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Modal <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'antd'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">useModal</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>visible<span class="token punctuation">,</span> changeVisible<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> <span class="token function-variable function">toggleModalVisible</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">changeVisible</span><span class="token punctuation">(</span><span class="token operator">!</span>visible<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>Modal
      visible<span class="token operator">=</span><span class="token punctuation">{</span>visible<span class="token punctuation">}</span>
      onOk<span class="token operator">=</span><span class="token punctuation">{</span>toggleModalVisible<span class="token punctuation">}</span>
      onCancel<span class="token operator">=</span><span class="token punctuation">{</span>toggleModalVisible<span class="token punctuation">}</span>
    <span class="token operator">&gt;</span>
      弹窗内容
  	<span class="token operator">&lt;</span><span class="token operator">/</span>Modal<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">,</span> toggleModalVisible<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">HookDemo</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>modal<span class="token punctuation">,</span> toggleModal<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useModal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
      <span class="token punctuation">{</span>modal<span class="token punctuation">}</span>
      <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span>toggleModal<span class="token punctuation">}</span><span class="token operator">&gt;</span>打开弹窗<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>写法、用法其实和之前的没啥区别，无非就是将值得改变映射到DOM节点上，然后整体返回，符合函数式编程，组件化思路。</p> <p><img src="/assets/img/hooks7.8a90fc0c.gif" alt="hooks钩子函数"></p> <h2 id="手搓hooks"><a href="#手搓hooks" class="header-anchor">#</a> 手搓Hooks</h2> <span class="badge tip" style="vertical-align:top;" data-v-26ebd6a3>待更新......</span> <h3 id="参考"><a href="#参考" class="header-anchor">#</a> 参考</h3> <p><a href="https://juejin.im/post/5d754dbde51d4561cd2466bf" target="_blank" rel="noopener noreferrer">实操hooks, 看完这篇，你也能把 React Hooks 玩出花<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">最后更新时间:</span> <span class="time">12/4/2019, 12:43:57 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/FAQ/React/react-redux-middleware.html" class="prev">
        🍍简易中间件
      </a></span> <span class="next"><a href="/FAQ/Vue/Cli.html">
        🔨花里胡哨的cli
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.903983bb.js" defer></script><script src="/assets/js/2.c5c844f9.js" defer></script><script src="/assets/js/4.29bcc168.js" defer></script><script src="/assets/js/10.acc61093.js" defer></script>
  </body>
</html>
