<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Hooks | å®ˆå¤œäººç¬”è®°</title>
    <meta name="description" content="å®ˆå¤œäººç¬”è®°">
    <meta name="generator" content="VuePress 1.3.1">
    <link rel="icon" href="/img/favicon.ico">
  <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    
    <link rel="preload" href="/assets/css/0.styles.f09e5b7a.css" as="style"><link rel="preload" href="/assets/js/app.903983bb.js" as="script"><link rel="preload" href="/assets/js/2.c5c844f9.js" as="script"><link rel="preload" href="/assets/js/4.29bcc168.js" as="script"><link rel="preload" href="/assets/js/10.acc61093.js" as="script"><link rel="prefetch" href="/assets/js/11.b5b7d313.js"><link rel="prefetch" href="/assets/js/12.044e77b3.js"><link rel="prefetch" href="/assets/js/13.f84ff47d.js"><link rel="prefetch" href="/assets/js/14.4f25373e.js"><link rel="prefetch" href="/assets/js/15.69ad7253.js"><link rel="prefetch" href="/assets/js/16.ac264240.js"><link rel="prefetch" href="/assets/js/17.8684da05.js"><link rel="prefetch" href="/assets/js/18.ceef7e7d.js"><link rel="prefetch" href="/assets/js/19.fdccf963.js"><link rel="prefetch" href="/assets/js/20.eea2ef94.js"><link rel="prefetch" href="/assets/js/21.436a904b.js"><link rel="prefetch" href="/assets/js/22.5b0e4632.js"><link rel="prefetch" href="/assets/js/23.456132eb.js"><link rel="prefetch" href="/assets/js/24.0c9dfbdb.js"><link rel="prefetch" href="/assets/js/25.1e46f166.js"><link rel="prefetch" href="/assets/js/26.bc6d72fe.js"><link rel="prefetch" href="/assets/js/27.699fbdd0.js"><link rel="prefetch" href="/assets/js/28.b4423e59.js"><link rel="prefetch" href="/assets/js/3.b94df1a7.js"><link rel="prefetch" href="/assets/js/5.a332531e.js"><link rel="prefetch" href="/assets/js/6.a34f260f.js"><link rel="prefetch" href="/assets/js/7.b152462c.js"><link rel="prefetch" href="/assets/js/8.6811b85d.js"><link rel="prefetch" href="/assets/js/9.a9a41e29.js">
    <link rel="stylesheet" href="/assets/css/0.styles.f09e5b7a.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">å®ˆå¤œäººç¬”è®°</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  home
</a></div><div class="nav-item"><a href="/FAQ/" class="nav-link router-link-active">
  æ±‚ç´¢
</a></div><div class="nav-item"><a href="/Thought/" class="nav-link">
  éšç¬”
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="GitHub" class="dropdown-title"><span class="title">GitHub</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/StackFei" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHubé¦–é¡µ
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  home
</a></div><div class="nav-item"><a href="/FAQ/" class="nav-link router-link-active">
  æ±‚ç´¢
</a></div><div class="nav-item"><a href="/Thought/" class="nav-link">
  éšç¬”
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="GitHub" class="dropdown-title"><span class="title">GitHub</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/StackFei" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHubé¦–é¡µ
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/FAQ/" class="sidebar-link">ğŸ“šJSæ‰‹æ®‹</a></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>èŠ±é‡Œèƒ¡å“¨å¿…å¤‡ç‚¹</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/FAQ/ES/promise.html" class="sidebar-link">ğŸš—promise</a></li><li><a href="/FAQ/ES/react-window.html" class="sidebar-link">ğŸš•é•¿åˆ—è¡¨</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Reactä¸­çš„ä¸€äº›å°å¿ƒå¾—</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/FAQ/React/VirtualDom.html" class="sidebar-link">ğŸŒ°ç®€å•çš„è™šæ‹ŸDom</a></li><li><a href="/FAQ/React/react-router.html" class="sidebar-link">ğŸ‘router</a></li><li><a href="/FAQ/React/context.html" class="sidebar-link">ğŸ‡ä¸Šä¸‹æ–‡</a></li><li><a href="/FAQ/React/react-redux.html" class="sidebar-link">ğŸreduxçš„é€šè®¯æ–¹å¼</a></li><li><a href="/FAQ/React/react-redux-middleware.html" class="sidebar-link">ğŸç®€æ˜“ä¸­é—´ä»¶</a></li><li><a href="/FAQ/React/Hooks.html" class="active sidebar-link">ğŸŠHooks</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/FAQ/React/Hooks.html#å‰è¨€" class="sidebar-link">å‰è¨€</a></li><li class="sidebar-sub-header"><a href="/FAQ/React/Hooks.html#åˆè¯†hooks" class="sidebar-link">åˆè¯†Hooks</a></li><li class="sidebar-sub-header"><a href="/FAQ/React/Hooks.html#å®æ“hooks" class="sidebar-link">å®æ“Hooks</a></li><li class="sidebar-sub-header"><a href="/FAQ/React/Hooks.html#æ‰‹æ“hooks" class="sidebar-link">æ‰‹æ“Hooks</a></li></ul></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Vueçš„ä¸€äº›å°ç¬”è®°</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/FAQ/Vue/Cli.html" class="sidebar-link">ğŸ”¨èŠ±é‡Œèƒ¡å“¨çš„cli</a></li><li><a href="/FAQ/Vue/observer.html" class="sidebar-link">ğŸ”§ä¹ä¸ç‰ˆæœ¬MvvM</a></li><li><a href="/FAQ/Vue/Communication.html" class="sidebar-link">ğŸ› ï¸è®°ä¸€æ¬¡é€šä¿¡æ–¹å¼</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>æ—¥å¸¸æ‚ç©</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/FAQ/Work/TSC.html" class="sidebar-link">ğŸ‹ï¸â€â™‚ï¸TypeScript</a></li><li><a href="/FAQ/Work/cicd.html" class="sidebar-link">ğŸš´æŒç»­é›†æˆéƒ¨ç½²ï¼ˆci/cdï¼‰</a></li><li><a href="/FAQ/Work/AOP.html" class="sidebar-link">ğŸŒï¸â€â™‚ï¸AOPé¢å‘åˆ‡ç‰‡ç¼–ç¨‹</a></li><li><a href="/FAQ/Work/WeChat.html" class="sidebar-link">â›¹ï¸è¸©å‘Reactç³»åˆ—å°ç¨‹åº</a></li><li><a href="/FAQ/Work/Work1.html" class="sidebar-link">ğŸ¤¾â€â™‚ï¸å‰ç«¯è¯·æ±‚çš„æ­£ç¡®æ‰“å¼€æ–¹å¼</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>ä¹±å†™ç³»åˆ—</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/FAQ/Node/require.html" class="sidebar-link">ğŸ€requireåŸºæ“</a></li><li><a href="/FAQ/Node/Koa.html" class="sidebar-link">âš½ï¸åˆçº§Koa</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><blockquote><p><code>React</code> v16.7.0-alpha ä¸­ç¬¬ä¸€æ¬¡å¼•å…¥äº† Hooks çš„æ¦‚å¿µï¼Œåœ¨ v16.8.0 ç‰ˆæœ¬è¢«æ­£å¼å‘å¸ƒã€‚<code>React hook</code> åœ¨ <code>React</code> ä¸­åªæ˜¯å¯¹ <code>React hook</code> çš„æ¦‚å¿µæ€§çš„æè¿°ï¼Œåœ¨å¼€å‘ä¸­æˆ‘ä»¬ç”¨åˆ°çš„å®é™…åŠŸèƒ½éƒ½åº”è¯¥å«åš <code>React hook</code>ã€‚</p></blockquote> <h2 id="å‰è¨€"><a href="#å‰è¨€" class="header-anchor">#</a> å‰è¨€</h2> <p><code>React hook</code> ä¸€ç»å‘è¡Œï¼Œæ”¶åˆ°å¹¿å¤§ç¨‹åºå‘˜çš„æ‹¥æˆ´ã€‚å¾—ç›Šäº <code>React hook</code> çš„å‡½æ•°å¼ç¼–ç¨‹ï¼Œå†™æ³•ç›¸å¯¹äºè€å¼çš„ç±»ç»„ä»¶ç¼–ç¨‹äº§å‡ºçš„ä»£ç é‡å°‘äº†é‡çš„å˜åŒ–ï¼Œä½†ä¹Ÿå¹¶ä¸æ˜¯ç»å¯¹çš„å®Œç¾ï¼Œè€é¡¹ç›®çš„ä»£ç é‡å¯ä¸æ˜¯ä¸€æœä¸€å¤•èƒ½è¢«æ¸…ç†æ‰çš„ï¼Œå†µä¸”è¿˜å¾—å…¼å®¹ä»¥å‰æ‰€æœ‰çš„é€»è¾‘ã€‚æ‰€ä»¥ï¼Œè¿­ä»£å’±ä¸è€ƒè™‘ï¼Œä½†å°é²œä¹Ÿæ˜¯è¶³å¤Ÿçš„ã€‚è¿™å¹¶ä¸å½±å“å¤§å®¶æ‹¥æŠ±æ–°æŠ€æœ¯ã€‚</p> <h2 id="åˆè¯†hooks"><a href="#åˆè¯†hooks" class="header-anchor">#</a> åˆè¯†Hooks</h2> <p>æ¡†æ¶éƒ½ç´ ä»¥é’©å­å‡½æ•°ï¼Œæ¥æ“ä½œæ•´ä¸ªæµç¨‹å‘¨æœŸï¼Œ<code>Hooks</code>å°±æ˜¯æ•´åˆèšåˆå‡½æ•°ï¼Œå‡å°‘ä»£ç é‡ã€‚ç°åœ¨æ¥äº†è§£ä¸€ä¸‹å®˜æ–¹æä¾›çš„é’©å­å‡½æ•°ï¼ŒåŸºæœ¬é’©å­å‡½æ•°æœ€ä¸ºå¸¸è§ï¼Œå…¶ä»–çš„é’©å­å‡½æ•°è§†æƒ…å†µè€Œä½¿ç”¨ã€‚</p> <ul><li>åŸºæœ¬é’©å­å‡½æ•°
<ul><li>useState</li> <li>useEffect</li> <li>useContext</li></ul></li> <li>å…¶ä»–é’©å­å‡½æ•°
<ul><li>useCallback</li> <li>useReducer</li> <li>useMemo</li> <li>useRef</li> <li>useLayoutEffect</li> <li>useImperativeHandle</li> <li>useDebugValue</li></ul></li></ul> <h3 id="åŸºæœ¬æ“ä½œ"><a href="#åŸºæœ¬æ“ä½œ" class="header-anchor">#</a> åŸºæœ¬æ“ä½œ</h3> <h3 id="usestate"><a href="#usestate" class="header-anchor">#</a> useState</h3> <p>æ­¤æ–¹æ³•åˆ›å»ºä¸€ä¸ªæ–°çš„çŠ¶æ€ï¼Œæ¥æ”¶ä¸€ä¸ªå›ºå®šçš„å‚æ•°å€¼ï¼Œè¿”å›ä¸€ä¸ªæ–°çš„å‚æ•°å€¼ï¼Œè¿”å›å€¼ç”±ä¸€ä¸ªæ•°ç»„åŒ…è£…ï¼ŒåŒ…æ‹¬è¿”å›æ–°çš„çŠ¶æ€å€¼ï¼Œä»¥åŠä¿®æ”¹çŠ¶æ€å€¼çš„æ–¹æ³•ï¼Œå¯ä»¥ä½¿ç”¨æ•°ç»„è§£æ„å°†å…¶ç»“æ„å‡ºæ¥ã€‚æœ€æ–°ç‰ˆçš„ <code>React</code> å¯ä»¥ä½¿ç”¨ <code>Fragment</code> æ¥åŒ…è£¹ï¼Œé¿å…ä½¿ç”¨å¤šä½™çš„æ ‡ç­¾ã€‚</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span>useState<span class="token punctuation">}</span> <span class="token keyword">from</span>  <span class="token string">'react'</span>
<span class="token keyword">const</span> <span class="token function-variable function">App</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">[</span>count<span class="token punctuation">,</span> setCount<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span><span class="token punctuation">(</span><span class="token operator">&lt;</span><span class="token operator">&gt;</span>
        <span class="token punctuation">{</span>count<span class="token punctuation">}</span>
        <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">setCount</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">ceil</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>æ”¹å˜count<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ä½¿ç”¨æ–¹æ³•ç®€å•ç²—æš´ï¼Œç®€å•ä»‹ç»ä¸€ä¸‹ï¼Œ<code>useState</code> ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºåˆå§‹å€¼ï¼Œç¬¬äºŒä¸ªå‚æ•°ä¸ºæ“ä½œåˆå§‹å€¼çš„æ–¹æ³•ï¼Œä¸ä¼ å…¥çš„è¯é»˜è®¤ä¸ºä¸€ä¸ªç©ºæ•°ç»„ï¼Œç”±å…¶è§£æ„å‡ºæ¥ï¼Œå¦‚æœæœ‰åˆå§‹å€¼ï¼Œå¯ä»¥ç›´æ¥å°†å…¶æ³¨å…¥åˆ° <code>useState(&quot;åˆå§‹å€¼&quot;)</code> ä¸­ï¼Œå°†äº‹ä»¶ç›´æ¥ç»‘å®šåˆ°å…ƒç´ ä¹‹ä¸Šï¼Œä¹Ÿæ˜¯æ¯”è¾ƒæ¶å¿ƒçš„ä¸€ä»¶äº‹ï¼Œä½†å‡½æ•°å¼æœ‰æ²¡æœ‰ç”Ÿå‘½å‘¨æœŸæ¥æ‰§è¡Œäº‹ä»¶ï¼Œå²‚ä¸æ˜¯å¾ˆå°´å°¬ï¼Œæ¥ä¸‹æ¥çš„ä¸€ä¸ªé’©å­å‡½æ•°å°±èƒ½è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œè‡ªå¸¦ç”Ÿå‘½å‘¨æœŸã€‚</p> <p><img src="/assets/img/hooks1.7743c3dd.gif" alt="hooksé’©å­å‡½æ•°"></p> <h3 id="useeffect"><a href="#useeffect" class="header-anchor">#</a> useEffect</h3> <p>è¯­ä¹‰åŒ–å‡½æ•°ï¼Œå‰¯ä½œç”¨ã€‚ä¼ ç»Ÿå¼€å‘ä¸­å‡½æ•°å¼ç»„ä»¶ï¼Œå……å½“å±•ç¤ºç»„ä»¶ï¼Œä¸æƒ³ç±»ç»„ä»¶æ‹¥æœ‰è‡ªå·±çš„ç”Ÿå‘½å‘¨æœŸè¿™ä¸€è¯´æ³•ï¼Œæ—¢ç„¶è¦ç”¨å‡½æ•°å¼å¼€å‘ï¼Œåˆä¸èƒ½æ²¡æœ‰ç”Ÿå‘½å‘¨æœŸï¼Œ<code>useEffect</code> å°±æ˜¯æ¥å……å½“è¿™ä¸€è§’è‰²ã€‚å¯ä»¥ç»“åˆ <code>useState</code> æ¥å®Œæˆæ•´ä¸ªé¡µé¢ä»åˆå§‹åŒ–åˆ°æ•°æ®æ”¹å˜çš„è¿‡ç¨‹ã€‚</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> React <span class="token punctuation">,</span> <span class="token punctuation">{</span>useState<span class="token punctuation">,</span> useEffect<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>
<span class="token keyword">const</span> <span class="token function-variable function">App</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">[</span>count <span class="token punctuation">,</span> setCount<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token function">setCount</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">ceil</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>count<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span><span class="token punctuation">(</span><span class="token operator">&lt;</span><span class="token operator">&gt;</span>
        <span class="token punctuation">{</span>count<span class="token punctuation">}</span>
        <span class="token operator">&lt;</span>button<span class="token operator">&gt;</span>æ”¹å˜count<span class="token operator">&lt;</span>button<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>è¿™æ ·çœ‹èµ·æ¥å°±å¾ˆèˆ’æœï¼Œä½†è¿™ä»…ä»…åªæ˜¯åœ¨å½“å‰é¡µé¢æ•´ä¸ªçš„æ”¹å˜æ•°æ®ï¼Œæ¯«æ— å‘¨æœŸå¯è¨€ï¼Œè¿™ä¹Ÿåªæ˜¯åŸºæœ¬æ“ä½œï¼Œ<code>useEffect</code> ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œç”¨æ¥æ“ä½œäº‹ä»¶ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯è°ƒç”¨æ–¹æ³•çš„å‰æï¼Œåªè¦å‘ç”Ÿæ”¹å˜ï¼Œå˜å›è§¦å‘äº‹ä»¶ï¼Œä¹Ÿæ˜¯é€šè¿‡é—­åŒ…æ¥å®ç°å±€éƒ¨å˜é‡ä¿å­˜ã€‚è¿™äº›ä¼šåœ¨ä¹‹åçš„æ–‡ç« æåˆ°ã€‚æ¥ä¸‹æ¥ï¼Œæ¨¡æ‹Ÿä¸€ä¸‹ç”Ÿå‘½å‘¨æœŸã€‚</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token function">setCount</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">ceil</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token function">setCount</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>count<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>ç®€å•çš„ä¸€å¥ä»£ç ï¼Œå°±å›Šæ‹¬äº†ç±»æ–¹æ³•ä¸­çš„ <code>componentDidMount</code>, <code>componentWillUnmout</code> ä¸¤ä¸ªç”Ÿå‘½å‘¨æœŸï¼Œè¿™ä¸¤ä¸ªæ˜¯åœ¨é¡µé¢æŒ‚è½½/å¸è½½é˜¶æ®µæ‰§è¡Œçš„æ–¹æ³•ï¼Œ<code>useEffect</code> ç¬¬ä¸€ä¸ªå‚æ•°ä¼šåœ¨æŒ‚è½½æ—¶æ‰§è¡Œï¼Œå¦‚æœè¿”å›ç¬¬äºŒä¸ªå‚æ•°ï¼ˆæ–¹æ³•ï¼‰å°±ä¼šåœ¨å½“å‰ç»„ä»¶å¸è½½æ—¶æ‰§è¡Œè¿”å›çš„æ–¹æ³•ï¼Œå³è§£å†³å‰¯ä½œç”¨é—®é¢˜ã€‚</p> <h3 id="usecallback"><a href="#usecallback" class="header-anchor">#</a> useCallback</h3> <p>é¡¾åæ€ä¹‰ï¼Œå›è°ƒå‡½æ•°ã€‚ç”¨äºå°†ç›¸åŒé€»è¾‘çš„æ–¹æ³•å°è£…åˆ°åŒä¸€ä¸ªå›è°ƒä¸­ï¼Œå‡å°‘ä¸å¿…è¦çš„ä»£ç é‡ï¼Œé…åˆ <code>useEffect</code> å¯è°“æ˜¯åŒå®¿åŒé£ã€‚</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> React <span class="token punctuation">,</span> <span class="token punctuation">{</span>useState<span class="token punctuation">,</span> useEffect<span class="token punctuation">,</span> useCallback<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> message <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'antd'</span>
<span class="token keyword">const</span> <span class="token function-variable function">App</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">[</span>count <span class="token punctuation">,</span> setCount<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> <span class="token punctuation">[</span>count1 <span class="token punctuation">,</span> setCount1<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> calculateCount <span class="token operator">=</span> <span class="token function">useCallback</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>count1 <span class="token operator">&amp;&amp;</span> count2<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> count <span class="token operator">*</span> count1<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> count <span class="token operator">+</span> count1<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>count<span class="token punctuation">,</span> count1<span class="token punctuation">]</span><span class="token punctuation">)</span>

    <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token function">calculateCount</span><span class="token punctuation">(</span>count<span class="token punctuation">,</span> count1<span class="token punctuation">)</span><span class="token punctuation">;</span>
         message<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">æ‰§è¡Œå‰¯ä½œç”¨ï¼Œæœ€æ–°å€¼ä¸º</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>result<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>calculateCount<span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span><span class="token punctuation">(</span><span class="token operator">&lt;</span><span class="token operator">&gt;</span>
        <span class="token punctuation">{</span>count<span class="token punctuation">}</span>
        <span class="token operator">&lt;</span>button<span class="token operator">&gt;</span>æ”¹å˜count<span class="token operator">&lt;</span>button<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>button<span class="token operator">&gt;</span>æ”¹å˜count1<span class="token operator">&lt;</span>button<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>å¯ä»¥çœ‹å‡ºï¼Œ <code>useCallback</code> ä¸ <code>useEffect</code> çš„ç”¨æ³•æœ‰å¼‚æ›²åŒå·¥ä¹‹å¦™ï¼Œå‡ ä¹å¯ä»¥è¯´æ˜¯ä¸€æ¯›ä¸€æ ·ï¼Œä¸¤ä¸ªç›¸åŒé€»è¾‘çš„æ–¹æ³•ï¼Œå°è£…åˆ°ä¸€ä¸ª <code>callback</code> å›è°ƒä¸­ï¼ŒæŸä¸€ä¸ªå€¼å‘ç”Ÿæ”¹å˜å³å¯è§¦å‘æ‰§è¡Œäº‹ä»¶ã€‚</p> <p><img src="/assets/img/hooks2.06be665f.gif" alt="hooksé’©å­å‡½æ•°"></p> <h3 id="useref"><a href="#useref" class="header-anchor">#</a> useRef</h3> <p><code>useRef</code> æœ‰ç‚¹ç±»ä¼¼äº ç±»ç»„ä»¶ä¸­çš„ <code>createRef</code> æ¥æ”¶ä¸€ä¸ªåˆå§‹å€¼ï¼Œè¿”å›ä¸€ä¸ªå¯¹è±¡é€šè¿‡currentè·å–åˆ°å½“å‰å¯¹è±¡ï¼Œå¹¶ä¿å­˜èŠ‚ç‚¹å½“å‰çŠ¶æ€,ä¸”ä¿å­˜çš„å˜é‡ä¸ä¼šéšç€æ•°æ®çš„å˜åŒ–è€Œé‡æ–°ç”Ÿæˆï¼Œä¿æŒæœ€åä¸€æ¬¡èµ‹å€¼çŠ¶æ€ã€‚å…¶åŠŸèƒ½é…åˆä¸Š <code>useCabllback</code>, <code>useEffect</code>,å®Œç¾å®ç° <code>preProps/preState</code> çš„åŠŸèƒ½ã€‚</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token punctuation">[</span>count<span class="token punctuation">,</span> changeCount<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token punctuation">[</span>count1<span class="token punctuation">,</span> changeCount1<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// åˆ›å»ºåˆå§‹å€¼ä¸ºç©ºå¯¹è±¡çš„prestate</span>
<span class="token keyword">const</span> preState <span class="token operator">=</span> <span class="token function">useRef</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// ä¾èµ–preStateè¿›è¡Œåˆ¤æ–­æ—¶å¯ä»¥å…ˆåˆ¤æ–­ï¼Œæœ€åä¿å­˜æœ€æ–°çš„stateæ•°æ®</span>
<span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span> <span class="token operator">=</span> preState<span class="token punctuation">.</span>current<span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token comment">// æ¡ä»¶åˆ¤æ–­) {</span>
    <span class="token comment">// é€»è¾‘</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// ä¿å­˜æœ€æ–°çš„state</span>
  preState<span class="token punctuation">.</span>current <span class="token operator">=</span> <span class="token punctuation">{</span>
    count<span class="token punctuation">,</span>
    count1<span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><img src="/assets/img/hooks3.1eb6c56e.gif" alt="hooksé’©å­å‡½æ•°"></p> <h3 id="usememo"><a href="#usememo" class="header-anchor">#</a> useMemo</h3> <p>Memo ä¸º Memory ç®€å†™ï¼Œ<code>useMemo</code> å³ä½¿ç”¨è®°å¿†çš„å†…å®¹ã€‚ä¸»è¦ç”¨äºä¼˜åŒ–æ€§èƒ½è¿™å—ã€‚å°±åƒå‰é¢æ‰€è¯´ <code>useEffect</code> æ²¡æœ‰è®¾ç½®ç¬¬äºŒä¸ªå‚æ•°å…³è”çŠ¶æ€ï¼Œæ¯æ¬¡éƒ½ä¼šè§¦å‘ã€‚åŒæ ·é€šè¿‡è®¡ç®—å‡ºæ¥çš„å€¼æˆ–è€…ç»„ä»¶çŠ¶æ€ä¹Ÿéƒ½ä¼šé‡æ–°è®¡ç®—/æŒ‚è½½ï¼Œå³ä½¿çŠ¶æ€å¹¶æ²¡æœ‰å‘ç”Ÿæ”¹å˜ã€‚
åœ¨æ—¥å¸¸ä¸šåŠ¡ä¸­ï¼Œ <code>useMemo</code> å¯ä»¥ç”¨æ¥ç¼“å­˜è®¡ç®—çš„å€¼æˆ–ç»„ä»¶ï¼Œé¿å…é‡å¤è®¡ç®—æˆ–è€…æŒ‚è½½å¸¦æ¥ä¸å¿…è¦çš„æ€§èƒ½æµªè´¹ã€‚</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> useState<span class="token punctuation">,</span> useMemo <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> message <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'antd'</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">HookDemo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>count1<span class="token punctuation">,</span> changeCount1<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>count2<span class="token punctuation">,</span> changeCount2<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> calculateCount <span class="token operator">=</span> <span class="token function">useMemo</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    message<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">'é‡æ–°ç”Ÿæˆè®¡ç®—ç»“æœ'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> count1 <span class="token operator">*</span> <span class="token number">10</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>count1<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
      <span class="token punctuation">{</span>calculateCount<span class="token punctuation">}</span>
      <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token function">changeCount1</span><span class="token punctuation">(</span>count1 <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>æ”¹å˜count1<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token function">changeCount2</span><span class="token punctuation">(</span>count2 <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>æ”¹å˜count2<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>å‚æ•°ä¸ <code>useEffect</code> ç­‰é’©å­å‡½æ•°æ— å·®åˆ«</p> <p><img src="/assets/img/hooks4.67e4d125.gif" alt="hooksé’©å­å‡½æ•°"></p> <p>åˆæ¬¡äº†è§£å¯èƒ½åªä¼šè§‰å¾— <code>useMemo</code> ç”¨æ¥åšè®¡ç®—ç¼“å­˜ï¼Œè¿”å›å€¼æ— éæ˜¯æ•°å­—ç±»å‹æˆ–è€…å­—ç¬¦ä¸²ç±»å‹ã€‚å…¶å®ï¼Œå¹¶ä¸å…³å¿ƒè¿”å›å€¼ç±»å‹ï¼Œ<code>useMemo</code> å†…éƒ¨åªæ¥å—çŠ¶æ€å€¼ï¼Œä¾æ®çŠ¶æ€å€¼è¿”å›å¦ä¸€ä¸ªçŠ¶æ€ã€‚ç®€ç§° <code>é›¨æˆ‘æ— ç“œ</code>ã€‚ä»Šå¤©å°±å…ˆè®²åˆ°è¿™ï¼Œä¸‹èŠ‚å†ç»§ç»­ã€‚</p> <h2 id="å®æ“hooks"><a href="#å®æ“hooks" class="header-anchor">#</a> å®æ“Hooks</h2> <blockquote><p>å…³äº <code>React hook</code> å·²ç»æœ‰äº†åŸºæœ¬çš„äº†è§£ï¼Œè¿›å…¥åˆ°å®æˆ˜é˜¶æ®µ</p></blockquote> <h3 id="å›é¡¾hooksç‰¹æ€§"><a href="#å›é¡¾hooksç‰¹æ€§" class="header-anchor">#</a> å›é¡¾Hooksç‰¹æ€§</h3> <p><code>hooks</code> ç§°å¾—ä¸Šæ˜¯å‡½æ•°å¼ç»„ä»¶åƒé¥­çš„å®¶ä¼™äº†ï¼Œå‡­å€Ÿé’©å­å‡½æ•°æ¥æ¨¡ä»¿ç”Ÿå‘½å‘¨æœŸçš„æµç¨‹ã€‚é å…¶ç®€æ´çš„ä»£ç é‡é…ä¸Šé«˜æ•ˆçš„æ€§èƒ½ï¼Œå¯è°“æ˜¯ä¸€æç‹¬ç§€ã€‚ç¬é—´å é¢†äº†ç±»ç»„ä»¶çš„å¤§æ‰¹æ±Ÿå±±ï¼Œå—åˆ°äº†å¹¿å¤§å¼€å‘è€…çš„é’çã€‚
æ—¢ç„¶ï¼Œå·²ç»å­¦ä¼šäº†æ€ä¹ˆç”¨è¿™äº›é’©å­ï¼Œé‚£å°±å¾—ç”¨ä¸€äº›é«˜çº§ç”¨æ³•ï¼Œä¸ç„¶ä¼šæ˜¾å¾—å¾ˆlowï¼ŒçœŸå¯è°“å¤´å¯æ–­ï¼Œå‘å‹ä¸èƒ½ä¹±ã€‚</p> <h3 id="ç¼–å†™è‡ªå·±çš„hooksç»„ä»¶"><a href="#ç¼–å†™è‡ªå·±çš„hooksç»„ä»¶" class="header-anchor">#</a> ç¼–å†™è‡ªå·±çš„Hooksç»„ä»¶ <span class="badge tip" style="vertical-align:top;" data-v-26ebd6a3>åŸºæœ¬ç±»å‹hooks</span></h3> <p>æœ€åŸºæœ¬çš„é’©å­ä¹Ÿå°±æ˜¯è¿”å›åŒ…å«äº†æ›´å¤šé€»è¾‘çš„ State ä»¥åŠæ”¹å˜ State æ–¹æ³•çš„é’©å­ã€‚æ‹¿å®šæ—¶å™¨æ¥è¯´ï¼Œå…¶æœ€åŸºæœ¬çš„å°±æ˜¯è¿”å›å½“å‰çš„æ•°å­—è‡ªå‡ç­‰åŠŸèƒ½ï¼Œæ˜ç¡®å®ŒåŠŸèƒ½åå¯ä»¥å¼€å§‹åŠ¨æ‰‹åšäº†ã€‚</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> useState<span class="token punctuation">,</span> useEffect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token function-variable function">App</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token function-variable function">useTimer</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> <span class="token punctuation">[</span>running<span class="token punctuation">,</span> setRunning<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">const</span> <span class="token punctuation">[</span>time<span class="token punctuation">,</span> setTime<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">60</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">let</span> interval<span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>running<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                interval <span class="token operator">=</span> <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                    <span class="token function">setTime</span><span class="token punctuation">(</span><span class="token parameter">prev</span> <span class="token operator">=&gt;</span> prev <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                <span class="token function">clearInterval</span><span class="token punctuation">(</span>interval<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>running<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">return</span> <span class="token punctuation">{</span>
            <span class="token comment">// å£°æ˜å¼€å§‹è®¡æ•°å™¨æ–¹æ³•</span>
            <span class="token function-variable function">start</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                <span class="token function">setRunning</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token comment">// å£°æ˜åœæ­¢è®¡æ•°å™¨æ–¹æ³•</span>
            <span class="token function-variable function">stop</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                <span class="token function">setRunning</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token comment">// å£°æ˜é‡ç½®è®¡æ•°å™¨æ–¹æ³•</span>
            <span class="token function-variable function">reset</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                <span class="token function">setTime</span><span class="token punctuation">(</span><span class="token number">60</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            time<span class="token punctuation">,</span>
            running<span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token comment">// ä½¿ç”¨æ–¹æ³•</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> start<span class="token punctuation">,</span> stop<span class="token punctuation">,</span> reset<span class="token punctuation">,</span> time<span class="token punctuation">,</span> running <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useTimer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">&lt;</span><span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token operator">!</span>running <span class="token operator">?</span> <span class="token string">'è·å–éªŒè¯ç '</span> <span class="token operator">:</span> time <span class="token operator">+</span> <span class="token string">'såé‡å‘'</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span> <span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token number">1000</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>time <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">reset</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>time<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>å¤§åŠŸå‘Šæˆï¼›è§£é‡Šä¸€ä¸‹ï¼Œå…ˆå®šä¹‰å±äºè‡ªå·±çš„ <code>hooks</code> å‡½æ•° <code>useTimer</code> ç”¨æ¥è®¡ç®—å€’è®¡æ—¶ï¼Œç»™ä»–é»˜è®¤ä¸¤å±æ€§ç”¨æ¥è®°å½•å¼€å§‹å€’è®¡æ—¶ã€å€’è®¡æ—¶é—´ï¼Œç”¨ <code>useEffect</code> æ¥è¿è¡Œå€’è®¡æ—¶å‡å°‘ï¼Œå½“ç„¶æ¡ä»¶æ˜¯å€’è®¡æ—¶ <code>running</code> æ­£åœ¨è¿è¡Œ ï¼Œè®°å¾—æ¸…é™¤å€’è®¡æ—¶
çš„å‰¯ä½œç”¨åœ¨ <code>useEffect</code> ç¬¬äºŒä¸ªå‚æ•°ï¼Œå¯¹å¤–æš´éœ²ï¼Œå¼€å§‹ <code>start</code>, ç»“æŸ <code>stop</code>, é‡ç½® <code>reset</code> çš„æ–¹æ³•ï¼Œç”¨æ¥æ§åˆ¶å€’è®¡æ—¶ã€‚ç”¨æ³•ä¹Ÿæä¸ºç®€å•ã€‚æ•ˆæœå¦‚ä¸‹ï¼Œç®—å¾—ä¸Šæ˜¯å…¥é—¨çº§åˆ«çš„demo</p> <p><img src="data:image/gif;base64,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" alt="hooksé’©å­å‡½æ•°"></p> <h3 id="ç¼–å†™è‡ªå·±çš„hooksç»„ä»¶-2"><a href="#ç¼–å†™è‡ªå·±çš„hooksç»„ä»¶-2" class="header-anchor">#</a> ç¼–å†™è‡ªå·±çš„Hooksç»„ä»¶ <span class="badge tip" style="vertical-align:top;" data-v-26ebd6a3>åŸºæœ¬ç±»å‹hooks</span></h3> <p>å½“ç„¶ä»…ä»…å€’è®¡æ—¶å¹¶ä¸èƒ½æ»¡è¶³æˆ‘ä»¬çš„å¥½å¥‡å¿ƒï¼Œæ¥ä¸‹æ¥å¹²ä¸€ä¸ªç¨å¾®å¤æ‚ä¸€ç‚¹çš„ï¼Œå…¶å®ä¹Ÿä¸èƒ½ç®—æ˜¯å¤æ‚ï¼Œåªæ˜¯å°†å¢åŠ ã€å‡å°‘ã€é‡ç½®ç»“åˆèµ·æ¥ï¼ŒåŠŸèƒ½è™½å¢å¤šï¼Œå´ä¹Ÿåªæ˜¯æ¢æ±¤ä¸æ¢è¯</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> useState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span>  <span class="token function-variable function">useCounter</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">initialValue</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// æ¥å—åˆå§‹åŒ–çš„å€¼ç”Ÿæˆstate</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>count<span class="token punctuation">,</span> changeCount<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span>initialValue<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// å£°æ˜å‡å°‘çš„æ–¹æ³•</span>
  <span class="token keyword">const</span> <span class="token function-variable function">decrease</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">changeCount</span><span class="token punctuation">(</span>count <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// å£°æ˜å¢åŠ çš„æ–¹æ³•</span>
  <span class="token keyword">const</span> <span class="token function-variable function">increase</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">changeCount</span><span class="token punctuation">(</span>count <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// å£°æ˜é‡ç½®è®¡æ•°å™¨æ–¹æ³•</span>
  <span class="token keyword">const</span> <span class="token function-variable function">resetCounter</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">changeCount</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token punctuation">[</span>count<span class="token punctuation">,</span> <span class="token punctuation">{</span> decrease<span class="token punctuation">,</span> increase<span class="token punctuation">,</span> resetCounter <span class="token punctuation">}</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">myHooksView</span>  <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  <span class="token comment">// åœ¨å‡½æ•°ç»„ä»¶ä¸­ä½¿ç”¨æˆ‘ä»¬è‡ªå·±ç¼–å†™çš„hookç”Ÿæˆä¸€ä¸ªè®¡æ•°å™¨ï¼Œå¹¶æ‹¿åˆ°æ‰€æœ‰æ“ä½œæ–¹æ³•çš„å¯¹è±¡</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>count<span class="token punctuation">,</span> controlCount<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useCounter</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
  	<span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
    	å½“å‰æ•°é‡ï¼š<span class="token punctuation">{</span>count<span class="token punctuation">}</span>
			<span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span>controlCount<span class="token punctuation">.</span>decrease<span class="token punctuation">}</span><span class="token operator">&gt;</span>å‡å°‘<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
			<span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span>controlCount<span class="token punctuation">.</span>increase<span class="token punctuation">}</span><span class="token operator">&gt;</span>å¢åŠ <span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
			<span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span>controlCount<span class="token punctuation">.</span>resetCounter<span class="token punctuation">}</span><span class="token operator">&gt;</span>é‡ç½®<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ç”¨æ³•ç±»ä¼¼ï¼Œå°±ä¸åšè¿‡å¤šä»‹ç»ã€‚</p> <p><img src="/assets/img/hooks6.ec44ff84.gif" alt="hooksé’©å­å‡½æ•°"></p> <h3 id="ç¼–å†™è‡ªå·±çš„hooksç»„ä»¶-3"><a href="#ç¼–å†™è‡ªå·±çš„hooksç»„ä»¶-3" class="header-anchor">#</a> ç¼–å†™è‡ªå·±çš„Hooksç»„ä»¶ <span class="badge tip" style="vertical-align:top;" data-v-26ebd6a3>DOMç±»å‹hooks</span></h3> <p>ç¿»å®Œé€»è¾‘æ•°å€¼ç±»å‹çš„ <code>hooks</code> è‡ªå®šä¹‰ç»„ä»¶è¿™åº§å±±ï¼Œå°±è§åˆ°å¤§æµ·äº†ï¼Ÿ ç­”æ¡ˆæ˜¯ <code>NO</code> ,å¯ä¸æ­¢æ˜¯è¿™ç‚¹åŠŸèƒ½å‘¢ï¼Œè¿˜èƒ½è‡ªå®šä¹‰è¿”å›DOMèŠ‚ç‚¹çš„é’©å­å‡½æ•°ï¼Œæ²¡æƒ³åˆ°å§ã€‚å€Ÿç”¨ä¸€ä¸‹ <code>antd</code> çš„åº“æ¥æ“ä½œä»¥ Modalä¸¾ä¾‹</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> useState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Modal <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'antd'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">useModal</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>visible<span class="token punctuation">,</span> changeVisible<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> <span class="token function-variable function">toggleModalVisible</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">changeVisible</span><span class="token punctuation">(</span><span class="token operator">!</span>visible<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>Modal
      visible<span class="token operator">=</span><span class="token punctuation">{</span>visible<span class="token punctuation">}</span>
      onOk<span class="token operator">=</span><span class="token punctuation">{</span>toggleModalVisible<span class="token punctuation">}</span>
      onCancel<span class="token operator">=</span><span class="token punctuation">{</span>toggleModalVisible<span class="token punctuation">}</span>
    <span class="token operator">&gt;</span>
      å¼¹çª—å†…å®¹
  	<span class="token operator">&lt;</span><span class="token operator">/</span>Modal<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">,</span> toggleModalVisible<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">HookDemo</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>modal<span class="token punctuation">,</span> toggleModal<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useModal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
      <span class="token punctuation">{</span>modal<span class="token punctuation">}</span>
      <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span>toggleModal<span class="token punctuation">}</span><span class="token operator">&gt;</span>æ‰“å¼€å¼¹çª—<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>å†™æ³•ã€ç”¨æ³•å…¶å®å’Œä¹‹å‰çš„æ²¡å•¥åŒºåˆ«ï¼Œæ— éå°±æ˜¯å°†å€¼å¾—æ”¹å˜æ˜ å°„åˆ°DOMèŠ‚ç‚¹ä¸Šï¼Œç„¶åæ•´ä½“è¿”å›ï¼Œç¬¦åˆå‡½æ•°å¼ç¼–ç¨‹ï¼Œç»„ä»¶åŒ–æ€è·¯ã€‚</p> <p><img src="/assets/img/hooks7.8a90fc0c.gif" alt="hooksé’©å­å‡½æ•°"></p> <h2 id="æ‰‹æ“hooks"><a href="#æ‰‹æ“hooks" class="header-anchor">#</a> æ‰‹æ“Hooks</h2> <span class="badge tip" style="vertical-align:top;" data-v-26ebd6a3>å¾…æ›´æ–°......</span> <h3 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="header-anchor">#</a> å‚è€ƒ</h3> <p><a href="https://juejin.im/post/5d754dbde51d4561cd2466bf" target="_blank" rel="noopener noreferrer">å®æ“hooks, çœ‹å®Œè¿™ç¯‡ï¼Œä½ ä¹Ÿèƒ½æŠŠ React Hooks ç©å‡ºèŠ±<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">æœ€åæ›´æ–°æ—¶é—´:</span> <span class="time">12/4/2019, 12:43:57 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      â†
      <a href="/FAQ/React/react-redux-middleware.html" class="prev">
        ğŸç®€æ˜“ä¸­é—´ä»¶
      </a></span> <span class="next"><a href="/FAQ/Vue/Cli.html">
        ğŸ”¨èŠ±é‡Œèƒ¡å“¨çš„cli
      </a>
      â†’
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.903983bb.js" defer></script><script src="/assets/js/2.c5c844f9.js" defer></script><script src="/assets/js/4.29bcc168.js" defer></script><script src="/assets/js/10.acc61093.js" defer></script>
  </body>
</html>
