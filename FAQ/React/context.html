<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>æµ…æä¸Šä¸‹æ–‡context | å®ˆå¤œäººç¬”è®°</title>
    <meta name="description" content="å®ˆå¤œäººç¬”è®°">
    <meta name="generator" content="VuePress 1.3.1">
    <link rel="icon" href="/img/favicon.ico">
  <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    
    <link rel="preload" href="/assets/css/0.styles.f09e5b7a.css" as="style"><link rel="preload" href="/assets/js/app.903983bb.js" as="script"><link rel="preload" href="/assets/js/2.c5c844f9.js" as="script"><link rel="preload" href="/assets/js/17.8684da05.js" as="script"><link rel="preload" href="/assets/js/10.acc61093.js" as="script"><link rel="prefetch" href="/assets/js/11.b5b7d313.js"><link rel="prefetch" href="/assets/js/12.044e77b3.js"><link rel="prefetch" href="/assets/js/13.f84ff47d.js"><link rel="prefetch" href="/assets/js/14.4f25373e.js"><link rel="prefetch" href="/assets/js/15.69ad7253.js"><link rel="prefetch" href="/assets/js/16.ac264240.js"><link rel="prefetch" href="/assets/js/18.ceef7e7d.js"><link rel="prefetch" href="/assets/js/19.fdccf963.js"><link rel="prefetch" href="/assets/js/20.eea2ef94.js"><link rel="prefetch" href="/assets/js/21.436a904b.js"><link rel="prefetch" href="/assets/js/22.5b0e4632.js"><link rel="prefetch" href="/assets/js/23.456132eb.js"><link rel="prefetch" href="/assets/js/24.0c9dfbdb.js"><link rel="prefetch" href="/assets/js/25.1e46f166.js"><link rel="prefetch" href="/assets/js/26.bc6d72fe.js"><link rel="prefetch" href="/assets/js/27.699fbdd0.js"><link rel="prefetch" href="/assets/js/28.b4423e59.js"><link rel="prefetch" href="/assets/js/3.b94df1a7.js"><link rel="prefetch" href="/assets/js/4.29bcc168.js"><link rel="prefetch" href="/assets/js/5.a332531e.js"><link rel="prefetch" href="/assets/js/6.a34f260f.js"><link rel="prefetch" href="/assets/js/7.b152462c.js"><link rel="prefetch" href="/assets/js/8.6811b85d.js"><link rel="prefetch" href="/assets/js/9.a9a41e29.js">
    <link rel="stylesheet" href="/assets/css/0.styles.f09e5b7a.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">å®ˆå¤œäººç¬”è®°</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  home
</a></div><div class="nav-item"><a href="/FAQ/" class="nav-link router-link-active">
  æ±‚ç´¢
</a></div><div class="nav-item"><a href="/Thought/" class="nav-link">
  éšç¬”
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="GitHub" class="dropdown-title"><span class="title">GitHub</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/StackFei" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHubé¦–é¡µ
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  home
</a></div><div class="nav-item"><a href="/FAQ/" class="nav-link router-link-active">
  æ±‚ç´¢
</a></div><div class="nav-item"><a href="/Thought/" class="nav-link">
  éšç¬”
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="GitHub" class="dropdown-title"><span class="title">GitHub</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/StackFei" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHubé¦–é¡µ
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/FAQ/" class="sidebar-link">ğŸ“šJSæ‰‹æ®‹</a></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>èŠ±é‡Œèƒ¡å“¨å¿…å¤‡ç‚¹</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/FAQ/ES/promise.html" class="sidebar-link">ğŸš—promise</a></li><li><a href="/FAQ/ES/react-window.html" class="sidebar-link">ğŸš•é•¿åˆ—è¡¨</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Reactä¸­çš„ä¸€äº›å°å¿ƒå¾—</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/FAQ/React/VirtualDom.html" class="sidebar-link">ğŸŒ°ç®€å•çš„è™šæ‹ŸDom</a></li><li><a href="/FAQ/React/react-router.html" class="sidebar-link">ğŸ‘router</a></li><li><a href="/FAQ/React/context.html" class="active sidebar-link">ğŸ‡ä¸Šä¸‹æ–‡</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/FAQ/React/context.html#ä½¿ç”¨åœºæ™¯" class="sidebar-link">ä½¿ç”¨åœºæ™¯</a></li><li class="sidebar-sub-header"><a href="/FAQ/React/context.html#ä½¿ç”¨æ–¹å¼" class="sidebar-link">ä½¿ç”¨æ–¹å¼</a></li><li class="sidebar-sub-header"><a href="/FAQ/React/context.html#å®ç°æ€è·¯" class="sidebar-link">å®ç°æ€è·¯</a></li></ul></li><li><a href="/FAQ/React/react-redux.html" class="sidebar-link">ğŸreduxçš„é€šè®¯æ–¹å¼</a></li><li><a href="/FAQ/React/react-redux-middleware.html" class="sidebar-link">ğŸç®€æ˜“ä¸­é—´ä»¶</a></li><li><a href="/FAQ/React/Hooks.html" class="sidebar-link">ğŸŠHooks</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Vueçš„ä¸€äº›å°ç¬”è®°</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/FAQ/Vue/Cli.html" class="sidebar-link">ğŸ”¨èŠ±é‡Œèƒ¡å“¨çš„cli</a></li><li><a href="/FAQ/Vue/observer.html" class="sidebar-link">ğŸ”§ä¹ä¸ç‰ˆæœ¬MvvM</a></li><li><a href="/FAQ/Vue/Communication.html" class="sidebar-link">ğŸ› ï¸è®°ä¸€æ¬¡é€šä¿¡æ–¹å¼</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>æ—¥å¸¸æ‚ç©</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/FAQ/Work/TSC.html" class="sidebar-link">ğŸ‹ï¸â€â™‚ï¸TypeScript</a></li><li><a href="/FAQ/Work/cicd.html" class="sidebar-link">ğŸš´æŒç»­é›†æˆéƒ¨ç½²ï¼ˆci/cdï¼‰</a></li><li><a href="/FAQ/Work/AOP.html" class="sidebar-link">ğŸŒï¸â€â™‚ï¸AOPé¢å‘åˆ‡ç‰‡ç¼–ç¨‹</a></li><li><a href="/FAQ/Work/WeChat.html" class="sidebar-link">â›¹ï¸è¸©å‘Reactç³»åˆ—å°ç¨‹åº</a></li><li><a href="/FAQ/Work/Work1.html" class="sidebar-link">ğŸ¤¾â€â™‚ï¸å‰ç«¯è¯·æ±‚çš„æ­£ç¡®æ‰“å¼€æ–¹å¼</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>ä¹±å†™ç³»åˆ—</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/FAQ/Node/require.html" class="sidebar-link">ğŸ€requireåŸºæ“</a></li><li><a href="/FAQ/Node/Koa.html" class="sidebar-link">âš½ï¸åˆçº§Koa</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><blockquote><p>ç®€è€Œè¨€ä¹‹ï¼Œæ‰§è¡Œä¸Šä¸‹æ–‡æ˜¯è¯„ä¼°å’Œæ‰§è¡Œ <code>JavaScript</code> ä»£ç çš„ç¯å¢ƒçš„æŠ½è±¡æ¦‚å¿µã€‚æ¯å½“ <code>Javascript</code> ä»£ç åœ¨è¿è¡Œçš„æ—¶å€™ï¼Œå®ƒéƒ½æ˜¯åœ¨æ‰§è¡Œä¸Šä¸‹æ–‡ä¸­è¿è¡Œã€‚è¯´äººè¯å°±æ˜¯åœ¨ä»£ç æ‰§è¡Œæ—¶, å¯ä»¥æ‹¿åˆ°è¿è¡Œä¹‹å‰å®šä¹‰çš„ç¯å¢ƒæŒ‡å‘.</p></blockquote> <h2 id="ä½¿ç”¨åœºæ™¯"><a href="#ä½¿ç”¨åœºæ™¯" class="header-anchor">#</a> ä½¿ç”¨åœºæ™¯</h2> <p>ç”±äºæœ¬æ–‡æ¶‰åŠåˆ°<code>react</code>ä¸Šä¸‹æ¦‚å¿µ, æ‰€ä»¥å…¨éƒ½ä»¥<code>react</code>çš„ç¯å¢ƒæ¥å¤„ç†äº‹ä»¶, åœ¨<code>redux</code> å…¨å±€çŠ¶æ€ç®¡ç†å™¨å™¨è¿˜æœªå¦‚æ—¥ä¸­å¤©æ—¶, è¦æƒ³è·å–åˆ°ä¸Šä¸‹æ–‡çš„å…¨å±€æ•°æ®, éƒ½å¾—é€šè¿‡åˆ›å»ºå…¨å±€ä¸Šä¸‹æ–‡æ¥äº’é€šæ•°æ®, å³<code>React.createContext</code> æ¥åˆ›å»ºä¸€ä¸ªå…¨å±€ä¸Šä¸‹æ–‡å®šä¹‰å¥½çŠ¶æ€, è®©å˜é‡å…¨éƒ½æ˜¯åŒä¸€ä¸ªæ‰§è¡Œç¯å¢ƒ, å°±ä¸å­˜åœ¨æ‰§è¡Œç¯èŠ‚ä¸Šä¸‹æ–‡æ¨¡ç³Šçš„æ¦‚å¿µ.</p> <h2 id="ä½¿ç”¨æ–¹å¼"><a href="#ä½¿ç”¨æ–¹å¼" class="header-anchor">#</a> ä½¿ç”¨æ–¹å¼</h2> <p><code>context</code>çš„ä½¿ç”¨æ–¹æ³•åœ¨<code>react</code>ä¸­æœ‰ä¸¤ç§å®ç°æ–¹å¼, ä¼ ç»Ÿçš„<code>class</code>ä½¿ç”¨æ–¹æ³•, ä»¥åŠç°åœ¨å¹¿æ³›çš„<code>function</code>ä½¿ç”¨æ–¹æ³•ç®€ç§°<code>hooks</code>, æ¥ä¸‹æ¥ä¸€ä¸€å±•ç¤ºä½¿ç”¨æ–¹å¼, <strong><code>context</code>å†…éƒ¨ä¼šæä¾›ä¸¤ä¸ªæ–¹æ³•<code>Provider</code>ç”Ÿäº§è€…,ä¹Ÿè¢«ç§°ä¸ºå•†åº—,<code>Consumer</code>æ¶ˆè´¹è€…, ç”¨æ¥åŒ…è£¹è¦ä½¿ç”¨çŠ¶æ€çš„ç»„ä»¶</strong>, ä½¿ç”¨æ–¹å¼ä¹Ÿç•¥æœ‰ä¸åŒ, å…ˆæ¥ä½¿ç”¨ä¸€ä¸‹, ç„¶åå°è¯•è¿˜åŸä¸€ä¸‹è¯¥æ–¹æ³•çš„å®ç°.</p> <table><thead><tr><th>åç§°</th> <th>ä½œç”¨</th> <th>è¯´æ˜</th></tr></thead> <tbody><tr><td><span class="badge tip" style="vertical-align:top;" data-v-26ebd6a3>Provider</span></td> <td>åˆ›å»ºä¸Šä¸‹æ–‡æ¶ˆè´¹çš„ä»“åº“</td> <td>ğŸš€</td></tr> <tr><td><span class="badge tip" style="vertical-align:top;" data-v-26ebd6a3>Consumer</span></td> <td>åŒ…è£¹ä¸Šä¸‹æ–‡æ¶ˆè´¹çš„å¯¹è±¡</td> <td>ğŸš€</td></tr></tbody></table> <h3 id="provider"><a href="#provider" class="header-anchor">#</a> Provider  <span class="badge tip" style="vertical-align:top;" data-v-26ebd6a3>ä»“åº“</span></h3> <p>ç»Ÿä¸€çš„å•†åº—ä»“åº“, æ— è®ºå“ªä¸€ç§ä½¿ç”¨æ–¹æ³•, ä»“åº“éƒ½æ˜¯ä¸€è‡´çš„ ğŸš€ å°±æ˜¯<code>react</code>è‡ªå¸¦çš„<code>context</code>å¯¹è±¡,</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> MyContext <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">createContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  ğŸš€
<span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
    state <span class="token operator">=</span> <span class="token punctuation">{</span> color<span class="token operator">:</span> <span class="token string">'red'</span> <span class="token punctuation">}</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token function-variable function">handler</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">color</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> color <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> colorContext <span class="token operator">=</span> <span class="token punctuation">{</span> color<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>color<span class="token punctuation">,</span> handler<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>handler <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token operator">&lt;</span>MyContext<span class="token punctuation">.</span>Provider value<span class="token operator">=</span><span class="token punctuation">{</span>colorContext<span class="token punctuation">}</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>div style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> border<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">3px solid </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>color<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> padding<span class="token operator">:</span> <span class="token string">'5px'</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>Header <span class="token operator">/</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>Counter <span class="token operator">/</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>MyContext<span class="token punctuation">.</span>Provider<span class="token operator">&gt;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="consumer"><a href="#consumer" class="header-anchor">#</a> Consumer  <span class="badge tip" style="vertical-align:top;" data-v-26ebd6a3>æ¶ˆè´¹è€…</span></h3> <p>å°±ä¸‹æ¥ä¼šå±•ç¤º<code>class</code>,<code>function</code>ä¸¤ç§å®ç°æ–¹å¼, è¿™é‡Œä¸ä¼šè®²è¿°æ€ä¹ˆç”¨, è€Œæ˜¯æ ¹ç»ç”¨æ³•æ¥å‰–æå¦‚ä½•å®ç°.</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">Header</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
    <span class="token keyword">static</span> contextType <span class="token operator">=</span> MyContext
    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token operator">&lt;</span>div style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> border<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">3px solid </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>context<span class="token punctuation">.</span>color<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
            Header
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">Counter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
     <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token operator">&lt;</span>MyContext<span class="token punctuation">.</span>Consumer<span class="token operator">&gt;</span>
        <span class="token punctuation">{</span>
            <span class="token parameter">value</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
                <span class="token operator">&lt;</span>div style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> border<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">3px solid </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>value<span class="token punctuation">.</span>color<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
                    Counter
                    <span class="token operator">&lt;</span>CounterChild <span class="token operator">/</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
            <span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>MyContext<span class="token punctuation">.</span>Consumer<span class="token operator">&gt;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="å®ç°æ€è·¯"><a href="#å®ç°æ€è·¯" class="header-anchor">#</a> å®ç°æ€è·¯  <span class="badge tip" style="vertical-align:top;" data-v-26ebd6a3>bate</span></h2> <p>æ¸…æ™°æ˜äº†, <code>context</code>å°±æ˜¯ä¸€ä¸ªæ–¹æ³•, ç„¶åæœ‰ä¸¤ä¸ªå†…éƒ¨å‡½æ•°<code>Provider</code>,<code>Consumer</code>, å¹¶ä¸”<code>Consumer</code>æ˜¯å¯ä»¥ä½¿ç”¨<code>Provider</code>ä¼ å…¥çš„å˜é‡, ä¹Ÿä¸æ˜¯å¾ˆéš¾. å…ˆè¯•ä¸€è¯•bateç‰ˆæœ¬çš„, ç”±äº<code>class</code> æ˜¯ä½¿ç”¨<code>contextType</code>æ¥è·å–é™æ€å±æ€§æ–¹æ³•çš„, è¿™ä¸ªæ”¾åœ¨åé¢, å…ˆæ¥å®ç°ä¸€ä¸‹<code>function</code>ç‰ˆæœ¬çš„ç¼–è¯‘.</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">createContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">class</span> <span class="token class-name">Provider</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span><span class="token punctuation">{</span>
        <span class="token keyword">static</span> value<span class="token punctuation">;</span>
        <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span>
            Provider<span class="token punctuation">.</span>value <span class="token operator">=</span> props<span class="token punctuation">.</span>value
        <span class="token punctuation">}</span>
        <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>children
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">class</span> <span class="token class-name">Consumer</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span><span class="token punctuation">{</span>
        <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span><span class="token function">children</span><span class="token punctuation">(</span>Provider<span class="token punctuation">.</span>value<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
        provider<span class="token punctuation">,</span>
        Consumer
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>è¿˜æ˜¯æ¯”è¾ƒå®¹æ˜“ç†è§£çš„, åœ¨<code>Provider</code>çš„é™æ€å±æ€§å®šä¹‰ä¸€ä¸ª<code>value</code>æ¥æ”¶ä¼ å…¥çš„<code>value</code>è¦†ç›–, åœ¨ç•™ç»™<code>Consumer</code>æ¥æ‰§è¡Œæ¶ˆè´¹å¹¶ä¸”ä¼ å…¥, ä¸€æ°”å‘µæˆ, <strong>åªèƒ½ç¼–è¯‘å‡½æ•°ç±»å‹ä¸èƒ½ç¼–è¯‘ç±»ç±»å‹</strong>, åŸºæœ¬ä¸Šç®—æ˜¯èƒ½æ¸²æŸ“äº†, ä½†æ˜¯ä¸€åˆ°ä¿®æ”¹å±æ€§å°±åˆä¸è¡Œäº†, åªèƒ½ç¬¬ä¸€æ¬¡ä¿®æ”¹, åç»­çš„ä¿®æ”¹å…¨éƒ½æ— æ•ˆ.</p> <ul><li><strong>å…¶ä¸»è¦åŸå› è¿˜æ˜¯åœ¨äºæˆ‘ä»¬ä¿®æ”¹äº†å±æ€§å´æ²¡æœ‰ç»™å±æ€§é‡æ–°èµ‹å€¼</strong></li></ul> <p>åœ¨æ­¤ä¹‹å‰, æˆ‘ä»¬éœ€è¦ç”¨åˆ°æ–°çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°<code>getDerivedStateFromProps</code>, ç®€å•ä»‹ç»ä¸€ä¸‹, ä»–æ˜¯ä»‹äºæ›´æ–°ä¹‹å‰çš„é’©å­å‡½æ•°, æ¥å—ä¸¤ä¸ªå‚æ•°<code>nextProps</code>,<code>prevState</code>ä¸¤ä¸ªå‚æ•°, åˆ†åˆ«ä»£è¡¨ä¸‹ä¸€ä¸ªå±æ€§, ä»¥åŠä¸Šä¸€ä¸ªçŠ¶æ€, ä¸”è¿”å›å€¼å¯ä»¥ä½œä¸ºä¸‹ä¸€æ¬¡çš„çŠ¶æ€, åˆšå¥½å¯ä»¥å°†å…¶çš„çŠ¶æ€ç›‘å¬èµ‹å€¼ç»™ä¸‹ä¸€ä¸ªçŠ¶æ€. ç¨ä½œä¿®æ”¹, åªéœ€åŠ å…¥ä¸€ä¸ªé™æ€æ–¹æ³•</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">static</span> <span class="token function">getDerivedStateFromProps</span><span class="token punctuation">(</span><span class="token parameter">nextProps<span class="token punctuation">,</span> prevState</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    Provider<span class="token punctuation">.</span>value <span class="token operator">=</span> nextProps<span class="token punctuation">.</span>value
    <span class="token keyword">return</span> <span class="token punctuation">{</span> value<span class="token operator">:</span> nextProps<span class="token punctuation">.</span>value <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>è‡³æ­¤, <code>context</code>åŸºæœ¬ä¸Šå·²ç»å®ç°å®Œæˆäº†, æœ¬èº«å…¶å†…éƒ¨ä¹Ÿæ²¡æœ‰ä»€ä¹ˆå¤æ‚çš„ç»“æ„, å°±æ˜¯èµ·åˆ°ä¸€ä¸ªè¿æ¥çš„ä½œç”¨, ç”±äº<code>contextType</code>å…³é”®å­—çš„åŸå› , æ— æ³•ç›´æ¥æ¨¡æ‹Ÿå‡ºé™æ€æ–¹æ³•, æ‰€ä»¥åœ¨ç±»ä¸­åªèƒ½é€šè¿‡è¯¥ä¸‹æ–¹æ³•æ¥å–å€¼.</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">HeaderChild</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
    <span class="token keyword">static</span> contextType <span class="token operator">=</span> ColorContext<span class="token punctuation">;</span>
    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>
            <span class="token operator">&lt;</span>div style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> border<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">3px solid </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>HeaderChild<span class="token punctuation">.</span>contextType<span class="token punctuation">.</span>Provider<span class="token punctuation">.</span>value<span class="token punctuation">.</span>color<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
                HeaderChild
            <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>åœ°å€ï¼š<a href="https://github.com/StackFei/ReactFAQ" target="_blank" rel="noopener noreferrer">https://github.com/StackFei/ReactFAQ<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></strong></p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">æœ€åæ›´æ–°æ—¶é—´:</span> <span class="time">12/10/2019, 11:36:32 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      â†
      <a href="/FAQ/React/react-router.html" class="prev">
        ğŸ‘router
      </a></span> <span class="next"><a href="/FAQ/React/react-redux.html">
        ğŸreduxçš„é€šè®¯æ–¹å¼
      </a>
      â†’
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.903983bb.js" defer></script><script src="/assets/js/2.c5c844f9.js" defer></script><script src="/assets/js/17.8684da05.js" defer></script><script src="/assets/js/10.acc61093.js" defer></script>
  </body>
</html>
