<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>æœ€ç®€å•çš„reactç³»åˆ—ç»„ä»¶react-router | å®ˆå¤œäººç¬”è®°</title>
    <meta name="description" content="å®ˆå¤œäººç¬”è®°">
    <meta name="generator" content="VuePress 1.3.1">
    <link rel="icon" href="/img/favicon.ico">
  <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    
    <link rel="preload" href="/assets/css/0.styles.f09e5b7a.css" as="style"><link rel="preload" href="/assets/js/app.903983bb.js" as="script"><link rel="preload" href="/assets/js/2.c5c844f9.js" as="script"><link rel="preload" href="/assets/js/20.eea2ef94.js" as="script"><link rel="preload" href="/assets/js/10.acc61093.js" as="script"><link rel="prefetch" href="/assets/js/11.b5b7d313.js"><link rel="prefetch" href="/assets/js/12.044e77b3.js"><link rel="prefetch" href="/assets/js/13.f84ff47d.js"><link rel="prefetch" href="/assets/js/14.4f25373e.js"><link rel="prefetch" href="/assets/js/15.69ad7253.js"><link rel="prefetch" href="/assets/js/16.ac264240.js"><link rel="prefetch" href="/assets/js/17.8684da05.js"><link rel="prefetch" href="/assets/js/18.ceef7e7d.js"><link rel="prefetch" href="/assets/js/19.fdccf963.js"><link rel="prefetch" href="/assets/js/21.436a904b.js"><link rel="prefetch" href="/assets/js/22.5b0e4632.js"><link rel="prefetch" href="/assets/js/23.456132eb.js"><link rel="prefetch" href="/assets/js/24.0c9dfbdb.js"><link rel="prefetch" href="/assets/js/25.1e46f166.js"><link rel="prefetch" href="/assets/js/26.bc6d72fe.js"><link rel="prefetch" href="/assets/js/27.699fbdd0.js"><link rel="prefetch" href="/assets/js/28.b4423e59.js"><link rel="prefetch" href="/assets/js/3.b94df1a7.js"><link rel="prefetch" href="/assets/js/4.29bcc168.js"><link rel="prefetch" href="/assets/js/5.a332531e.js"><link rel="prefetch" href="/assets/js/6.a34f260f.js"><link rel="prefetch" href="/assets/js/7.b152462c.js"><link rel="prefetch" href="/assets/js/8.6811b85d.js"><link rel="prefetch" href="/assets/js/9.a9a41e29.js">
    <link rel="stylesheet" href="/assets/css/0.styles.f09e5b7a.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">å®ˆå¤œäººç¬”è®°</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  home
</a></div><div class="nav-item"><a href="/FAQ/" class="nav-link router-link-active">
  æ±‚ç´¢
</a></div><div class="nav-item"><a href="/Thought/" class="nav-link">
  éšç¬”
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="GitHub" class="dropdown-title"><span class="title">GitHub</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/StackFei" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHubé¦–é¡µ
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  home
</a></div><div class="nav-item"><a href="/FAQ/" class="nav-link router-link-active">
  æ±‚ç´¢
</a></div><div class="nav-item"><a href="/Thought/" class="nav-link">
  éšç¬”
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="GitHub" class="dropdown-title"><span class="title">GitHub</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/StackFei" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHubé¦–é¡µ
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/FAQ/" class="sidebar-link">ğŸ“šJSæ‰‹æ®‹</a></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>èŠ±é‡Œèƒ¡å“¨å¿…å¤‡ç‚¹</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/FAQ/ES/promise.html" class="sidebar-link">ğŸš—promise</a></li><li><a href="/FAQ/ES/react-window.html" class="sidebar-link">ğŸš•é•¿åˆ—è¡¨</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Reactä¸­çš„ä¸€äº›å°å¿ƒå¾—</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/FAQ/React/VirtualDom.html" class="sidebar-link">ğŸŒ°ç®€å•çš„è™šæ‹ŸDom</a></li><li><a href="/FAQ/React/react-router.html" class="active sidebar-link">ğŸ‘router</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/FAQ/React/react-router.html#è·¯ç”±å†å²è§„èŒƒ" class="sidebar-link">è·¯ç”±å†å²è§„èŒƒ</a></li><li class="sidebar-sub-header"><a href="/FAQ/React/react-router.html#è¿˜åŸrouterç»†èŠ‚" class="sidebar-link">è¿˜åŸrouterç»†èŠ‚</a></li></ul></li><li><a href="/FAQ/React/context.html" class="sidebar-link">ğŸ‡ä¸Šä¸‹æ–‡</a></li><li><a href="/FAQ/React/react-redux.html" class="sidebar-link">ğŸreduxçš„é€šè®¯æ–¹å¼</a></li><li><a href="/FAQ/React/react-redux-middleware.html" class="sidebar-link">ğŸç®€æ˜“ä¸­é—´ä»¶</a></li><li><a href="/FAQ/React/Hooks.html" class="sidebar-link">ğŸŠHooks</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Vueçš„ä¸€äº›å°ç¬”è®°</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/FAQ/Vue/Cli.html" class="sidebar-link">ğŸ”¨èŠ±é‡Œèƒ¡å“¨çš„cli</a></li><li><a href="/FAQ/Vue/observer.html" class="sidebar-link">ğŸ”§ä¹ä¸ç‰ˆæœ¬MvvM</a></li><li><a href="/FAQ/Vue/Communication.html" class="sidebar-link">ğŸ› ï¸è®°ä¸€æ¬¡é€šä¿¡æ–¹å¼</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>æ—¥å¸¸æ‚ç©</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/FAQ/Work/TSC.html" class="sidebar-link">ğŸ‹ï¸â€â™‚ï¸TypeScript</a></li><li><a href="/FAQ/Work/cicd.html" class="sidebar-link">ğŸš´æŒç»­é›†æˆéƒ¨ç½²ï¼ˆci/cdï¼‰</a></li><li><a href="/FAQ/Work/AOP.html" class="sidebar-link">ğŸŒï¸â€â™‚ï¸AOPé¢å‘åˆ‡ç‰‡ç¼–ç¨‹</a></li><li><a href="/FAQ/Work/WeChat.html" class="sidebar-link">â›¹ï¸è¸©å‘Reactç³»åˆ—å°ç¨‹åº</a></li><li><a href="/FAQ/Work/Work1.html" class="sidebar-link">ğŸ¤¾â€â™‚ï¸å‰ç«¯è¯·æ±‚çš„æ­£ç¡®æ‰“å¼€æ–¹å¼</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>ä¹±å†™ç³»åˆ—</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/FAQ/Node/require.html" class="sidebar-link">ğŸ€requireåŸºæ“</a></li><li><a href="/FAQ/Node/Koa.html" class="sidebar-link">âš½ï¸åˆçº§Koa</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><blockquote><p>æ—¥å¸¸è®°ç¬”è®°, ä¸è¿‡è¿™ä¸€èŠ‚åˆ°æ˜¯æ²¡ä»€ä¹ˆéš¾ç‚¹, æ¯”è¾ƒä»»ä½•æ¡†æ¶, åº“æœ€ç®€å•çš„è«è¿‡äºè·¯ç”±è·³è½¬, å°¤å…¶<code>SPA</code>, å¤§å¤šéƒ½æ˜¯æ¨¡ä»¿æµè§ˆå™¨åŸç”ŸAPIå¥—å£³å®ç°, è¿™ä¸€èŠ‚å¯ä»¥è¯´æ˜¯æœ€ç®€å•çš„<code>react</code>ç³»åˆ—</p></blockquote> <h2 id="è·¯ç”±å†å²è§„èŒƒ"><a href="#è·¯ç”±å†å²è§„èŒƒ" class="header-anchor">#</a> è·¯ç”±å†å²è§„èŒƒ</h2> <p>åœ¨å†™ä¹‹å‰æœ‰å¿…è¦å…ˆäº†è§£ä¸€ä¸‹è·¯ç”±çš„å†å²,å‰ç«¯å…¶å®åœ¨ä»¥å¾€æ˜¯æ²¡æœ‰è·¯ç”±è·³è½¬çš„è§„èŒƒçš„, åœ¨è¿˜æ²¡æœ‰å‰ç«¯çš„æ—¶å€™, è·³è½¬éƒ½æ˜¯é€šè¿‡åç«¯æ¥æ§åˆ¶, å’Œç°åœ¨çš„æœåŠ¡å™¨æ¸²æŸ“æ²¡å¤šå¤§å·®åˆ«, ä½†æ˜¯ç”¨æˆ·ä½“éªŒä¸å¤ªå¥½, æ²¡åˆ‡æ¢ä¸€ä¸ªé¡µé¢éƒ½éœ€è¦é‡æ–°è¯·æ±‚æœåŠ¡å™¨, æœåŠ¡å™¨ä¼šæ¶ˆè€—ä¸å¿…è¦çš„èµ„æº, ç”±æ­¤ä¾¿å¼€å¯äº†å¤§å‰ç«¯æ—¶ä»£, ä¸»è¦æ˜¯é€šè¿‡æµè§ˆå™¨æ¥æ§åˆ¶, åˆ†ä¸ºä¸¤ç§æ¨¡å¼, <code>hash</code>,<code>history</code></p> <h3 id="hash"><a href="#hash" class="header-anchor">#</a> hash</h3> <p><code>hash</code>è·¯ç”±, é¡¾åæ€ä¹‰, å°±åœ¨æ˜¯æµè§ˆå™¨åœ°å€åè·Ÿä¸Šhashå€¼<code>#/</code>, éœ€è¦æ³¨æ„çš„æ˜¯, è¯¥æ–¹æ³•ä¸æ˜¯æµè§ˆå™¨çš„è§„èŒƒæ³•åˆ™, äºæ˜¯ä¹å…¼å®¹æ€§å¥½åˆ°çˆ†, æ‰€æœ‰æ¡†æ¶åŸºæœ¬ä¸Šåˆå§‹éƒ½æ˜¯<code>hash</code>æ¨¡å¼, ä½†æ˜¯è«ååœ¨åé¢æ‹¼ä¸Š<code>#</code>, ç¼ºç‚¹å°±æ˜¯ä¸å¥½çœ‹, è¿™å®¶ä¼™
é•¿è¿™æ ·<code>host/index.html#/xxx</code>.å…ˆæ¥å°è¯•ä¸€ä¸‹</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>#/A<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>A<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>#/b<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>B<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>ç”¨æ³•åˆ°æ˜¯ä¸æ˜¯å¾ˆé‚£, å°±æ˜¯åœ¨æŒ‘è½¬è·¯å¾„ä¹‹å‰æ‹¼æ¥ä¸Š<code>#</code>, è¿™ç§äº‹æ— æ„Ÿåˆ·æ–°çš„, é¡µé¢ä¸ä¼šåˆ·æ–°, ä½†æ˜¯æµè§ˆå™¨ä¼šè®°å½•ä½ çš„æ“ä½œè®°å½•, æˆ‘ä»¬æ¥å°è¯•ä¸€ä¸‹æ¨¡ä»¿è¯¥æ“ä½œ.</p> <ul><li><strong>æ¨¡ä»¿<code>hash</code></strong></li></ul> <p>ç”±äºé»˜è®¤å¯èƒ½å›äº‹æ ¹è·¯å¾„, æˆ–è€…å¯èƒ½æ˜¯å…¶ä»–è·¯å¾„, æ‰€æœ‰éœ€è¦é»˜è®¤ç»™ä»–åŠ ä¸Šä¸€ä¸ª, åªéœ€è¦åœ¨ç›‘å¬è·¯ç”±ä¸­åšä½ æƒ³åšçš„æ“ä½œå³å¯.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
    window<span class="token punctuation">.</span>location<span class="token punctuation">.</span>href <span class="token operator">=</span> window<span class="token punctuation">.</span>location<span class="token punctuation">.</span>href<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token string">'/'</span>
    window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'hashchange'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        <span class="token operator">...</span><span class="token punctuation">.</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre></div><h3 id="history"><a href="#history" class="header-anchor">#</a> history</h3> <p><code>history</code> ä¸€å¬å°±è·Ÿä¸“ä¸šçš„æ ·å­, å­—é¢æ„æ€å°±æ˜¯å†å²è®°å½•çš„æ„æ€, è¿™æ˜¯æµè§ˆå™¨æä¾›çš„<code>Api</code>, æ‰€ä»¥å¯ä»¥ç›´æ¥ä½¿ç”¨, å¹¶ä¸”ä¹Ÿä¸ä¼šåœ¨åœ°å€æ·»åŠ ä¸€äº›å…¶ä»–ä¸œè¥¿, <code>history</code>é»˜è®¤æš´éœ²ä¸€ä¸ªè°ƒç”¨å±æ€§<code>pushState</code>, ç”¨äºå‘å‚¨å­˜ç«™ä¸­æ·»åŠ ä¸´æ—¶è·¯å¾„, ç¼ºç‚¹ä¹Ÿå¾ˆæ˜æ˜¾, é¦–å…ˆæµè§ˆå™¨æ— æ³•ç›‘å¬æ‰‹åŠ¨å‰è¿›åé€€å…¶æ¬¡ï¼Œ ä¸€åˆ·æ–°å°±å´©äº†, å…¶åŸå› éƒ½æ˜¯å› ä¸ºå­˜å‚¨çš„æ˜¯ä¸´æ—¶åœ°å€è·¯å¾„, å…ˆæ¥çœ‹çœ‹ä½¿ç”¨</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span><span class="token punctuation">&gt;</span></span>A<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span><span class="token punctuation">&gt;</span></span>B<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    window<span class="token punctuation">.</span>history<span class="token punctuation">.</span><span class="token function">pushState</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>é¦–å…ˆç¡®è®¤<code>pushState</code>çš„å‚æ•°æ˜¯ä¸€ä¸ª<code>options</code>, ç¬¬ä¸€ä¸ªæ˜¯<code>data</code>ç±»å‹, ç¬¬äºŒä¸ª<code>title</code>æ˜¯è¯¥è·¯å¾„çš„æ ‡é¢˜, ç¬¬ä¸‰ä¸ª<code>url</code>æ‰æ˜¯è·¯å¾„, å…¶å®å‰ä¸¤ä¸ªåŸºæœ¬ä¸Šæ²¡å•¥ç”¨, æ‰€ä»¥ç›´æ¥ä¼ å…¥è·¯å¾„å³å¯</p> <ul><li><strong>æ¨¡ä»¿<code>history</code></strong></li></ul> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">onClick</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>push('/A')<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>A<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">onClick</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>push('/B')<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>B<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token keyword">function</span> <span class="token function">push</span><span class="token punctuation">(</span><span class="token parameter">path</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        history<span class="token punctuation">.</span><span class="token function">pushState</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token keyword">null</span><span class="token punctuation">,</span>path<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>çœ‹ä¼¼å®Œç¾, ä»¥åŠèƒ½å¤Ÿè¾¾åˆ°æƒ³è¦çš„ç»“æœ, ä½†æ˜¯å®Œç¾å‰é¢æåˆ°è¿‡æµè§ˆå™¨å‰è¿›åé€€, ä¸è¯†åˆ«è¿™ä¸œè¥¿, æµè§ˆå™¨åˆæä¾›äº†ä¸“é—¨ç›‘å¬æ‰‹åŠ¨å‰è¿›åé€€çš„<code>Api</code>, å†æ¥è¯•è¯•</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token keyword">function</span> <span class="token function">push</span><span class="token punctuation">(</span><span class="token parameter">path</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        history<span class="token punctuation">.</span><span class="token function">pushState</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token keyword">null</span><span class="token punctuation">,</span>path<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'popstate'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        <span class="token operator">...</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>åˆ°æ­¤ä¸ºæ­¢, å‰ç«¯è·¯ç”±çš„æ–¹å¼åŸºæœ¬ä¸Šå°±æå®šäº†, ä¸»è¦æ˜¯è¦æœ‰è¿™ä¸¤ä¸ªæ¦‚å¿µ, æ‰å¥½åœ¨åé¢çš„<code>react-router</code>å®æ“</p> <h2 id="è¿˜åŸrouterç»†èŠ‚"><a href="#è¿˜åŸrouterç»†èŠ‚" class="header-anchor">#</a> è¿˜åŸrouterç»†èŠ‚</h2> <p>ç”±äºè·¯ç”±çš„ä¾‹å­è¿‡äºç‰¹æ®Š, æˆ‘ä»¬ç›´æ¥çœ‹å®Œæ•´çš„ä¾‹å­ä½¿ç”¨, ç„¶åå›è¿‡å¤´å†æ¥è¿˜åŸ,</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> HashRouter <span class="token keyword">as</span> Router<span class="token punctuation">,</span> route<span class="token punctuation">,</span> Link <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-router-dom'</span>
ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>Router<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&quot;/&quot;</span> exact<span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&quot;/user&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&quot;/profile&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>Route<span class="token operator">&gt;</span>
<span class="token punctuation">,</span>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><p>é»˜è®¤å¯ä»¥ä½¿ç”¨<code>HashRouter</code>, ä¹Ÿå¯ä»¥ä½¿ç”¨<code>HistoryRouter</code>, ç”¨æ³•å’Œ<code>react-redux</code>ç›¸ä¼¼, æœ€å¤–å±‚éœ€è¦åŒ…è£¹ä¸€ä¸ªç»„ä»¶ä¼ é€’ä¸Šä¸‹æ–‡, é‚£çœ‹æ¥å®ç°æ€è·¯ä¹Ÿæ˜¯å·®ä¸å¤š, æ³¨æ„<strong>å¦‚æœè¿™é‡Œä½¿ç”¨åˆ°äº†<code>react-redux</code>ä»–çš„ä¼˜å…ˆçº§æ˜¯æœ€å¤–å±‚æœ€é«˜çš„</strong>, ä¸‹é¢æˆ‘ä»¬æ¥å°è¯•ä¸€ä¸€è¿˜åŸ</p> <p>ä»¥ä¸‹å°±æ˜¯reactä¸­çš„routerä¸­å¸¦æœ‰çš„å±æ€§.</p> <table><thead><tr><th>åç§°</th> <th>ä½œç”¨</th> <th>è¯´æ˜</th></tr></thead> <tbody><tr><td><strong><span class="badge tip" style="vertical-align:top;" data-v-26ebd6a3>history</span></strong></td> <td>è·³è½¬å†å²è®°å½•</td> <td>ğŸš€</td></tr> <tr><td><strong><span class="badge tip" style="vertical-align:top;" data-v-26ebd6a3>location</span></strong></td> <td>è·¯å¾„ç›¸å…³çš„</td> <td>ğŸš€</td></tr> <tr><td><strong><span class="badge tip" style="vertical-align:top;" data-v-26ebd6a3>match</span></strong></td> <td>è·³è½¬æ­£ç¡®è·¯å¾„åçš„æ‰€æœ‰å‚æ•°</td> <td>ğŸš€</td></tr></tbody></table> <h3 id="hashrouter-router"><a href="#hashrouter-router" class="header-anchor">#</a> HashRouter/Router <span class="badge tip" style="vertical-align:top;" data-v-26ebd6a3>éœ€è¦æä¾›ä¸Šè¿°çš„ä¸‰ä¸ªå±æ€§</span></h3> <p>æ—¢ç„¶åˆ†æå’Œ<code>react-redux</code>çš„æ€è·¯ä¸€æ ·, ä¸€ä¸ªçˆ¶ç»„ä»¶æä¾›å±æ€§, å­ç»„ä»¶è·å–æ¶ˆè´¹, é‚£ä¹ˆæˆ‘ä»¬å°±å°è¯•ç”¨ç›¸åŒçš„æ€è·¯æ¥å®ç°, æ—¢ç„¶æ¶‰åŠåˆ°çŠ¶æ€å…±äº«å¿…ç„¶ä¼šä½¿ç”¨åˆ°ä¸Šä¸‹æ–‡<code>context</code>, å…ˆæ¥åˆ›å»ºä¸Šä¸‹æ–‡</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">default</span> React<span class="token punctuation">.</span><span class="token function">createContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><ul><li>åˆ›å»ºä¸Šä¸‹æ–‡, å¹¶ä¸”å°†ä¸Šä¸‹æ–‡æŠ›åˆ°ä¸‹çº§</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> MyContext <span class="token operator">=</span> <span class="token string">'./context'</span>
<span class="token keyword">class</span> <span class="token class-name">HashRouter</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span><span class="token punctuation">{</span>
    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">let</span> value <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token operator">&lt;</span>MyContext<span class="token punctuation">.</span>Provider value<span class="token operator">=</span><span class="token punctuation">{</span>value<span class="token punctuation">}</span><span class="token operator">&gt;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>children
        <span class="token operator">&lt;</span><span class="token operator">/</span>MyContext<span class="token punctuation">.</span>Provider<span class="token operator">&gt;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>åˆ›å»ºå±æ€§, å¼€å¯ç›‘æ§å±æ€§å€¼çš„å˜åŒ–, å¹¶ä¸”ä¼ åˆ°ä¸‹çº§</li></ul> <p>æˆ‘ä»¬éœ€è¦è‡ªå·±åˆ›å»ºä¸Šè¿°æåˆ°çš„å‡ ä¸ªå¯¹è±¡å±æ€§, å¹¶ä¸”åˆå§‹åŒ–çš„æ—¶å€™è¿˜éœ€è¦ç›‘å¬æµè§ˆå™¨çš„<code>hash</code>æ“ä½œ, å¯èƒ½è¿˜è¦å®¹é”™æ²¡æœ‰è·¯å¾„æˆ–è€…é‡å®šå‘åˆ°é¦–é¡µçš„è·¯å¾„, è€è§„çŸ©è·å–æµè§ˆå™¨é»˜è®¤è·¯å¾„æ¥æ“ä½œ.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Provider <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./context'</span>
<span class="token keyword">class</span> <span class="token class-name">HashRouter</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>
      location<span class="token operator">:</span> <span class="token punctuation">{</span>
        pathname<span class="token operator">:</span> window<span class="token punctuation">.</span>location<span class="token punctuation">.</span>hash<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token string">&quot;/&quot;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//é»˜è®¤hashæ²¡æœ‰å€¼ è·³è½¬åˆ° /</span>
    window<span class="token punctuation">.</span>location<span class="token punctuation">.</span>hash <span class="token operator">=</span> window<span class="token punctuation">.</span>location<span class="token punctuation">.</span>hash <span class="token operator">||</span> <span class="token string">&quot;/&quot;</span><span class="token punctuation">;</span>
    <span class="token comment">// ç›‘å¬hashå€¼å˜åŒ– é‡æ–°è®¾ç½®çŠ¶æ€</span>
    window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;hashchange&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        location<span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token comment">// å…ˆæŠŠåŸå§‹çš„å€¼ä¿å­˜ä¸€ä¸‹ é¿å…å­˜åœ¨å¤šå€¼çš„æƒ…å†µ</span>
          <span class="token operator">...</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>location<span class="token punctuation">,</span>
          pathname<span class="token operator">:</span> window<span class="token punctuation">.</span>location<span class="token punctuation">.</span>hash<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token string">&quot;/&quot;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> value <span class="token operator">=</span> <span class="token punctuation">{</span>
      location<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>location<span class="token punctuation">,</span>
      history<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token function">push</span><span class="token punctuation">(</span><span class="token parameter">to</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          window<span class="token punctuation">.</span>location<span class="token punctuation">.</span>hash <span class="token operator">=</span> to<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token operator">&lt;</span>Provider value<span class="token operator">=</span><span class="token punctuation">{</span>value<span class="token punctuation">}</span><span class="token operator">&gt;</span>
      <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>children<span class="token punctuation">}</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>Provider<span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="route"><a href="#route" class="header-anchor">#</a> Route <span class="badge tip" style="vertical-align:top;" data-v-26ebd6a3>è·å–è·¯å¾„æ¸²æŸ“ç»„ä»¶</span></h3> <p>å¼•ç”¨åˆ°äº†ä¸Šä¸‹æ–‡, é‚£å­ç»„ä»¶ä¾¿å¯ä»¥ç›´æ¥é€šè¿‡ä¸Šä¸‹æ–‡æ¶ˆè´¹, é€šè¿‡é™æ€æ–¹æ³•ç›´æ¥ç»‘å®š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> pathToRegExp <span class="token keyword">from</span> <span class="token string">'path-to-regexp'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Consumer <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./context'</span>
<span class="token keyword">class</span> <span class="token class-name">Route</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token operator">&lt;</span>Consumer<span class="token operator">&gt;</span>
      <span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>state<span class="token punctuation">)</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">)</span>
        <span class="token comment">//path æ˜¯routeä¸­ä¼ é€’çš„</span>
        <span class="token keyword">let</span> <span class="token punctuation">{</span> path<span class="token punctuation">,</span> component<span class="token operator">:</span> Component<span class="token punctuation">,</span> exact <span class="token operator">=</span> <span class="token boolean">false</span> <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">;</span>
        <span class="token comment">//pathnameæ˜¯locationä¸­çš„</span>
        <span class="token keyword">let</span> pathname <span class="token operator">=</span> state<span class="token punctuation">.</span>location<span class="token punctuation">.</span>pathname
        <span class="token comment">// æ ¹æ®pathå®ç°ä¸€ä¸ªæ­£åˆ™ é€šè¿‡æ­£åˆ™åŒ¹é…</span>
        <span class="token keyword">let</span> keys <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">let</span> reg <span class="token operator">=</span> <span class="token function">pathToRegExp</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> keys<span class="token punctuation">,</span> <span class="token punctuation">{</span> end<span class="token operator">:</span> exact <span class="token punctuation">}</span><span class="token punctuation">)</span>
        keys <span class="token operator">=</span> keys<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> item<span class="token punctuation">.</span>name<span class="token punctuation">)</span> <span class="token comment">//æ¨¡ç³ŠåŒ¹é…çš„å‚æ•° [id]</span>
        <span class="token keyword">let</span> result <span class="token operator">=</span> pathname<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span>reg<span class="token punctuation">)</span>
        <span class="token keyword">let</span> <span class="token punctuation">[</span>url<span class="token punctuation">,</span> <span class="token operator">...</span>values<span class="token punctuation">]</span> <span class="token operator">=</span> result <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment">// [1,2 ]</span>
        <span class="token keyword">let</span> props <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token comment">//propsä¼ é€’åˆ°å­å…ƒç´ ä¸­ä½¿ç”¨</span>
          location<span class="token operator">:</span> state<span class="token punctuation">.</span>location<span class="token punctuation">,</span>
          history<span class="token operator">:</span> state<span class="token punctuation">.</span>history<span class="token punctuation">,</span>
          match<span class="token operator">:</span> <span class="token punctuation">{</span>
            params<span class="token operator">:</span> keys<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">obj<span class="token punctuation">,</span> current<span class="token punctuation">,</span> idx</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
              obj<span class="token punctuation">[</span>current<span class="token punctuation">]</span> <span class="token operator">=</span> values<span class="token punctuation">[</span>idx<span class="token punctuation">]</span><span class="token punctuation">;</span>
              <span class="token keyword">return</span> obj<span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> <span class="token operator">&lt;</span>Component <span class="token punctuation">{</span><span class="token operator">...</span>props<span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>Component<span class="token operator">&gt;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token keyword">null</span>
      <span class="token punctuation">}</span><span class="token punctuation">}</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>Consumer<span class="token operator">&gt;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="link"><a href="#link" class="header-anchor">#</a> Link <span class="badge tip" style="vertical-align:top;" data-v-26ebd6a3>æ¸²æŸ“ç»„ä»¶</span></h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Consumer <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./context'</span>
<span class="token keyword">class</span> <span class="token class-name">Link</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token operator">&lt;</span>Consumer<span class="token operator">&gt;</span>
            <span class="token punctuation">{</span><span class="token parameter">state</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> <span class="token operator">&lt;</span>a onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                    state<span class="token punctuation">.</span>history<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>to<span class="token punctuation">)</span>
                <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>children<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">&gt;</span>
            <span class="token punctuation">}</span><span class="token punctuation">}</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>Consumer<span class="token operator">&gt;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="switch"><a href="#switch" class="header-anchor">#</a> Switch <span class="badge tip" style="vertical-align:top;" data-v-26ebd6a3>æ‹¦æˆªé‡å¤æŸ¥æ‰¾è·¯å¾„ç»„ä»¶</span></h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> pathToRegExp <span class="token keyword">from</span> <span class="token string">'path-to-regexp'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Consumer <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./context'</span>
<span class="token keyword">class</span> <span class="token class-name">Switch</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token operator">&lt;</span>Consumer<span class="token operator">&gt;</span>
            <span class="token punctuation">{</span><span class="token parameter">state</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                <span class="token keyword">let</span> pathname <span class="token operator">=</span> state<span class="token punctuation">.</span>location<span class="token punctuation">.</span>pathname<span class="token punctuation">;</span>
                <span class="token keyword">let</span> children <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>children<span class="token punctuation">;</span>
                <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> children<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">let</span> child <span class="token operator">=</span> children<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
                    <span class="token comment">//Redirect å¯èƒ½æ²¡æœ‰pathå±æ€§      </span>
                    <span class="token keyword">let</span> path <span class="token operator">=</span> child<span class="token punctuation">.</span>props<span class="token punctuation">.</span>path <span class="token operator">||</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
                    <span class="token keyword">let</span> reg <span class="token operator">=</span> <span class="token function">pathToRegExp</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> end<span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
                    <span class="token comment">//SwitchåŒ¹é…æˆåŠŸ  </span>
                    <span class="token keyword">if</span> <span class="token punctuation">(</span>reg<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>pathname<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        <span class="token keyword">return</span> child <span class="token comment">//æŠŠåŒ¹é…åˆ°çš„ç»„ä»¶è¿”å›å³å¯</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span>
                <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">}</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>Consumer<span class="token operator">&gt;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="redirect"><a href="#redirect" class="header-anchor">#</a> Redirect <span class="badge tip" style="vertical-align:top;" data-v-26ebd6a3>é‡å®šå‘æ¸²æŸ“ç»„ä»¶</span></h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Consumer <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./context'</span>
<span class="token keyword">class</span> <span class="token class-name">Redirect</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token operator">&lt;</span>Consumer<span class="token operator">&gt;</span>
            <span class="token punctuation">{</span><span class="token parameter">state</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                <span class="token comment">//é‡å®šå‘å°±æ˜¯åŒ¹é…ä¸åˆ°åç›´æ¥è·³è½¬åˆ°redirectä¸­çš„toçš„è·¯å¾„çš„</span>
                state<span class="token punctuation">.</span>history<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>to<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">return</span> <span class="token keyword">null</span>
            <span class="token punctuation">}</span><span class="token punctuation">}</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>Consumer<span class="token operator">&gt;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ç”±äºæ˜¯è·³è½¬å¹…åº¦æ¯”è¾ƒå¤§, æš‚æ—¶æ²¡æ‰¾åˆ°åŠæ³•ä¸²èµ·æ¥å†™å‡ºæ¥, æ‰€ä»¥å°±å°†æºç å…¨éƒ½è´´å‡ºæ¥.</p> <p><strong>åœ°å€ï¼š<a href="https://github.com/StackFei/ReactRouter" target="_blank" rel="noopener noreferrer">https://github.com/StackFei/ReactRouter<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></strong></p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">æœ€åæ›´æ–°æ—¶é—´:</span> <span class="time">12/4/2019, 12:43:57 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      â†
      <a href="/FAQ/React/VirtualDom.html" class="prev">
        ğŸŒ°ç®€å•çš„è™šæ‹ŸDom
      </a></span> <span class="next"><a href="/FAQ/React/context.html">
        ğŸ‡ä¸Šä¸‹æ–‡
      </a>
      â†’
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.903983bb.js" defer></script><script src="/assets/js/2.c5c844f9.js" defer></script><script src="/assets/js/20.eea2ef94.js" defer></script><script src="/assets/js/10.acc61093.js" defer></script>
  </body>
</html>
