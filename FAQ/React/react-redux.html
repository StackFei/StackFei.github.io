<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>ç®€å•ç†è§£react-reduxå…¨å®¶æ¡¶ | å®ˆå¤œäººç¬”è®°</title>
    <meta name="description" content="å®ˆå¤œäººç¬”è®°">
    <meta name="generator" content="VuePress 1.3.1">
    <link rel="icon" href="/img/favicon.ico">
  <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    
    <link rel="preload" href="/assets/css/0.styles.f09e5b7a.css" as="style"><link rel="preload" href="/assets/js/app.903983bb.js" as="script"><link rel="preload" href="/assets/js/2.c5c844f9.js" as="script"><link rel="preload" href="/assets/js/19.fdccf963.js" as="script"><link rel="preload" href="/assets/js/10.acc61093.js" as="script"><link rel="prefetch" href="/assets/js/11.b5b7d313.js"><link rel="prefetch" href="/assets/js/12.044e77b3.js"><link rel="prefetch" href="/assets/js/13.f84ff47d.js"><link rel="prefetch" href="/assets/js/14.4f25373e.js"><link rel="prefetch" href="/assets/js/15.69ad7253.js"><link rel="prefetch" href="/assets/js/16.ac264240.js"><link rel="prefetch" href="/assets/js/17.8684da05.js"><link rel="prefetch" href="/assets/js/18.ceef7e7d.js"><link rel="prefetch" href="/assets/js/20.eea2ef94.js"><link rel="prefetch" href="/assets/js/21.436a904b.js"><link rel="prefetch" href="/assets/js/22.5b0e4632.js"><link rel="prefetch" href="/assets/js/23.456132eb.js"><link rel="prefetch" href="/assets/js/24.0c9dfbdb.js"><link rel="prefetch" href="/assets/js/25.1e46f166.js"><link rel="prefetch" href="/assets/js/26.bc6d72fe.js"><link rel="prefetch" href="/assets/js/27.699fbdd0.js"><link rel="prefetch" href="/assets/js/28.b4423e59.js"><link rel="prefetch" href="/assets/js/3.b94df1a7.js"><link rel="prefetch" href="/assets/js/4.29bcc168.js"><link rel="prefetch" href="/assets/js/5.a332531e.js"><link rel="prefetch" href="/assets/js/6.a34f260f.js"><link rel="prefetch" href="/assets/js/7.b152462c.js"><link rel="prefetch" href="/assets/js/8.6811b85d.js"><link rel="prefetch" href="/assets/js/9.a9a41e29.js">
    <link rel="stylesheet" href="/assets/css/0.styles.f09e5b7a.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">å®ˆå¤œäººç¬”è®°</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  home
</a></div><div class="nav-item"><a href="/FAQ/" class="nav-link router-link-active">
  æ±‚ç´¢
</a></div><div class="nav-item"><a href="/Thought/" class="nav-link">
  éšç¬”
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="GitHub" class="dropdown-title"><span class="title">GitHub</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/StackFei" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHubé¦–é¡µ
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  home
</a></div><div class="nav-item"><a href="/FAQ/" class="nav-link router-link-active">
  æ±‚ç´¢
</a></div><div class="nav-item"><a href="/Thought/" class="nav-link">
  éšç¬”
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="GitHub" class="dropdown-title"><span class="title">GitHub</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/StackFei" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHubé¦–é¡µ
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/FAQ/" class="sidebar-link">ğŸ“šJSæ‰‹æ®‹</a></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>èŠ±é‡Œèƒ¡å“¨å¿…å¤‡ç‚¹</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/FAQ/ES/promise.html" class="sidebar-link">ğŸš—promise</a></li><li><a href="/FAQ/ES/react-window.html" class="sidebar-link">ğŸš•é•¿åˆ—è¡¨</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Reactä¸­çš„ä¸€äº›å°å¿ƒå¾—</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/FAQ/React/VirtualDom.html" class="sidebar-link">ğŸŒ°ç®€å•çš„è™šæ‹ŸDom</a></li><li><a href="/FAQ/React/react-router.html" class="sidebar-link">ğŸ‘router</a></li><li><a href="/FAQ/React/context.html" class="sidebar-link">ğŸ‡ä¸Šä¸‹æ–‡</a></li><li><a href="/FAQ/React/react-redux.html" class="active sidebar-link">ğŸreduxçš„é€šè®¯æ–¹å¼</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/FAQ/React/react-redux.html#å‰è¨€" class="sidebar-link">å‰è¨€</a></li><li class="sidebar-sub-header"><a href="/FAQ/React/react-redux.html#redux" class="sidebar-link">redux</a></li><li class="sidebar-sub-header"><a href="/FAQ/React/react-redux.html#react-redux" class="sidebar-link">react-redux</a></li></ul></li><li><a href="/FAQ/React/react-redux-middleware.html" class="sidebar-link">ğŸç®€æ˜“ä¸­é—´ä»¶</a></li><li><a href="/FAQ/React/Hooks.html" class="sidebar-link">ğŸŠHooks</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Vueçš„ä¸€äº›å°ç¬”è®°</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/FAQ/Vue/Cli.html" class="sidebar-link">ğŸ”¨èŠ±é‡Œèƒ¡å“¨çš„cli</a></li><li><a href="/FAQ/Vue/observer.html" class="sidebar-link">ğŸ”§ä¹ä¸ç‰ˆæœ¬MvvM</a></li><li><a href="/FAQ/Vue/Communication.html" class="sidebar-link">ğŸ› ï¸è®°ä¸€æ¬¡é€šä¿¡æ–¹å¼</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>æ—¥å¸¸æ‚ç©</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/FAQ/Work/TSC.html" class="sidebar-link">ğŸ‹ï¸â€â™‚ï¸TypeScript</a></li><li><a href="/FAQ/Work/cicd.html" class="sidebar-link">ğŸš´æŒç»­é›†æˆéƒ¨ç½²ï¼ˆci/cdï¼‰</a></li><li><a href="/FAQ/Work/AOP.html" class="sidebar-link">ğŸŒï¸â€â™‚ï¸AOPé¢å‘åˆ‡ç‰‡ç¼–ç¨‹</a></li><li><a href="/FAQ/Work/WeChat.html" class="sidebar-link">â›¹ï¸è¸©å‘Reactç³»åˆ—å°ç¨‹åº</a></li><li><a href="/FAQ/Work/Work1.html" class="sidebar-link">ğŸ¤¾â€â™‚ï¸å‰ç«¯è¯·æ±‚çš„æ­£ç¡®æ‰“å¼€æ–¹å¼</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>ä¹±å†™ç³»åˆ—</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/FAQ/Node/require.html" class="sidebar-link">ğŸ€requireåŸºæ“</a></li><li><a href="/FAQ/Node/Koa.html" class="sidebar-link">âš½ï¸åˆçº§Koa</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><blockquote><p>æ ¹æ®è‡ªå·±çš„å­¦ä¹ ç†è§£æ¥å‰–æ<code>react</code>å…¨å®¶æ¡¶çš„ä½¿ç”¨ä»¥åŠå®ç°é“ç†</p></blockquote> <h2 id="å‰è¨€"><a href="#å‰è¨€" class="header-anchor">#</a> å‰è¨€</h2> <p>ä»¥ä¸‹æ–‡ç« æ˜¯å±äºèŒ¶åç”œç‚¹, å®Œå…¨å±äºè‡ªå·±å­¦ä¹ è·¯çº¿ä¸Šçš„äº§ç‰©, æ˜¯éœ€è¦æœ‰ä¸€å®šçš„ä½¿ç”¨åŸºç¡€, æœ¬æ–‡åˆ†ä¸ºä¸¤ä¸ªé˜¶æ®µ, <em><strong>æœªä½¿ç”¨<code>redux</code>çš„ä¸Šå¤æ—¶ä»£, æ¼”å˜åˆ°<code>redux</code> çš„ä½¿ç”¨ã€é«˜é˜¶ä½¿ç”¨ä»¥åŠå®ç°, <code>react-redux</code>çš„ä½¿ç”¨ä»¥åŠå®ç°</strong></em>. æœ¬æ–‡å°½é‡é€šè¿‡é€šä¿—æ˜“æ‡‚çš„ç™½è¯æ–‡æ¥å™è¿°, å°½é‡åšåˆ°ä¸æºç ç›¸è¿‘.</p> <h2 id="redux"><a href="#redux" class="header-anchor">#</a> redux</h2> <h3 id="ä¸Šå¤æ—¶ä»£"><a href="#ä¸Šå¤æ—¶ä»£" class="header-anchor">#</a> ä¸Šå¤æ—¶ä»£</h3> <p>åœ¨æ²¡æœ‰æ¡†æ¶åŒ–çš„å¼€å‘é˜¶æ®µ, æ•°æ®è¯·æ±‚é—®é¢˜ä¸€ç›´æ˜¯ä¸€ä¸ªé¥±å—äº‰è®®çš„è¯é¢˜, æ•°æ®éƒ½æ˜¯åˆ†æ•£å¼€æ¥ç®¡ç†, æ¯ä¸ªé¡µé¢/ç»„ä»¶ è´Ÿè´£è‡ªå·±çš„çŠ¶æ€, äº’ä¸å¹²æ‰°, å¹¶ä¸”çŠ¶æ€éƒ½å¾—ä¸åˆ°æŒä¹…åŒ–çš„ä¿å­˜, é€šä¿¡éƒ½æ˜¯ä¸€å¤§éš¾é¢˜. åæ¥é—­åŒ…çš„ä½¿ç”¨ä½¿å¾—è¿™ä¸€ç°è±¡å¥½è½¬, ä¿å­˜å˜é‡çš„ç»å…¸æ“ä½œä¹Ÿæˆä¸ºåæ¥<code>redux</code>çš„è®¾è®¡æ€æƒ³ä¹‹ä¸€. è™½ç„¶ä¼šé€ æˆä¸€å®šçš„æ€§èƒ½é—®é¢˜, ä½†æ˜¯ä¸¤å…µç›¸äº¤, é€€è€Œæ±‚å…¶æ¬¡. ä»¥ä¸‹ä¾¿æ˜¯å¸¸è§çš„æ•°æ®é—®é¢˜ä¹‹ä¸€.</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">//çŠ¶æ€æ ‘</span>
<span class="token keyword">let</span> appState <span class="token operator">=</span> <span class="token punctuation">{</span>
    title<span class="token operator">:</span> <span class="token punctuation">{</span> color<span class="token operator">:</span> <span class="token string">'red'</span><span class="token punctuation">,</span> text<span class="token operator">:</span> <span class="token string">'æ ‡é¢˜'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    content<span class="token operator">:</span> <span class="token punctuation">{</span> color<span class="token operator">:</span> <span class="token string">'yellow'</span><span class="token punctuation">,</span> text<span class="token operator">:</span> <span class="token string">'å†…å®¹'</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">renderApp</span><span class="token punctuation">(</span><span class="token parameter">appState</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">renderTitle</span><span class="token punctuation">(</span>appState<span class="token punctuation">)</span>
    <span class="token function">renderContent</span><span class="token punctuation">(</span>appState<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">renderTitle</span><span class="token punctuation">(</span><span class="token parameter">appState</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> title <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'title'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    title<span class="token punctuation">.</span>style<span class="token punctuation">.</span>color <span class="token operator">=</span> appState<span class="token punctuation">.</span>title<span class="token punctuation">.</span>color<span class="token punctuation">;</span>
    title<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> appState<span class="token punctuation">.</span>title<span class="token punctuation">.</span>text<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">renderContent</span><span class="token punctuation">(</span><span class="token parameter">appState</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> content <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'content'</span><span class="token punctuation">)</span>
    content<span class="token punctuation">.</span>style<span class="token punctuation">.</span>color <span class="token operator">=</span> appState<span class="token punctuation">.</span>content<span class="token punctuation">.</span>color<span class="token punctuation">;</span>
    content<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> appState<span class="token punctuation">.</span>content<span class="token punctuation">.</span>text<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// appState.title.color = 'green' yes</span>
<span class="token comment">// appState= null                 no</span>
<span class="token function">renderApp</span><span class="token punctuation">(</span>appState<span class="token punctuation">)</span>
</code></pre></div><h3 id="æ¼”å˜-è§„èŒƒä¿®æ”¹æ“ä½œ"><a href="#æ¼”å˜-è§„èŒƒä¿®æ”¹æ“ä½œ" class="header-anchor">#</a> æ¼”å˜ (è§„èŒƒä¿®æ”¹æ“ä½œ)</h3> <p>ä¿®æ”¹çŠ¶æ€æ˜¯å¯ä»¥çš„, ä½†æ˜¯ç›´æ¥ç»™çŠ¶æ€èµ‹å€¼ä¸º<code>null</code>,<code>undefined</code>å°±ä¼šå‡ºç°æ•°æ®ä¸¢å¤±, è™½ç„¶å¯ä»¥åœ¨æ¸²æŸ“æ—¶æ“ä½œ<code>!!${data}</code>å¯ä»¥æ¢çš„ä¸€çº¿ç”Ÿæœº, ä½†æ˜¯è¿™å±äºæ˜¯æ‹†ä¸œæ¡¥è¡¥è¥¿å¢™, ä¸æ˜¯è§£å†³æ–¹æ¡ˆ, æ–¹æ¡ˆåœ¨äºè§£å†³çŠ¶æ€ä¸è¢«éšæ„æ”¹å˜. é‚£å°±è®©æ¯æ¬¡æ”¹å˜æ•°æ®éƒ½å¾—è¯†åˆ«å…¶æ”¹å˜çš„ç±»å‹, é‚£å°±éœ€è¦ç”¨å‡½æ•°æ¥æ ‡è¯†è§„èŒƒæ”¹å˜çš„åŠ¨ä½œ. åªéœ€è¦åœ¨ä¸Šè¿°ä¸­è¿½åŠ å¦‚ä¸‹.</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token parameter">action</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">switch</span><span class="token punctuation">(</span>action<span class="token punctuation">.</span>type<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">case</span> <span class="token constant">COLOR</span> <span class="token operator">:</span>
            appState<span class="token punctuation">.</span>title<span class="token punctuation">.</span>color <span class="token operator">=</span> action<span class="token punctuation">.</span>payload
        <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token constant">TEXT</span> <span class="token operator">:</span>
            appState<span class="token punctuation">.</span>title<span class="token punctuation">.</span>text <span class="token operator">=</span> action<span class="token punctuation">.</span>payload
        <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token operator">...</span>
        <span class="token keyword">default</span><span class="token operator">:</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// ä½¿ç”¨</span>
<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span>type<span class="token operator">:</span><span class="token string">'COLOR'</span><span class="token punctuation">,</span>payload<span class="token operator">:</span><span class="token string">'green'</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token function">renderApp</span><span class="token punctuation">(</span>appState<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token number">1000</span><span class="token punctuation">)</span>
</code></pre></div><p>ç®€è¦è¯´æ˜, ç›´æ¥è°ƒç”¨å‡½æ•°ä¼ å…¥ä¸€ä¸ª<code>create object</code>ç±»å‹çš„æ•°æ®<code>action</code>, ä¼ å…¥éœ€è¦ä¿®æ”¹çš„åŠ¨ä½œç±»å‹<code>type</code>ä»¥åŠæ•°æ®<code>payload</code>. è¿˜æ˜¯æ¯”è¾ƒæ¸…æ™°çš„, è¿™æ ·å°±èƒ½é¿å…è¿è§„æ“ä½œ, ä¸ç¬¦åˆæ“ä½œç±»å‹çš„ç›´æ¥è¿‡æ»¤æ‰. éœ€è¦æ³¨æ„çš„æ˜¯æ´¾å‘å®ŒæˆåŠ¨ä½œåéœ€è¦é‡å¤<code>render</code>æ¸²æŸ“è§†å›¾å±‚.</p> <h3 id="æ¼”å˜-è§„èŒƒæ•°æ®æº"><a href="#æ¼”å˜-è§„èŒƒæ•°æ®æº" class="header-anchor">#</a> æ¼”å˜ (è§„èŒƒæ•°æ®æº)</h3> <p>ä»¥ä¸Šèƒ½è§£å†³æ“ä½œé—®é¢˜çš„è§„èŒƒæ€§, ä½†æ˜¯è¿˜æ˜¯å¯ä»¥ç›´æ¥ä¿®æ”¹æ•°æ®æº, åœ¨æ¸²æŸ“å‰åç›´æ¥æ“ä½œæ•°æ®æº, ä¹Ÿæ˜¯é‡å¤§BUG. è§£å†³æ–¹æ¡ˆä¹‹ä¸€, å˜é‡ç§æœ‰åŒ–, åˆ›å»ºä¸€ä¸ªå‡½æ•°å°†æ•°æ®ä¸¢åˆ°å‡½æ•°ä½“å†…éƒ¨, åœ¨å¤–é¢å°±æ— æ³•ç›´æ¥ä¿®æ”¹, å†åšç®€å•çš„ä¿®æ”¹.</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">createStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">let</span> state <span class="token operator">=</span> <span class="token punctuation">{</span>
        title<span class="token operator">:</span> <span class="token punctuation">{</span> color<span class="token operator">:</span> <span class="token string">'red'</span><span class="token punctuation">,</span> text<span class="token operator">:</span> <span class="token string">'æ ‡é¢˜'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        content<span class="token operator">:</span> <span class="token punctuation">{</span> color<span class="token operator">:</span> <span class="token string">'yellow'</span><span class="token punctuation">,</span> text<span class="token operator">:</span> <span class="token string">'å†…å®¹'</span> <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">function</span> <span class="token function">getState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> state
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>getState<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>è¿™æ ·å°±å°†çŠ¶æ€æ•°æ®è—èµ·æ¥äº†, å¤–ç•Œå°±æ— æ³•è®¿é—®ä¿®æ”¹è¯¥å±æ€§, ä¹ä¸€çœ‹æ˜¯æ²¡å¤šå¤§æ¯›ç—…äº†, ä½†æ˜¯ç»†æƒ³æˆ‘è¿˜è¦æ‰§è¡Œä¿®æ”¹æ“ä½œå•Š, è¿™æ ·åˆ†æ•£çš„è¯, å°±ä¸å¥½åˆ‡ç‰‡ç¼–ç¨‹äº†, åˆå˜æˆäº†ä¸€å¨çƒ‚æ³¥, ç„¶åå°±ç¨ä½œä¿®æ”¹, å°†æ“ä½œçŠ¶æ€çš„åŠ¨ä½œåˆå¹¶åˆ°<code>createStore</code>ä¸­, ç»Ÿä¸€ç®¡ç†çŠ¶æ€ä»¥åŠåŠ¨ä½œ.</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">createStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">let</span> state <span class="token operator">=</span> <span class="token punctuation">{</span>
        title<span class="token operator">:</span> <span class="token punctuation">{</span> color<span class="token operator">:</span> <span class="token string">'red'</span><span class="token punctuation">,</span> text<span class="token operator">:</span> <span class="token string">'æ ‡é¢˜'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        content<span class="token operator">:</span> <span class="token punctuation">{</span> color<span class="token operator">:</span> <span class="token string">'yellow'</span><span class="token punctuation">,</span> text<span class="token operator">:</span> <span class="token string">'å†…å®¹'</span> <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">function</span> <span class="token function">getState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> state
    <span class="token punctuation">}</span>
    <span class="token keyword">function</span> <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token parameter">action</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">switch</span><span class="token punctuation">(</span>action<span class="token punctuation">.</span>type<span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">case</span> <span class="token constant">COLOR</span> <span class="token operator">:</span>
                state<span class="token punctuation">.</span>title<span class="token punctuation">.</span>color <span class="token operator">=</span> action<span class="token punctuation">.</span>payload
            <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> <span class="token constant">TEXT</span> <span class="token operator">:</span>
                state<span class="token punctuation">.</span>title<span class="token punctuation">.</span>text <span class="token operator">=</span> action<span class="token punctuation">.</span>payload
            <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token operator">...</span>
            <span class="token keyword">default</span><span class="token operator">:</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>getState<span class="token punctuation">,</span> dispatch<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="æ¼”å˜-è§„èŒƒåŠ¨ä½œ"><a href="#æ¼”å˜-è§„èŒƒåŠ¨ä½œ" class="header-anchor">#</a> æ¼”å˜ (è§„èŒƒåŠ¨ä½œ)</h3> <p>ä¸Šè¿°æ“ä½œ, è²Œä¼¼ä»¥åŠè§£å†³äº†ç»å¤§å¤šæ•°é—®é¢˜, æ‰€ä»¥ç°åœ¨åˆ°äº†è§„èŒƒå†™æ³•çš„æ—¶å€™, ç›®å‰æ˜¯æ‰€æœ‰çš„é€»è¾‘æ“ä½œ, éƒ½ç³…æ‚åœ¨<code>createStore</code>ä¸­, è¿™æ ·ä¼šå¯¼è‡´æ­¤å‡½æ•°è¶Šæ¥è¶Šå¤§, è¶Šæ¥è¶Šéš¾ç®¡ç†. ç»†æƒ³, æ—¢ç„¶æ‰€æœ‰çš„æ´¾å‘åŠ¨ä½œéƒ½æ˜¯ä¸€è‡´çš„å‚æ•°æµç¨‹, é‚£ä½•ä¸å°†å…¶æŠ½ç¦»åˆ°å¤–éƒ¨, ç„¶ååœ¨æ‹¼æ¥èµ·æ¥, å“ªé‡Œéœ€è¦ç”¨åˆ°æ¯å‡½æ•°å°±ç›´æ¥å¼•å…¥, å²‚ä¸ä¹å“‰.</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">createStore</span><span class="token punctuation">(</span><span class="token parameter">reducer</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> state <span class="token operator">=</span> <span class="token punctuation">{</span>
        title<span class="token operator">:</span> <span class="token punctuation">{</span> color<span class="token operator">:</span> <span class="token string">'red'</span><span class="token punctuation">,</span> text<span class="token operator">:</span> <span class="token string">'æ ‡é¢˜'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        content<span class="token operator">:</span> <span class="token punctuation">{</span> color<span class="token operator">:</span> <span class="token string">'yellow'</span><span class="token punctuation">,</span> text<span class="token operator">:</span> <span class="token string">'å†…å®¹'</span> <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">function</span> <span class="token function">getState</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> state<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">function</span> <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token parameter">action</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        state <span class="token operator">=</span> <span class="token function">reducer</span><span class="token punctuation">(</span>state<span class="token punctuation">,</span> action<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span> getState<span class="token punctuation">,</span> dispatch <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">reducer</span><span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> action</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">switch</span> <span class="token punctuation">(</span>action<span class="token punctuation">.</span>type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">case</span> <span class="token constant">UPDATE_TITLE_COLOR</span><span class="token operator">:</span>
            <span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token operator">...</span>state<span class="token punctuation">,</span> title<span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token operator">...</span>state<span class="token punctuation">.</span>title<span class="token punctuation">,</span> color<span class="token operator">:</span> action<span class="token punctuation">.</span>payload <span class="token punctuation">}</span> <span class="token punctuation">}</span>
        <span class="token keyword">case</span> <span class="token constant">UPDATE_TITLE_TEXT</span><span class="token operator">:</span>
            <span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token operator">...</span>state<span class="token punctuation">,</span> title<span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token operator">...</span>state<span class="token punctuation">.</span>title<span class="token punctuation">,</span> text<span class="token operator">:</span> action<span class="token punctuation">.</span>payload <span class="token punctuation">}</span> <span class="token punctuation">}</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token constant">UPDATE_CONTENT_COLOR</span><span class="token operator">:</span>
            <span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token operator">...</span>state<span class="token punctuation">,</span> title<span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token operator">...</span>state<span class="token punctuation">.</span>content<span class="token punctuation">,</span> color<span class="token operator">:</span> action<span class="token punctuation">.</span>payload <span class="token punctuation">}</span> <span class="token punctuation">}</span>
        <span class="token keyword">case</span> <span class="token constant">UPDATE_CONTENT_TEXT</span><span class="token operator">:</span>
            <span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token operator">...</span>state<span class="token punctuation">,</span> title<span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token operator">...</span>state<span class="token punctuation">.</span>content<span class="token punctuation">,</span> text<span class="token operator">:</span> action<span class="token punctuation">.</span>payload <span class="token punctuation">}</span> <span class="token punctuation">}</span>
        <span class="token keyword">default</span><span class="token operator">:</span>
            <span class="token keyword">return</span> state<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token function">createStore</span><span class="token punctuation">(</span>reducer<span class="token punctuation">)</span>
</code></pre></div><p>ç°åœ¨å°±åªå­˜åœ¨ä¸€ä¸ªä»“åº“å’Œä¸€äº›åŠ¨ä½œæ“ä½œçš„æµç¨‹, æ“ä½œçŠ¶æ€åªç®¡æ¥å—çŠ¶æ€è¿˜æœ‰åŠ¨ä½œ, åˆ›å»ºä»“åº“åªç®¡æ´¾å‘éªŒè¯åŠ¨ä½œ, å„å¸å…¶èŒ, åŸºæœ¬ä¸Šå°±æœ‰äº†<code>redux</code>çš„é›å½¢, æ¥ä¸‹é‡Œå°±å±äº<code>redux</code>çš„å®Œå–„æµç¨‹.</p> <h3 id="åŸºæœ¬redux"><a href="#åŸºæœ¬redux" class="header-anchor">#</a> åŸºæœ¬redux <span class="badge warn" style="vertical-align:top;" data-v-26ebd6a3>reduxé›å½¢</span></h3> <p>å¯ä»¥çœ‹å‡º<code>redux</code>çš„æ ¸å¿ƒå°±æ˜¯<code>createStore</code>è¿™ä¸ªä»“åº“ç®¡ç†å‘˜, é‚£ä¹ˆä¸€åˆ‡çš„æ“ä½œéƒ½æ˜¯ä»¥å…¶ä¸ºæ ¸å¿ƒæ¥å¼€å±•, ä¸‹é¢éœ€è¦å®Œå–„å‡ ä¸ªç‚¹, <em><strong>â‘ <code>state</code>çŠ¶æ€æ˜¯ä¸èƒ½å†™æ­»åœ¨ä»“åº“ä¸­</strong></em>,<em><strong>â‘¡æ¯æ¬¡æ´¾å‘å®ŒåŠ¨ä½œéƒ½éœ€è¦æ‰‹åŠ¨å†æ¬¡æ¸²æŸ“æ‰èƒ½åˆ·æ–°è§†å›¾</strong></em></p> <h5 id="çŠ¶æ€é—®é¢˜ä¸€æ­¥åˆ°ä½"><a href="#çŠ¶æ€é—®é¢˜ä¸€æ­¥åˆ°ä½" class="header-anchor">#</a> çŠ¶æ€é—®é¢˜ä¸€æ­¥åˆ°ä½</h5> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> state <span class="token operator">=</span> <span class="token punctuation">{</span> ğŸš€
    title<span class="token operator">:</span> <span class="token punctuation">{</span> color<span class="token operator">:</span> <span class="token string">'red'</span><span class="token punctuation">,</span> text<span class="token operator">:</span> <span class="token string">'æ ‡é¢˜'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    content<span class="token operator">:</span> <span class="token punctuation">{</span> color<span class="token operator">:</span> <span class="token string">'yellow'</span><span class="token punctuation">,</span> text<span class="token operator">:</span> <span class="token string">'å†…å®¹'</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">reducer</span><span class="token punctuation">(</span><span class="token parameter">state <span class="token operator">=</span> state<span class="token punctuation">,</span>action</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">createStore</span><span class="token punctuation">(</span><span class="token parameter">reducer</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> state<span class="token punctuation">;</span> ğŸš€
    <span class="token keyword">function</span> <span class="token function">getState</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> state<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">function</span> <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token parameter">action</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        state <span class="token operator">=</span> <span class="token function">reducer</span><span class="token punctuation">(</span>state<span class="token punctuation">,</span> action<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span>type<span class="token operator">:</span><span class="token string">&quot;@@MY_REDUX_INIT&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span> ğŸš€
    <span class="token keyword">return</span> <span class="token punctuation">{</span> getState<span class="token punctuation">,</span> dispatch <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ğŸš€ çš„åœ°æ–¹å±äºåŸºæ“, å°†çŠ¶æ€æŠ½ç¦»åˆ°å¤–éƒ¨, ç¬¬ä¸€æ¬¡è¿è¡Œ<code>createStore</code>æ‰¾ä¸åˆ°<code>state</code>å°±ä¼šé»˜è®¤æ˜¯<code>undefined</code>, ä½†æ˜¯æˆ‘è®©å…¶åœ¨å†…éƒ¨å…ˆæ‰§è¡Œä¸€æ¬¡<code>dispatch</code>å…ˆæ‹å‘ä¸€æ¬¡, æˆ‘éšæ„ä¼ å…¥ä¸€ä¸ª<code>type</code>çš„åŠ¨ä½œ, åˆ°<code>reducer</code>æ— æ³•éªŒè¯åŠ¨ä½œçš„ç±»å‹, é‚£å°±é»˜è®¤è¿”å›åˆå§‹å€¼å’¯. <em><strong>åˆ’é‡ç‚¹,åˆæ¬¡æ´¾å‘çš„ç±»å‹ä¸€å®šå¾—æ˜¯æ²¡æœ‰å®šä¹‰çš„</strong></em></p> <h5 id="åŠ¨ä½œé—®é¢˜ç”±æµ…å…¥æ·±"><a href="#åŠ¨ä½œé—®é¢˜ç”±æµ…å…¥æ·±" class="header-anchor">#</a> åŠ¨ä½œé—®é¢˜ç”±æµ…å…¥æ·±</h5> <p>æ¯æ¬¡æ´¾å‘ç©åŠ¨ä½œ, è™½ç„¶ä½ çŠ¶æ€çš„ç¡®æ”¹å˜äº†, ä½†æ˜¯è§†å›¾ä¸çŸ¥é“å•Š, ä»–ä¸çŸ¥é“çŠ¶æ€ä»¥åŠå‘ç”Ÿäº†æ”¹å˜, ç€å®å¤´ç–¼, ä¸ä¼šè®©æˆ‘æ´¾å‘ä¸€æ¬¡æ‰‹åŠ¨æ‰§è¡Œä¸€æ¬¡æ¸²æŸ“åŠ¨ä½œ, è¿™ä¹Ÿä¸åˆ‡å®é™…. åœ¨ä»¥å¾€éƒ½æ˜¯ä½¿ç”¨è§‚å¯Ÿè€…é»˜è®¤, ç°åœ¨çš„è¯å‘å¸ƒè®¢é˜…å¯èƒ½ä¼šæ›´åŠ å®¹æ˜“ç†è§£, å±äºè§‚å¯Ÿè€…çš„ä¼˜åŒ–ç‰ˆ, å…ˆæ˜ç¡®ä¸€ä¸‹æ€è·¯, æ¯æ¬¡æ´¾å‘å®ŒåŠ¨ä½œæˆ‘éƒ½å¸Œæœ›<code>render</code>èƒ½è‡ªå·±çŸ¥é“å‘ç”Ÿäº†æ”¹å˜, æ—¢ç„¶ä¸çŸ¥é“çŠ¶æ€, é‚£å°±å°†çŠ¶æ€å­˜å‚¨èµ·æ¥å¯¹æ¯”å·®å¼‚, å…¶å®å†…å®¹ä¹Ÿä¸æ˜¯å¾ˆé‚£éš¾, æ¥ä¸‹æ¥å®è·µ.</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">createStore</span><span class="token punctuation">(</span><span class="token parameter">reducer</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> state<span class="token punctuation">,</span>listener <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token keyword">function</span> <span class="token function">getState</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> state<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">function</span> <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token parameter">action</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        state <span class="token operator">=</span> <span class="token function">reducer</span><span class="token punctuation">(</span>state<span class="token punctuation">,</span> action<span class="token punctuation">)</span>
        listener<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">fn</span> <span class="token operator">=&gt;</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">function</span> <span class="token function">subscribe</span> <span class="token punctuation">(</span><span class="token parameter">lister</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        listener<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>lister<span class="token punctuation">)</span>
        <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            listener <span class="token operator">=</span> listener<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> item <span class="token operator">!==</span> lister<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span>type<span class="token operator">:</span><span class="token string">&quot;@@MY_REDUX_INIT&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span> 
    <span class="token keyword">return</span> <span class="token punctuation">{</span> getState<span class="token punctuation">,</span> dispatch<span class="token punctuation">,</span> subscribe <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>æ€è·¯è¿˜æ˜¯æ¯”è¾ƒæ¸…æ™°çš„, ç›´æ¥åˆ›å»ºä¸€ä¸ªè®¢é˜…çš„å‡½æ•°<code>subscribe</code>, æ²¡æ¬¡è®¢é˜…éƒ½å°†å…¶å­˜æ”¾åˆ°ä¸€ä¸ªå±€éƒ¨å˜é‡<code>listener</code>ä¸­, å¹¶ä¸”è¿”å›ä¸€ä¸ªå–æ¶ˆè®¢é˜…çš„å‡½æ•°, ä¸ä¹‹å‰å­˜æ”¾è®¢é˜…çš„æ•°ç»„ä½œå¯¹æ¯”, è¿”å›æ˜¯å–æ¶ˆè®¢é˜…ä¹‹åçš„é˜Ÿåˆ—, æ´¾å‘åŠ¨ä½œ<code>dispatch</code>æ—¶, é¡ºä¾¿ä¾æ¬¡æ‰§è¡Œè®¢é˜…, è¿™æ ·å°†å‘å¸ƒè®¢é˜…ä¸æ´¾å‘åŠ¨ä½œèä¸ºä¸€ä½“, ä¹Ÿç®—æ˜¯è¾ƒä¸ºè®¨å·§çš„å†™æ³•.</p> <hr> <p>ç»å…¸çš„æ•°æ®ç®¡ç†çŠ¶æ€å®¹å™¨, ä»¥å…¶å•å‘æ•°æ®æµçš„æ€æƒ³æä¾›å¯é ç¨³å®šå”¯ä¸€çš„æ•°æ®æº<code>state</code>, ä¸”åªæ¥å—æ´¾å‘åŠ¨ä½œçš„ç®¡ç†æ“ä½œ<code>action</code>, ä»¥åŠç›‘ç®¡çŠ¶æ€åŠ¨ä½œçš„æ´¾å‘æ“ä½œ<code>dispatch</code>.ç»Ÿç§°ä¸ºå®¹å™¨çŠ¶æ€çš„<code>store</code>. é‡ä¸­ä¹‹é‡åœ¨äº, å…¶æ€æƒ³ä¸é™åˆ¶ä¸ä»»ä½•æ¡†æ¶ä»»ä½•æ€æƒ³çš„æŸç¼š, å¯åº”ç”¨ä¸ä»»ä½•åœºæ™¯, æ¥ä¸‹æ¥å°±å¼€å§‹å‰–æå…¶å†…éƒ¨åŸç†.</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>â”€â”€ redux
   â”œâ”€â”€ createStore   <span class="token comment">// åˆ›å»ºæ´¾å‘æ“ä½œ</span>
   â”œâ”€â”€ combineReducer <span class="token comment">// åˆå¹¶æ“ä½œåŠ¨ä½œ</span>
   â”œâ”€â”€ bindActionCreators   <span class="token comment">// åˆå¹¶æ´¾å‘åŠ¨ä½œ </span>
   â””â”€â”€ index   <span class="token comment">// å…¥å£</span>
</code></pre></div><h3 id="reduxç»„ä»¶1"><a href="#reduxç»„ä»¶1" class="header-anchor">#</a> reduxç»„ä»¶1  <span class="badge tip" style="vertical-align:top;" data-v-26ebd6a3>bindActionCreator</span></h3> <p>é¡¾æ˜æ€è®®, åˆå¹¶æ‰€æœ‰çš„æ´¾å‘åŠ¨ä½œ, åœ¨å¾€å¸¸æ²¡æœ‰åˆå¹¶çš„æ—¶å€™æˆ‘ä»¬çš„å†™æ³•æ˜¯è¿™æ ·çš„.</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>onClick <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span>type<span class="token operator">:</span><span class="token string">'xxxx'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token operator">...</span>ä¸€æ¯›ä¸€æ ·çš„æ“ä½œ
</code></pre></div><p>æˆ‘ä»¬æœŸæœ›æ˜¯ç›´æ¥æ‰§è¡ŒæŸä¸ªæ–¹æ³•, å°±è‡ªåŠ¨ç»™æˆ‘æ´¾å‘åŠ¨ä½œ, å¹¶ä¸”æˆ‘è¿˜å¯ä»¥ç›´æ¥åŒæ—¶ä¼ å…¥å¤šä¸ªåŠ¨ä½œæ´¾å‘.æ€è·¯éƒ½æ˜¯æ´¾å‘, å°±å’Œä¸åŒçš„ç±»å‹åœ¨åšæ¯”è¾ƒ, éœ€è¦æ³¨æ„ä¼ å‚çš„ç»†èŠ‚, æ´¾å‘åŠ¨ä½œä¼ å…¥çš„å‚æ•°æ˜¯ä¸ä¸€è‡´çš„, ç›´æ¥<code>nest</code>å±•å¼€å³å¯, çœ‹å®ç°æ€è·¯.</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">bindActionCreator</span><span class="token punctuation">(</span><span class="token parameter">actionCreator<span class="token punctuation">,</span> dispatch</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token function">actionCreator</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">bindActionCreators</span><span class="token punctuation">(</span><span class="token parameter">actionCreators<span class="token punctuation">,</span> dispatch</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> actionCreators <span class="token operator">===</span> <span class="token string">'function'</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token function">bindActionCreator</span><span class="token punctuation">(</span>actionCreator<span class="token punctuation">,</span> dispatch<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">let</span> arrBindActionCreator <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> key <span class="token keyword">in</span> actionCreators<span class="token punctuation">)</span><span class="token punctuation">{</span>
        arrBindActionCreator<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">bindActionCreator</span><span class="token punctuation">(</span>actionCreator<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">,</span> dispatch<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> arrBindActionCreator
<span class="token punctuation">}</span>
</code></pre></div><h3 id="reduxç»„ä»¶2"><a href="#reduxç»„ä»¶2" class="header-anchor">#</a> reduxç»„ä»¶2  <span class="badge tip" style="vertical-align:top;" data-v-26ebd6a3>combineReducer</span></h3> <p>ä¸åˆå¹¶æ´¾å‘ä¸€æ ·, è¿™æ˜¯åˆå¹¶æ‰€æœ‰çš„åŠ¨ä½œ, è€è§„çŸ© æ²¡æœ‰åˆå¹¶ä¹‹å‰, ä¸€ä¸ªé€»è¾‘é¡µé¢ä¸€ä¸ª<code>reducer</code>, é¡µé¢ä¸€å¤š, å°±ä¼šå‡ºç°åˆ°å¤„éƒ½æ˜¯<code>reducer</code>çš„ç°çŠ¶, å¦‚ä¸‹.</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">reducer1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">//åŠ å‡é€»è¾‘</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">reducer2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">//åŠ å‡é€»è¾‘</span>
<span class="token punctuation">}</span>
<span class="token operator">...</span>ä¸€æ¯›ä¸€æ ·çš„æ“ä½œ
</code></pre></div><p>æˆ‘ä»¬æœŸæœ›çš„æ˜¯åªéœ€è¦ä¸€ä¸ªæ ¹<code>reducer</code>, å…¶ä»–çš„éƒ½æ˜¯æŒ‰éœ€å¼•å…¥çš„, æœ€å¥½æ˜¯ä¸€ä¸ªå¯¹è±¡ç›´æ¥å–å³å¯, æ€è·¯ä¸ä¸Šç›¸åŒ</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">combineReducer</span><span class="token punctuation">(</span><span class="token parameter">reducers</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">state<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> action</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">let</span> nextState <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">const</span> key <span class="token keyword">in</span> reducers<span class="token punctuation">)</span><span class="token punctuation">{</span>
            nextState<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">reducers</span><span class="token punctuation">(</span>state<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">,</span>action<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> nextState<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>å†™æ³•è¿˜æ˜¯æ¯”è¾ƒç®€å•çš„, å°±æ˜¯å°†æœ‰è§„å¾‹çš„å‡½æ•°é”®å€¼å¯¹, æ‹¼å‡‘å®Œæ•´åœ¨æŒ‰åŸæ ·è¿”å›. æ•´ç†ä¸€ä¸‹æ€è·¯, åœ¨ç¨åçš„ç« èŠ‚è¿˜ä¼šç»§ç»­å‰–æ<span class="badge warn" style="vertical-align:top;" data-v-26ebd6a3>react-redux</span>å…¨å®¶æ¡¶.</p> <table><thead><tr><th>åç§°</th> <th>ä½œç”¨</th> <th>è¯´æ˜</th></tr></thead> <tbody><tr><td><span class="badge tip" style="vertical-align:top;" data-v-26ebd6a3>index</span></td> <td>åˆå¹¶æ‰€æœ‰åŠŸèƒ½é’©å­å‡½æ•°</td> <td>ğŸš€</td></tr> <tr><td><span class="badge tip" style="vertical-align:top;" data-v-26ebd6a3>createStore</span></td> <td>åˆ›å»ºä»“åº“å‡½æ•°</td> <td>ğŸš€</td></tr> <tr><td><span class="badge tip" style="vertical-align:top;" data-v-26ebd6a3>combineReducer</span></td> <td>åˆå¹¶æ‰€æœ‰åŠ¨ä½œå‡½æ•°</td> <td>ğŸš€</td></tr> <tr><td><span class="badge tip" style="vertical-align:top;" data-v-26ebd6a3>bindActionCreator</span></td> <td>åˆå¹¶æ‰€æœ‰æ´¾å‘å‡½æ•°</td> <td>ğŸš€</td></tr></tbody></table> <h2 id="react-redux"><a href="#react-redux" class="header-anchor">#</a> react-redux</h2> <blockquote><p>å‰æ–‡å·²ç»å°†<code>redux</code>æ‰‹å†™äº†ä¸ªé, æ¥ä¸‹æ¥è¯¥è½®åˆ°ä»–çš„æ‡’äººä¾èµ–åŒ…äº†, <code>react-redux</code> å…¨å®¶æ¡¶äº†. è€è§„çŸ©, ä¸ªäººå­¦ä¹ è®°å½•, ä¸å–œå‹¿å–·.</p></blockquote> <h3 id="å‡ºç°ç¼˜ç”±"><a href="#å‡ºç°ç¼˜ç”±" class="header-anchor">#</a> å‡ºç°ç¼˜ç”±</h3> <p>æ—¢ç„¶<code>redux</code>å·²ç»å°†çŠ¶æ€é€»è¾‘åˆ†ç¦», é‚£ä¸ºä»€ä¹ˆè¿˜ä¼šå‡ºç°ç®¡ç†è¿™äº›é€»è¾‘å®¹å™¨çš„æ’ä»¶, å°ç¼–ä¸ªäººæ„Ÿè§‰æ˜¯<span class="badge tip" style="vertical-align:top;" data-v-26ebd6a3>æ‡’</span> ä¸æƒ³å†™å¤šä½™çš„ä»£ç , èƒ½å°‘å†™å°±å°‘å†™, å°±ä¿ƒä½¿ä¸€äº›å¥‡æ·«æŠ€å·§çš„è¯ç”Ÿ, å…¶å®è¿‡åˆ†çš„æŠ½ç¦»ä¹Ÿæœªå¿…æ˜¯ä¸€ä»¶å¥½äº‹, ä¸å¤šæ‰¯, æ¥ç€æ¥åˆ†æ<code>redux</code>ä¸å¤Ÿå®Œå–„çš„åœ°æ–¹.<strong>æ¯ä¸ªé¡µé¢éƒ½éœ€è¦ç”¨åˆ°<code>store</code>å¯¼è‡´å¼•ç”¨æ³›æ»¥</strong>, <strong>æ¯æ¬¡æ´¾å‘éƒ½éœ€è¦æ‰‹åŠ¨å¼•å…¥è§¦å‘è®¢é˜…, è¯´åˆ°åº•å°±æ˜¯<span class="badge warn" style="vertical-align:top;" data-v-26ebd6a3>æ‡’</span></strong>, å…ˆçœ‹æœªä½¿ç”¨å‰çš„æ•ˆæœå›¾.</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// æ‰‹åŠ¨è§¦å‘è®¢é˜…</span>
<span class="token keyword">function</span> <span class="token function">increment</span><span class="token punctuation">(</span><span class="token parameter">payload</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span> type<span class="token operator">:</span> type<span class="token punctuation">.</span><span class="token constant">INCREMENT2</span><span class="token punctuation">,</span>payload <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">increment</span><span class="token punctuation">(</span><span class="token parameter">payload</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span> type<span class="token operator">:</span> type<span class="token punctuation">.</span><span class="token constant">DECREMENT2</span> <span class="token punctuation">,</span>payload<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> actions <span class="token operator">=</span> <span class="token punctuation">{</span>
    incerment<span class="token punctuation">,</span>decerment
<span class="token punctuation">}</span>
state <span class="token operator">=</span> <span class="token punctuation">{</span> number<span class="token operator">:</span> store<span class="token punctuation">.</span><span class="token function">getState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>counter2<span class="token punctuation">.</span>number <span class="token punctuation">}</span>
<span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>unsubscribe <span class="token operator">=</span> store<span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> number<span class="token operator">:</span> store<span class="token punctuation">.</span><span class="token function">getState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>counter2<span class="token punctuation">.</span>number <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token function">componentWillUnmount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">unsubscribe</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">// æ‰‹åŠ¨è¿æ¥</span>
<span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span>actions<span class="token punctuation">.</span><span class="token function">increment</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>åŠ <span class="token number">1</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span>actions<span class="token punctuation">.</span><span class="token function">decrement</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>å‡<span class="token number">1</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
</code></pre></div><p>ç°å°†ä½¿ç”¨åˆ°çš„ç›®å½•åˆ—å‡ºæ¥, æ–¹ä¾¿ç†è§£ <span class="badge tip" style="vertical-align:top;" data-v-26ebd6a3>ç»“æ„</span></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>â”€â”€ react<span class="token operator">-</span>redux
   â”œâ”€â”€ index     <span class="token comment">// å…¥å£</span>
   â”œâ”€â”€ Provider  <span class="token comment">// æ ¹ç»„ä»¶,åŒ…è£¹ä¼ å…¥storeæ¶ˆè´¹</span>
   â”œâ”€â”€ Context   <span class="token comment">// ä¸Šä¸‹æ–‡ &lt;è€å¥—è·¯å–ä¸Šä¸‹å€¼&gt; </span>
   â””â”€â”€ connect   <span class="token comment">//è¿æ¥ç»„ä»¶ä¹‹é—´çš„çŠ¶æ€ä»¥åŠåŠ¨ä½œ </span>
</code></pre></div><h3 id="react-reduxç»„ä»¶1"><a href="#react-reduxç»„ä»¶1" class="header-anchor">#</a> react-reduxç»„ä»¶1 <span class="badge tip" style="vertical-align:top;" data-v-26ebd6a3>Provider</span></h3> <p>å…ˆæ¥è§£å†³ç¬¬ä¸€ä¸ªé—®é¢˜, <code>store</code>å¼•ç”¨æ³›æ»¥çš„é—®é¢˜, è¯´é“ç†å°±æ˜¯æ²¡æœ‰å…¨å±€å…±äº«, å¯¼è‡´æ¯ä¸ªç»„ä»¶è¦ä½¿ç”¨å°±å¾—å¼•ç”¨ä¸€é, æ–¹æ³•å°±æ˜¯ä½¿ç”¨<code>react</code>çš„å¸¸è§æ‰‹æ³•, åœ¨æ ¹ç»„ä»¶ä¼ å…¥<code>store</code>, åœ¨é€šè¿‡ä¸Šä¸‹æ–‡ç›´æ¥å–, æˆ–è®¸æ˜¯ä¸ªä¸é”™çš„è§£å†³æ–¹æ¡ˆ, åˆ†æä¸€ä¸‹éœ€æ±‚, åªéœ€è¦ä¼ å…¥ä¸Šä¸‹æ–‡çš„<code>props</code> ç»„ä»¶ç›´æ¥å¾€åä¸¢å°±è¡Œ, æ²¡ä»€ä¹ˆéš¾åº¦æ“ä½œ, çœ‹ç»“æœ.</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// MyContext -&gt; React,createContext()</span>
<span class="token keyword">class</span> <span class="token class-name">Provider</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span><span class="token punctuation">{</span>
    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>
            <span class="token operator">&lt;</span>MyContext<span class="token punctuation">.</span>Provider value<span class="token operator">=</span><span class="token punctuation">{</span>store<span class="token operator">:</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>store<span class="token punctuation">}</span><span class="token operator">&gt;</span>
                <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>children<span class="token punctuation">}</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>MyContext<span class="token punctuation">.</span>Provider<span class="token operator">&gt;</span>
        <span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ä¸ºäº†ä¾¿äºåŒºåˆ†è¿™é‡Œå°†ä¸Šä¸‹æ–‡å¯¹è±¡é‡æ–°å‘½åäº†ä¸€ä¸‹<code>MyContext</code>, å¯ä»¥çœ‹å‡ºåŸºæœ¬ä¸Šå°±æ˜¯è¿›æ¥å•¥å‡ºå»å•¥, é¡ºä¾¿åœ¨ä¸Šä¸‹æ–‡å¯¹è±¡æ”¾ç½®å±æ€§,ä»¥ä¾›å…¨å±€å¯ä»¥ä½¿ç”¨.æ€»çš„æ¥è¯´ç®€ç­”.</p> <h3 id="react-reduxç»„ä»¶2"><a href="#react-reduxç»„ä»¶2" class="header-anchor">#</a> react-reduxç»„ä»¶2 <span class="badge tip" style="vertical-align:top;" data-v-26ebd6a3>connect</span></h3> <p>æ—¢ç„¶åˆ›å»ºæ¶ˆè´¹çš„ç»„ä»¶ä¹Ÿå°±æå®š, é‚£æ¥ä¸‹æ¥å°±å¾—æ¶ˆè´¹äº†, è¿æ¥çŠ¶æ€ä»¥åŠåŠ¨ä½œ, å…ˆçœ‹ä¸€ä¸‹å®˜æ–¹çš„ç”¨æ³•åœ¨ç ”ç©¶</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> <span class="token function-variable function">mapStateToProps</span> <span class="token operator">=</span> <span class="token parameter">state</span> <span class="token operator">=&gt;</span> state<span class="token punctuation">.</span>xxx
<span class="token keyword">let</span> <span class="token function-variable function">mapStateToProps</span> <span class="token operator">=</span> <span class="token parameter">dispatch</span> <span class="token operator">=&gt;</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token function">xxx</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">yyy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span> 
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">connect</span><span class="token punctuation">(</span>
    mapStateToProps<span class="token punctuation">,</span>
    mapDispatchToProps
<span class="token punctuation">)</span><span class="token punctuation">(</span>Components<span class="token punctuation">)</span>
</code></pre></div><p>ç”¨æ³•è¿˜æ˜¯æ¯”è¾ƒç®€å•ç›´è§‚çš„, ç»è¿‡è¿™æ ·æ´¾å‘ä¸€æ¬¡å°±ä¼šæŠŠæ•´ä¸ª<code>store</code>èµ‹å€¼åˆ°<code>props</code>ä¸Šï¼Œå¯ä»¥ç›´æ¥å–ç”¨<code>mapStateToProps</code>å°±æ˜¯æ‰€è°“çš„å…¨å±€çŠ¶æ€, åœ¨é€šè¿‡<code>.</code>è¯­æ³•æ¥å–ä½ æ‰€éœ€è¦çš„çŠ¶æ€å€¼,<code>mapStateToProps</code>å¾ˆæ˜æ˜¾å°±æ˜¯æ‰€æœ‰çš„åŠ¨ä½œå¯¹è±¡, è™½ç„¶è¿™æ ·å…¨éƒ½å†™åœ¨ä¸€ä¸ªä½ç½®å¾ˆå°´å°¬, ä¹Ÿä¼šå¯¼è‡´æ•´ä¸ªæ–‡ä»¶è¶Šæ¥è¶Šè‡ƒè‚¿, å…ˆè¿™æ ·å†™ç€, åé¢åœ¨ä¼˜åŒ–, æ€è·¯è¿˜æ˜¯æ¯”è¾ƒæ˜ç¡®çš„, ä¸€ä¸ªè‡ªæ‰§è¡Œå‡½æ•°, è¿”å›ä¸€ä¸ªå‡½æ•°.å’±ä»¬æ¥ä¸€æ­¥ä¸€æ­¥æ‹†è§£.</p> <ul><li>å…ˆæ•´ç†å‡ºå¤§è‡´æ¡†æ¶, ä¸€å¥è¯åƒå•¥åå•¥.</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// MyContext -&gt; React,createContext()</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">mapStateToProps<span class="token punctuation">,</span> mapDispatchToProps</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">WrappedComponent</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">class</span> <span class="token class-name">extends</span> React<span class="token punctuation">.</span>Component<span class="token punctuation">{</span>
            <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token keyword">return</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>WrappedComponent <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// connect(xxx,yyy)(Component)</span>
</code></pre></div><ul><li>åœ¨å¤„ç†ä¼ å…¥å€¼ä»¥åŠä¸Šä¸‹æ–‡, éœ€è¦æ³¨æ„ä¸Šä¸‹æ–‡éœ€è¦ç”¨<code>contextType</code>æ¥åŒ…è£¹, åœ¨å°†<code>mapStateToProps</code>ä¸­çš„å€¼å–å‡ºä¸¢åˆ°åµŒå¥—çš„ç»„ä»¶å†…, å…¶ä½™çš„ä¸€å¾‹ä¸ç®¡.</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token operator">...</span>
<span class="token keyword">static</span> contextType <span class="token operator">=</span> MyContext
<span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props<span class="token punctuation">,</span>context</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
   <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span>
   <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token function">mapStateToProps</span><span class="token punctuation">(</span>context<span class="token punctuation">.</span>store<span class="token punctuation">.</span><span class="token function">getState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
   <span class="token keyword">return</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>WrappedComponent <span class="token punctuation">{</span><span class="token operator">...</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>é‡ç‚¹å°±æ˜¯è¿™ä¸ªæ´¾å‘åŠ¨ä½œçš„è®¢é˜…, å°±æ˜¯ä¹‹å‰å†™åˆ°çš„æ´¾å‘åŠ¨ä½œæ˜¯è‡ªåŠ¨è®¢é˜…, ä¸è‡³äºæ‰‹åŠ¨åˆ·æ–°è§†å›¾, è€è§„çŸ©è®¢é˜…çŠ¶æ€, å¹¶ä¸”è¿”å›å–æ¶ˆè®¢é˜….</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token function">componentsDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
   <span class="token keyword">this</span><span class="token punctuation">.</span>unscribe <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>context<span class="token punctuation">.</span>store<span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
       <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token function">mapStateToProps</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>context<span class="token punctuation">.</span>store<span class="token punctuation">.</span><span class="token function">getState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
   <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token function">componentWillUnmount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
   <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">unscribe</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>åœ¨å¤„ç†æ´¾å‘åŠ¨ä½œ, ä¸€æ ·å°†åŠ¨ä½œä¸¢åˆ°åµŒå¥—çš„ç»„ä»¶, ç®€å•å¤„ç† <em><strong>&lt;è¿™é‡Œé¢„ç•™ä¸€ä¸ªå‘ä½, ç¨åè¡¥ä¸Š&gt;</strong></em></li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props<span class="token punctuation">,</span>context</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token function">mapStateToProps</span><span class="token punctuation">(</span>context<span class="token punctuation">.</span>store<span class="token punctuation">.</span><span class="token function">getState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>actions <span class="token operator">=</span> <span class="token function">mapDispatchToProps</span><span class="token punctuation">(</span>mapDispatchToProps<span class="token punctuation">,</span>context<span class="token punctuation">.</span>store<span class="token punctuation">.</span>dispatch<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>WrappedComponent <span class="token punctuation">{</span><span class="token operator">...</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">}</span> <span class="token punctuation">{</span><span class="token operator">...</span><span class="token keyword">this</span><span class="token punctuation">.</span>actions<span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="react-redux-2"><a href="#react-redux-2" class="header-anchor">#</a> react-redux <span class="badge tip" style="vertical-align:top;" data-v-26ebd6a3>å®Œå–„</span></h3> <p>ç°åœ¨å·²ç»å¯ä»¥ä½¿ç”¨è¯¥å‡½æ•°äº†, å¯ä»¥è¯´æ˜¯å’Œ<code>react</code>å…¶ä»–åº“å®Œå…¨å…¼å®¹, æ¥ä¸‹æ¥å±äºå®¹é”™å¤„ç†, è¿˜è®°å¾—ä¹‹å‰åŸ‹ä¸‹çš„å‘ä¹ˆ, <code>mapDispatchToProps</code> è¿™ä¸ªå‡½æ•°æœ‰ç‚¹æ¶å¿ƒ, æ²¡=æ¯å†™ä¸€ä¸ªåŠ¨ä½œ, å°±è¦åœ¨å‡½æ•°é‡Œé¢å†™ä¸ªæ´¾å‘, ä¹…è€Œä¹…ä¹‹, å°±ä¼šå˜å¾—éš¾ä»¥ç»´æŠ¤,
æˆ‘ä»¬æœŸæœ›è¿™ä¸ªç±»å‹<code>combineReducer</code>ä¸€æ ·, èƒ½å°†æ‰€æœ‰çš„<code>action</code>åˆå¹¶, æ—¢ç„¶æ“ä½œç±»å‹, é‚£åŸç†ä¹ŸæŸ¥ä¸åˆ°å“ªå», å…ˆçœ‹ä¸‹æœŸæœ›</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>actions <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token function">xxxx</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">yyyy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
<span class="token function">connect</span><span class="token punctuation">(</span>
    mapStateToProps<span class="token punctuation">,</span>
    actions
<span class="token punctuation">)</span><span class="token punctuation">(</span>Component<span class="token punctuation">)</span>
</code></pre></div><p>åªéœ€è¦åˆ¤æ–­ç±»å‹åªæœ‰å•ä¸ªçš„è¯, å°±ç›´æ¥è°ƒç”¨, å¯¹è±¡ç±»å‹çš„è¯ä¹Ÿå¯ä»¥ä½¿ç”¨ä¹‹å‰å°è£…å¥½çš„åˆå¹¶<code>actions</code>çš„å‡½æ•°æ¥åˆå¹¶, æœ€ååˆ«å¿˜äº†ä¹Ÿè¦æŠŠ<code>props</code>ä¸¢ä¸‹å».</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props<span class="token punctuation">,</span> context</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token function">mapStateToProps</span><span class="token punctuation">(</span>context<span class="token punctuation">.</span>store<span class="token punctuation">.</span><span class="token function">getState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> mapDispatchToProps <span class="token operator">===</span> <span class="token string">'function'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>actions <span class="token operator">=</span> <span class="token function">mapDispatchToProps</span><span class="token punctuation">(</span>context<span class="token punctuation">.</span>store<span class="token punctuation">.</span>dispatch<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> mapDispatchToProps <span class="token operator">===</span> <span class="token string">'object'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>actions <span class="token operator">=</span> <span class="token function">bindActionCreators</span><span class="token punctuation">(</span>mapDispatchToProps<span class="token punctuation">,</span> context<span class="token punctuation">.</span>store<span class="token punctuation">.</span>dispatch<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token operator">&lt;</span>WrappedComponent <span class="token punctuation">{</span><span class="token operator">...</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">}</span> <span class="token punctuation">{</span><span class="token operator">...</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">}</span> <span class="token punctuation">{</span><span class="token operator">...</span><span class="token keyword">this</span><span class="token punctuation">.</span>actions<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>åˆ°æ­¤ä¸ºæ­¢, <code>react-redux</code>ä»¥åŠå®Œå…¨å¯ä»¥ä½¿ç”¨äº†, å‰©ä¸‹è¦åšçš„å°±æ˜¯ä¼˜åŒ–æ¸²æŸ“. æ¥ä¸‹é‡Œå°±æ˜¯ä¼˜åŒ–å¤„ç†, æ¸²æŸ“æ¬¡æ•°.</p> <h3 id="react-redux-3"><a href="#react-redux-3" class="header-anchor">#</a> react-redux <span class="badge tip" style="vertical-align:top;" data-v-26ebd6a3>ä¼˜åŒ–æ¸²æŸ“</span></h3> <p>ç›®å‰, åŸºäºæ‰‹å†™çš„<code>react-redux</code>ä»¥åŠå®Œå…¨å¯ä»¥ä¸å®˜æ–¹çš„<code>react</code>å…¨å®¶æ¡¶æ··ç”¨, æ¯”è¾ƒå°´å°¬çš„åœ°æ–¹å°±æ˜¯æˆ‘ä»¬æ²¡æœ‰åšæ¸²æŸ“ä¼˜åŒ–, å› ä¸º<code>redux</code>å†…éƒ¨è®¾è®¡å°±å­˜åœ¨å†å²é—ç•™é—®é¢˜, åŸºäºå…¨å±€çš„çŠ¶æ€åˆ†å‘å…±äº«ä½¿å¾—ä»»æ„ä¸€ä¸ªç»„ä»¶æ´¾å‘éƒ½ä¼šè§¦å‘å…¨å±€äº‹ä»¶, å°½ç®¡çŠ¶æ€åº“æ˜¯æ— æ³•æ“ä½œ, é‚£å°±åœ¨åˆ†å‘æ—¶æ¥åšä¸€ä¸‹èŠ‚æµ, å…ˆæè¿°ä¸€ä¸‹é—®é¢˜æ‰€åœ¨.</p> <table><thead><tr><th>çŠ¶æ€åº“</th> <th>åç§°</th> <th>è§¦å‘åŠ¨ä½œ</th> <th>æ¸²æŸ“</th></tr></thead> <tbody><tr><td>store</td> <td>Counter1</td> <td><span class="badge tip" style="vertical-align:top;" data-v-26ebd6a3>åŠ </span> or  <span class="badge tip" style="vertical-align:top;" data-v-26ebd6a3>å‡</span></td> <td><span class="badge warn" style="vertical-align:top;" data-v-26ebd6a3>Counter1 render</span>and<span class="badge warn" style="vertical-align:top;" data-v-26ebd6a3>Counter2 render</span></td></tr> <tr><td>store</td> <td>Counter2</td> <td><span class="badge tip" style="vertical-align:top;" data-v-26ebd6a3>åŠ </span> or  <span class="badge tip" style="vertical-align:top;" data-v-26ebd6a3>å‡</span></td> <td><span class="badge warn" style="vertical-align:top;" data-v-26ebd6a3>Counter1 render</span>and<span class="badge warn" style="vertical-align:top;" data-v-26ebd6a3>Counter2 render</span></td></tr></tbody></table> <p>å…ˆæ¥åˆ†æä¸€ä¸‹ä¸ºä»€ä¹ˆä¼šå‘ç”Ÿå¤šæ¬¡æ¸²æŸ“, å°±æ˜¯å› ä¸ºå†…éƒ¨æ— æ³•åˆ¤å®šå“ªä¸€ä¸ªçŠ¶æ€å‘ç”Ÿäº†æ”¹å˜, é‚£å°±åˆ†ä¸ºä¸¤éƒ¨æ›²</p> <ul><li><strong>â‘ å…ˆåˆ°æ´¾å‘è½¬æ€çš„<code>combineReducer</code>ä¸­åšç‚¹æ‰‹è„š, æ—¢ç„¶æ²¡åŠæ³•åˆ¤æ–­, é‚£æˆ‘å°±ç¼“å­˜ä¸€ä¸‹å‰åæ›´æ”¹çš„çŠ¶æ€, ä½ å‘ç”Ÿæ”¹å˜æˆ‘å°±æ´¾å‘æ”¹å˜çš„, æ²¡å‘ç”Ÿæ”¹å˜okæˆ‘è¿˜æ˜¯è¿”å›ä¸Šä¸€æ¬¡çš„.</strong>,</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">combineReducer</span><span class="token punctuation">(</span><span class="token parameter">reducers</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">state <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>action</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">let</span> hashChange <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token keyword">let</span> nextState <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">const</span> key <span class="token keyword">in</span> reducers<span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">let</span> reducer <span class="token operator">=</span> reducers<span class="token punctuation">[</span>key<span class="token punctuation">]</span>
            <span class="token keyword">let</span> prevStateForKey <span class="token operator">=</span> state<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token keyword">let</span> nextStateForKey <span class="token operator">=</span> <span class="token function">reducer</span><span class="token punctuation">(</span>prevStateForKey<span class="token punctuation">,</span>action<span class="token punctuation">)</span>
            nextState<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> nextStateForKey
            hashChange <span class="token operator">=</span> hashChange <span class="token operator">||</span> nextStateForKey <span class="token operator">!=</span> prevStateForKey
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> hashChange <span class="token operator">?</span> nextState <span class="token operator">:</span> state 
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ä¹Ÿä¸æ˜¯å¾ˆéš¾ç†è§£, ç”¨<code>hashChange</code>ä¿å­˜æ˜¯å¦æ´¾å‘æ–°çŠ¶æ€, ç”¨<code>prevStateForKey</code> ä¿å­˜ä¸Šä¸€æ¬¡çš„æ´¾å‘åŠ¨ä½œ, ç”¨<code>nextStateForKey</code>ä¿å­˜æ–°ä¼ å…¥çš„æ´¾å‘åŠ¨ä½œ, åªéœ€è¦åšä¸€ä¸‹ç®€å•çš„æ¯”è¾ƒå†æ¥å†³å®šæ˜¯å¦è¾“å‡ºæ–°æ—§æ´¾å‘åŠ¨ä½œå³å¯, æ´¾å‘è¿™å—å·²ç»ok, ä¸‹é¢å°±è¯¥è½®åˆ°çŠ¶æ€çš„å–èˆ.</p> <ul><li><strong>â‘¡ å›åˆ°è¿æ¥çŠ¶æ€çš„<code>connect</code>ä¸­æ´¾å‘çŠ¶æ€æ˜¯åšä¸€ä¸‹æ‹¦æˆª, ä¸‹ä¸€æ¬¡ä¸ä¸Šä¸€æ¬¡çŠ¶æ€ç›¸åŒæˆ‘å°±æ´¾å‘, ä¸ç›¸åŒæˆ‘å°±ä¸æ´¾å‘</strong></li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>mapState <span class="token operator">=</span> <span class="token function">mapStateToProps</span><span class="token punctuation">(</span>context<span class="token punctuation">.</span>store<span class="token punctuation">.</span><span class="token function">getState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token operator">...</span>
    <span class="token keyword">let</span> nextState <span class="token operator">=</span> <span class="token function">mapStateToProps</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>context<span class="token punctuation">.</span>store<span class="token punctuation">.</span><span class="token function">getState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>nextState <span class="token operator">!=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>mapState<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>mapState <span class="token operator">=</span> nextState<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span>nextState<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>è¿™å—æ€è·¯ä¹Ÿæ˜¯å’Œä¸Šé¢çš„æ— å¼‚, åšä¸€ä¸ªç®€å•çš„å˜é‡å­˜å‚¨, ç„¶åå°†å‰åçš„çŠ¶æ€åšä¸€ä¸‹å¯¹æ¯”, æœ‰ä¸€ç‚¹å·¨å‘<strong>this.mapState = nextState</strong>, å¦‚æœå‰åå€¼ä¸ç›¸åŒçš„è¯, ä¸€å®šè¦ç”¨åæ¥çš„å€¼è¦†ç›–æ‰ä¹‹å‰ç¼“å­˜çš„å€¼, ä¸ç„¶ä¹‹åæ¯æ¬¡éƒ½ä¸ç›¸åŒ, æ°¸è¿œéƒ½æ˜¯å’Œç¬¬ä¸€æ¬¡çš„å€¼ä½œæ¯”è¾ƒ, å¯¼è‡´æ°¸è¿œéƒ½ä¼šæ´¾å‘. å½“ç„¶ä¹Ÿæœ‰ç¬¬äºŒç§æ€è·¯, åœ¨<code>shouldComponentUpdate</code>ä¸­åšå¤„ç†, ç”¨<code>nextProps</code>,<code>nextState</code>è¿™ä¸¤ä¸ªå˜é‡ä½œæ¯”è¾ƒ, çº¯å±æŠ›ç –å¼•ç‰.</p> <p>åœ°å€ï¼š<a href="https://github.com/StackFei/ReactFAQ" target="_blank" rel="noopener noreferrer">https://github.com/StackFei/ReactFAQ<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">æœ€åæ›´æ–°æ—¶é—´:</span> <span class="time">12/4/2019, 12:43:57 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      â†
      <a href="/FAQ/React/context.html" class="prev">
        ğŸ‡ä¸Šä¸‹æ–‡
      </a></span> <span class="next"><a href="/FAQ/React/react-redux-middleware.html">
        ğŸç®€æ˜“ä¸­é—´ä»¶
      </a>
      â†’
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.903983bb.js" defer></script><script src="/assets/js/2.c5c844f9.js" defer></script><script src="/assets/js/19.fdccf963.js" defer></script><script src="/assets/js/10.acc61093.js" defer></script>
  </body>
</html>
