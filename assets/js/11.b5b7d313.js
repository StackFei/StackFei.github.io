(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{404:function(t,s,a){t.exports=a.p+"assets/img/koa1.51f4a260.png"},445:function(t,s,a){"use strict";a.r(s);var n=a(30),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("blockquote",[n("p",[t._v("Koa ä¸€ä¸ªæ¯”Expressæ›´è½»é‡çš„åŸºäº Nodejs ç¼–å†™çš„WebæœåŠ¡å™¨")])]),t._v(" "),n("h2",{attrs:{id:"ç»“æ„åˆ†æ"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#ç»“æ„åˆ†æ"}},[t._v("#")]),t._v(" ç»“æ„åˆ†æ")]),t._v(" "),n("p",[t._v("å½“ç„¶ï¼Œä»Šå¤©ä¸æ˜¯è®¨è®º"),n("code",[t._v("Koa")]),t._v("æ˜¯ä»€ä¹ˆæˆ–è€…æ€ä¹ˆç”¨ï¼Œé»˜è®¤å†åº§çš„å„ä½çœ‹å®˜ï¼Œéƒ½æ˜¯ç†Ÿç»ƒæ“ä½œ"),n("code",[t._v("Koa")]),t._v("è¿›è¡Œå¼€å‘ï¼Œå³ä½¿ä¸ä¼š "),n("code",[t._v("koa")]),t._v(" ä¼š "),n("code",[t._v("Express")]),t._v("ä¹Ÿæ˜¯ä¸€æ ·çš„åŸç†ï¼Œçœ‹æ‡‚çš„çœ‹ä¸ªé—¨é“ï¼Œçœ‹ä¸æ‡‚å¾—çœ‹ä¸ªçƒ­é—¹ã€‚ä½œè€…ä¹Ÿæ˜¯çœ‹è¿‡å¾ˆå¤šæ–‡ç« æ€»ç»“ä¸‹æ¥çš„ï¼Œå¦‚æœ‰ç‘•ç–µï¼Œè¯·å¤šè§è°…ã€‚")]),t._v(" "),n("p",[t._v("çœ‹è¿‡"),n("code",[t._v("Koa")]),t._v("æºç çš„éƒ½çŸ¥é“ï¼Œå†…å®¹ä¸å¤šï¼Œä¸€å…±å°±å››ä¸ªæ–‡ä»¶å¤¹ã€‚"),n("code",[t._v("application")]),t._v(","),n("code",[t._v("context")]),t._v(","),n("code",[t._v("response")]),t._v(","),n("code",[t._v("request")]),t._v(",åˆ†åˆ«å¯¹åº”çš„æ˜¯"),n("code",[t._v("Koa")]),t._v("å®ä¾‹ï¼Œä¸Šä¸‹æ–‡ï¼ŒæœåŠ¡ç«¯å“åº”ï¼Œå®¢æˆ·ç«¯å“åº”ï¼Œäº†è§£äº†ä»–çš„ç»“æ„ï¼Œå†ç»“åˆæ—¥å¸¸çš„ä½¿ç”¨æ–¹æ³•ï¼Œå¤åŸåŠŸèƒ½å˜å¾—æ¸…æ™°æ˜äº†ã€‚")]),t._v(" "),n("h2",{attrs:{id:"æ„å»ºé¡¹ç›®"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#æ„å»ºé¡¹ç›®"}},[t._v("#")]),t._v(" æ„å»ºé¡¹ç›®")]),t._v(" "),n("div",{staticClass:"language-javascript extra-class"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[t._v("mkdir myKoa\ncd myKoa\nnpm init "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("y \nmkdir lib\ncd lib\n\ntouch application"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("js\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("\n")])])]),n("h2",{attrs:{id:"åŸºæœ¬ç”¨æ³•"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#åŸºæœ¬ç”¨æ³•"}},[t._v("#")]),t._v(" åŸºæœ¬ç”¨æ³•")]),t._v(" "),n("p",[t._v("ä»¥ä¸Šæ“ä½œä¸€æ°”å‘µæˆï¼Œå›é¡¾ä¸€ä¸‹Koaçš„åŸºæœ¬ç”¨æ³•")]),t._v(" "),n("div",{staticClass:"language-javascript extra-class"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" myKoa "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./lib/application'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" app "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("myKoa")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\napp"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("use")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("ctx"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" next")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\napp"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("listen")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'ğŸ”¥ is successFully'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),n("h2",{attrs:{id:"koaé›å½¢"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#koaé›å½¢"}},[t._v("#")]),t._v(" Koaé›å½¢")]),t._v(" "),n("blockquote",[n("p",[t._v("ä»Šå¤©çš„èŒƒç•´å…¨åœ¨"),n("code",[t._v("application")]),t._v(",æ¯•ç«Ÿæ‰€æœ‰çš„æ–¹æ³•éƒ½æ˜¯åŸºäºå®ƒæ‰©å±•ã€‚")])]),t._v(" "),n("p",[t._v("é¦–å…ˆç¡®å®šçš„æ˜¯Koaæ˜¯ä¸€ä¸ªç±»å®ä¾‹åŒ–ï¼Œå¹¶ä¸”ç›®å‰çœ‹æ¥æ˜¯å¸¦æœ‰"),n("code",[t._v("use")]),t._v(","),n("code",[t._v("listen")]),t._v("æ–¹æ³•çš„å®ä¾‹ï¼Œå¹¶ä¸”å¯èƒ½ä¼šæœ‰å¤šä¸ª"),n("code",[t._v("middleware")]),t._v("ï¼Œè¿™æ ·é”Šä¸‹ï¼Œç»“æ„å°±æ¸…æ™°æ˜äº†äº†\n,æ¥ä¸‹æ¥ä¼šä½¿ç”¨ES6çš„ç±»æ–¹æ³•ï¼Œä¸ç†Ÿæ‚‰ES6è¯­æ³•çš„å¯ä»¥å»é˜…è¯»ä¸€ä¸‹é˜®ä¸€å³°è€å¸ˆçš„ES6ã€‚è¿™ä¸ªç±»ä¼šè°ƒç”¨"),n("code",[t._v("Node")]),t._v("åŸç”Ÿæ¨¡å—çš„"),n("code",[t._v("http")]),t._v("æ¥ç›‘å¬ç«¯å£,å½“ç„¶å°‘ä¸äº†äº‹ä»¶æ¨¡å—"),n("code",[t._v("events")]),t._v("ï¼Œé›å½¢å¦‚ä¸‹ã€‚")]),t._v(" "),n("div",{staticClass:"language-javascript extra-class"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" EventEmit "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'events'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" http "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'http'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("myKoa")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("EventEmit")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("constructor")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("super")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("middleware "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å­˜å‚¨æ‰€æœ‰çš„ä¸­é—´ä»¶")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" \n\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("use")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("middleware")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("middleware"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("push")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("middleware"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("listen")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("args")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" server "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" http"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("createServer")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("callback"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        server"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("listen")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("args"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("callback")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ¥å—ä¼ å…¥çš„æ‰€æœ‰æ–¹æ³•ï¼ˆä¸­é—´ä»¶ï¼Œå‚æ•°ï¼‰å¹¶æ‰§è¡Œ")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("req"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("res")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'å®¢æˆ·ç«¯'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("req"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'æœåŠ¡ç«¯ç«¯'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("res"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("p",[t._v("ä¹ä¸ç‰ˆå°±è¿™ä¹ˆæå®šäº†ï¼Œå½“ç„¶æ­¤æ—¶å•¥ä¹Ÿåšä¸äº†ï¼Œè­¬å¦‚"),n("code",[t._v("middleware")]),t._v("å¹¶æ²¡æœ‰å®ç°å®ƒçš„ä½œç”¨ï¼Œæ¥ä¸‹æ¥éœ€è¦æ‹†è§£ä»–çš„æ‰€æœ‰ä¸­é—´ä»¶å¹¶ä¸”é€’å½’åˆå¹¶ï¼Œå¹¶ä¸”ï¼ŒåŸºäºæ´‹è‘±æ¨¡å‹çš„\nçš„æ‰§è¡Œæœºåˆ¶ï¼Œä¼šæŠŠä¸‹ä¸€æ¬¡ä¸­é—´ä»¶çš„å†…å®¹ä¸¢å¸¦ä¸Šä¸€æ¬¡ä¸­é—´ä»¶ä¹‹é—´æ¥æ‰§è¡Œ,è¯´äººè¯å°±æ˜¯å°†ç¬¬äºŒæ¬¡çš„"),n("code",[t._v("async")]),t._v("æ–¹æ³•ä¸¢åˆ°ç¬¬ä¸€æ¬¡çš„"),n("code",[t._v("await next()")]),t._v("ä¸­é—´ä»¶æ‰§è¡Œ,è¿™æ ·æ‰ç¬¦åˆ"),n("code",[t._v("Koa")]),t._v("çš„æ´‹è‘±æœºåˆ¶ã€‚")]),t._v(" "),n("div",{staticClass:"language-javascript extra-class"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[t._v("    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("compose")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("createNext")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("middleware"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("oldNext")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("middleware")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ctx"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("oldNext"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" \n                "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è¿™å°±æ˜¯ä¼ å…¥çš„asyncä¸­é—´å‡½æ•° ç­‰ä»·äº")]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//await (async(ctx,next)=>{")]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v('//    console.log("å…¥å£2")')]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//    await next()")]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v('//    console.log("å‡ºå£1")')]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//})")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" len "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("middleware"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" next "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Promise"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolve")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//ç¡®ä¿æ¯ä¸€ä¸ªnextéƒ½æ˜¯å¼‚æ­¥å¯æ‰§è¡Œ")]),t._v("\n\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" i "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" len "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//ä»å°¾éƒ¨å–å‡ºæ¯ä¸€ä¸ª")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" currentNextMiddleware "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("middleware"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("i"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("ï¼›\n            next "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("createNext")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("currentNextMiddleware"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("next"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//å°¾éƒ¨ä¾æ¬¡èµ‹å€¼ç»™å½“å‰")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("next")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    \n    "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("\n")])])]),n("h2",{attrs:{id:"composeæ ¸å¿ƒæ­¥éª¤"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#composeæ ¸å¿ƒæ­¥éª¤"}},[t._v("#")]),t._v(" composeæ ¸å¿ƒæ­¥éª¤")]),t._v(" "),n("ul",[n("li",[t._v("ä»ä¸­é—´ä»¶æ•°ç»„æœ«å°¾å¼€å§‹è¿­ä»£")]),t._v(" "),n("li",[t._v("å–å‡ºæœ€åä¸€é¡¹")]),t._v(" "),n("li",[t._v("èµ‹å€¼æ“ä½œ å°†ç¬¬ä¸€æ­¥çš„"),n("code",[t._v("next")]),t._v("çš„"),n("code",[t._v("Promise")]),t._v("æ¥å…¥åˆ°ç¬¬äºŒéƒ¨çš„èµ‹å€¼"),n("code",[t._v("let next = Promise.resolve();")]),t._v(","),n("code",[t._v("next = createNext(currentNextMiddleware,next)")])]),t._v(" "),n("li",[t._v("æ‰§è¡Œç½®æ¢ (å¦‚ä¸‹å›¾)")]),t._v(" "),n("li",[t._v("æ‰§è¡Œç»“æœ è¿”å›"),n("code",[t._v("createNext")]),t._v("çš„å¼‚æ­¥å‡½æ•°\næœ€åå†å°†æ•´ä¸ª"),n("code",[t._v("compose")]),t._v("å‡½æ•°è¿”å›,å¹¶ä¸”æ‰§è¡Œæ•´ä¸ª"),n("code",[t._v("callback")])])]),t._v(" "),n("div",{staticClass:"language-javascript extra-class"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[t._v("    "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("compose")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("ctx")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    \n    "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("callback")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" ctx "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" fn "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("compose")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("fn")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ctx"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            res"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("end")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'ğŸ”¥'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("h2",{attrs:{id:"æ´‹è‘±æ¨¡å‹æ ¸å¿ƒæ€è·¯"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#æ´‹è‘±æ¨¡å‹æ ¸å¿ƒæ€è·¯"}},[t._v("#")]),t._v(" æ´‹è‘±æ¨¡å‹æ ¸å¿ƒæ€è·¯")]),t._v(" "),n("p",[n("img",{attrs:{src:a(404),alt:"koaæ‰§è¡Œæœºåˆ¶"}}),t._v("\nä»¥ä¸Šä¾¿æ˜¯ä¸ªäººå­¦ä¹ çš„æ‹™è§")])])}),[],!1,null,null,null);s.default=e.exports}}]);