(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{399:function(t,s,a){t.exports=a.p+"assets/img/react1.37bec28f.png"},400:function(t,s){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOoAAABTCAYAAACRUZvzAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAEXRFWHRTb2Z0d2FyZQBTbmlwYXN0ZV0Xzt0AAAdoSURBVHic7d19bBNlAAbwR4NdC6M4pti0DGR1oDA+ChoYcyLZpix+LZDAJpjwB0gCCRjRYCCCm5EEEaMkYCJETRiKJkxkwIB1gQITprDJQFAQ9lGRAiv7YFm3zuT8A1ep7daDXdt7r8/vH8jd9e4l4dl7d7und58kSRKISNXuj/YAiCg0BpVIAAwqkQAYVCIBMKhEAugX7QH0hbOiHl+//BUAIGfjyxg31xbdARGFyX3h/PWMx+PBhg0b0NTUFLAuISEBy5cvh8FgCFhXfawKAGB7eqKs49RsrwYAv6A6Sg7DmGCUvQ8iNQvrqa/BYEB+fn7Qdfn5+UFD6ig5jOtXrmHMk6kAAPeFRhx8ey+6PF0AboeyO5i9ScueiutXrvlCTySysF+jWq1WZGRk+C3LyMiA1WoN2NZRchgA8PycHOj0uj4dV6fX4fk5OWhtavXtl0hUEbmZlJubC7PZDAAwm83Izc31W+/t8OLAt6UwJhgx7aVnFT129/4OfFsKb4dX0X0TRUrE7vrm5eX5/XmncM5+Ss7SRNESsaBaLBasWrUKFoulx216mv1anC34u70L7guNqFjvkHW8cM7SRJEW1ru+9+r/d30dhXac+LQC5kkWPJYzCgOGxGPcXBtqtlejdOluv8++uns+ktKH864vaYoqg0pE/vhkEpEAGFQiATCoRAJgUIkEwKASCYBBJRJATAbV427Htue2wllRH+2hBFWzvRoli4p9RQQiTQbVWVGPdYkFWJdYIKtpI8euPaWwTc3Exs1b7unzjkK77wdDzfZq3/jU+sOC1EUTDzx4O7w4uu8IxjyVClOSybc8WE+1t30c+qEcKWNHInm0f7Nn4+YtGDZsKACgoeFPLF28UPYYgNtVvVNbKjG98Dk8YHjAt9xRaEdyZgqS0oeHHJ/L6cIpx8+Y9tJ0xA+KD7k9aYvwM2pbSxtKv9mLwUMGBwQkmJ5mM51eh/QZGThTWYPL5y75fWbp4oXIfTHnnsdwdscveCI31S+kwXSfkq9LLAg49TUlmfDExNEoLy5DW0tbyH8naYvQQW1raUN5cRnGTh4n+5necXNtWOFegynL0gPWxQ+KR07+C7h45oLswnmoMXjc7Wi90oqHHn845L4Mif3x2sEFWHB8CeKMcQHrk0dbMTkrDfadZXA5XbLGR9ogbFBdThfsO8swOSst4FS1L3R6Haa/konrV66FrNzJGcPF/b9j+DMjYEjsr8j4TEkmTMlOQ0Xp0YCZn7RL2KCakkzImpWNSvtxRf/Ddl+rDrE8ErIeF2oMHnc76o/UImXGKMXG53K6cKLsONJzMhT9AUXqJmxQgdunqpkzs3GmskaR70bqvtZMGTtS9ql0b2No/O0GjBajYrPp5XOXUGk/jqxZ2bKux0k7NHnXt9ee6r/d1m7GpEGY/d08DBxm7PGu7649pShY+5Hfsq2bPsYk2/gex9Dl6cKh1QcxaeFkJI58yO+zPY0BAL6bXYRWZ4tv3ZRl6Zi2Oot3fWOcJoKqRs6Kelwuv4hpq7OiPRTSAAaVSABCX6MSxQoGlUgADCqRABhUIgEwqEQCiMmgso9KotFkUJXuo3Z0dGLle2thm5oJ29RMnKo+fdf7YB+V+kTSgE5Pp2TfWSZdbbjqt/x0UZV0uqhK9j7279gnXfr1j4B1J6t+kb4v2ef7+2sLlkhNTc2yxiBJktT4+w3pwFt7JG+712/54YIyqeFYnazxXW24Ku3Ztlu61XxL1vakLcLPqJHoo06yjff1Ua0jHsVQi/muxsA+KvWV0EGNRh/1Um0dAECv18saA/uopARhgxqNPmptXQM+2fQ5Fs6fB70+jn1UihhhgxrpPmptXQOWvPkO3ljyOkY8OkzWGNhHJaUIG1Qgcn3U5uYWrPngQ7z/7gq/aluoMbCPSkrRRHsm3H3UjZu34MuiHX7L1qx8y+8Lz9hHpXDSRFDViH1UUhKDSiQAoa9RiWIFg0okAAaVSAAMKpEAGFQiAcRkUNlHJdFoMqh8PyppjSZ+j8r3o5LWCT+j8v2oFAuEDirfj0qxQtig8v2o7KPGEmGDyvejso8aS4QNKsD3o1Ls0ORdX74flbRGE0FVI/ZRSUkMKpEAhL5GJYoVDCqRABhUIgEwqEQCYFCJBMCgEglAuKB63O0oWVQMj7s95HY9NVGIRKPKoHo7vCgvtgdtiMh9yL23JorL6cLeohLWxUgYqgtqb93OYA+53/nNCXJnW3Y7STT9oj2AO93Z7QzWDFHyIffk0Vb0HzgA9p1lmJKdxofcSdVUM6OG6nZ2ebpwftdZpOZNUOyY7HaSKFQT1FDdTlfVX4gbGBfQROkLdjtJFKoJKtB7t/Ny+UUkZ6YE/VxT3U0AwE+bfkRz7U1Zx2K3k0SiqqAC/31v0c3rN313fd0XGtF5qxOmieaA7VPzJqBivQPrEgugGxiHB0cM9n3mswmfYGvaJlR/cRIfD10LR6EdwO2Z9HzVOWTOzGa3k4QgRM3tbr5Wk0iLhAgqUaxT3akvEQViUIkEwKASCeAfsnqTYbAAYhMAAAAASUVORK5CYII="},401:function(t,s){t.exports="data:image/png;base64,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"},402:function(t,s){t.exports="data:image/png;base64,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"},403:function(t,s,a){t.exports=a.p+"assets/img/react5.37bc729e.png"},444:function(t,s,a){"use strict";a.r(s);var n=a(30),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("blockquote",[n("p",[t._v("高仿"),n("code",[t._v("React")]),t._v("的虚拟dom,外加冒牌的"),n("code",[t._v("diff")]),t._v("算法")])]),t._v(" "),n("h2",{attrs:{id:"前言"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#前言"}},[t._v("#")]),t._v(" 前言")]),t._v(" "),n("p",[t._v("前端世界，框架横行。稍不留神，就会被技术淘汰，当然据小编所知，业界的巨头也只有其三。大家熟知的"),n("code",[t._v("Vue")]),t._v("由尤大神组队开发开源，可谓是国人的骄傲，"),n("code",[t._v("React")]),t._v("由Facebook团队维护，"),n("code",[t._v("Ng")]),t._v("大家都懂，国内市场份额较少，就不做多介绍。当然框架产出的原因，无非是利于管理，对于开发性能而言，其实是无多大用处的，借用尤大神的说法"),n("code",[t._v("只是在好管理项目的基础上提供还算不错的性能")]),t._v("。既然有这么大的框架，必须得有较为优秀的算法支撑，这次，咱们就研究研究，其高性能的背后支柱之一，虚拟Dom。")]),t._v(" "),n("h2",{attrs:{id:"分析结构"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#分析结构"}},[t._v("#")]),t._v(" 分析结构")]),t._v(" "),n("p",[t._v("通过虚拟Dom这个方法，产出一个Dom节点，首先分析一下HTML元素"),n("code",[t._v('<div class="container"><p class="text">text</p></div>')]),t._v(",由节点名称，节点属性，节点子孙组成，多层嵌套，无非就是加上"),n("code",[t._v("children")]),t._v("来递归实现。结构较为清晰，我给你一个对象，你返回一个Dom节点。")]),t._v(" "),n("div",{staticClass:"language-javascript extra-class"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" VertualDom "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("createElement")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ul"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"list"')]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("createElement")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"li"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"itme"')]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"1"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("createElement")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"li"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"itme"')]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"2"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("createElement")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"li"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"itme"')]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"2"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),n("p",[t._v("由一个一个对象构成，这样创建节点的函数明确了，当然仅仅这样是没有什么卵用的，我得改变页面，通过数据来驱动页面，这也是框架的精髓。先上来结构图分析一下。")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("── src\n   ├── index   // 入口\n   ├── element // 创建节点\n   ├── patch   // 记录补丁包 \n   └── diff    // 简单的算法修改补丁包\n")])])]),n("p",[t._v("明确需求：通过"),n("code",[t._v("element")]),t._v("创建一个dom节点，修改数据调用"),n("code",[t._v("patch")]),t._v("来记录修改的数据,以此修改界面，但这样频繁的修改很耗性能，"),n("code",[t._v("diff")]),t._v("排上用场了，用最小的遍历角度优化修改补丁包，当然这是乞丐版的。源码可不止这样草率。")]),t._v(" "),n("h2",{attrs:{id:"index入口代码结构"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#index入口代码结构"}},[t._v("#")]),t._v(" index入口代码结构")]),t._v(" "),n("div",{staticClass:"language-javascript extra-class"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// index.js")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" createElement"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" render"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" renderDom "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./element'")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" VertualDom "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("createElement")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ul"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"list"')]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("createElement")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"li"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"itme"')]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"1"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("createElement")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"li"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"itme"')]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"2"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("createElement")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"li"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"itme"')]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"2"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" el "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("render")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("VertualDom"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),n("p",[t._v("需求明确，需要"),n("code",[t._v("createElement")]),t._v("创建虚拟节点,"),n("code",[t._v("render")]),t._v("将创建的虚拟节点转换为真实"),n("code",[t._v("dom")]),t._v("元素,"),n("code",[t._v("renderDom")]),t._v("将转换后的真实"),n("code",[t._v("dom")]),t._v("挂载到"),n("code",[t._v("html")]),t._v("元素上")]),t._v(" "),n("h2",{attrs:{id:"element虚拟dom的前世今生"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#element虚拟dom的前世今生"}},[t._v("#")]),t._v(" element虚拟dom的前世今生")]),t._v(" "),n("div",{staticClass:"language-javascript extra-class"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// element.js")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Element")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 通过 Element 类方法批量创建")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("constructor")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("type"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" props"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" children")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("type "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" type\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("props "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" props\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("children "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" children\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//返回虚拟节点的object")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("createElement")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("type"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" props"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" children")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Element")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("type"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" props"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" children"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n")])])]),n("p",[t._v("此时的虚拟dom已经创建出来，不出所料会是一个"),n("code",[t._v("html")]),t._v("节点对象,回到"),n("code",[t._v("index.js")]),t._v("将其打印出来瞅瞅,")]),t._v(" "),n("p",[n("img",{attrs:{src:a(399),alt:"react虚拟dom"}})]),t._v(" "),n("p",[t._v("是他没错了，"),n("code",[t._v("type")]),t._v("代表类型,"),n("code",[t._v("prop")]),t._v("代表传入的各种属性,比如"),n("code",[t._v("class")]),t._v("，"),n("code",[t._v("id")]),t._v("啥的,"),n("code",[t._v("children")]),t._v("代表其子元素，或者文本元素,单光是这样是不够的，无法在浏览器中显示，这时候就需要"),n("code",[t._v("render")]),t._v("函数来转换节点了,回到"),n("code",[t._v("element.js")])]),t._v(" "),n("div",{staticClass:"language-javascript extra-class"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// element.js")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//render将virtual node转化为真实dom")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("render")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("eleObj")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" el "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("createElement")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("eleObj"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("type"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//遍历children dom继续渲染 or 渲染文本")]),t._v("\n    eleObj"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("children"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("forEach")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("child")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        child "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("child "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("instanceof")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Element")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("render")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("child"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" document"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("createTextNode")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("child"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        el"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("appendChild")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("child"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" el"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("p",[t._v("解释一下,结构一目了然，创建传入的节点元素属性并创建出来，可能"),n("code",[t._v("children")]),t._v("存在多层，ok，遍历。当然"),n("code",[t._v("children")]),t._v("也可能不是"),n("code",[t._v("dom")]),t._v("节点，可能只是单纯的文字元素,这时候就需要做一点容错。当然创建节点不止如此，还要给节点添加传入的各种属性，这点稍后会说到。这时候，再回到"),n("code",[t._v("index.js")]),t._v("将其打印出来瞅瞅,看看dom节点长啥样")]),t._v(" "),n("p",[n("img",{attrs:{src:a(400),alt:"react虚拟dom"}})]),t._v(" "),n("p",[t._v("唉，有点样子了!但是总感觉少点什么，没错，得把属性加上去啊前端可就是靠样式吃饭的。那咱就写一个添加属性的方法上去，先明确需求，属性在普通标签"),n("code",[t._v("div")]),t._v("等等等可以直接添加上去比如"),n("code",[t._v("style")]),t._v(","),n("code",[t._v("class")]),t._v("，但"),n("code",[t._v("input")]),t._v("，等文本标签的属性"),n("code",[t._v("value")]),t._v("等啊，就得另做处理。")]),t._v(" "),n("div",{staticClass:"language-javascript extra-class"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// element.js")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("render")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("eleObj")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" el "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("createElement")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("eleObj"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("type"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" key "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" eleObj"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("props"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//设置属性的方法")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setAttr")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("el"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" key"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" eleObj"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("props"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("key"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//节点设置属性")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setAttr")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("node"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" key"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" value")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("switch")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("key"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("case")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"value"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//node节点是input或者textarea")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("node"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("tagName"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("toUpperCase")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"INPUT"')]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v(" node"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("tagName"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("toUpperCase")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"TEXTAREA"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                node"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" value\n            "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                node"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setAttribute")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("key"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" value"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("break")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("case")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"style"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//设置样式")]),t._v("\n            node"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("style"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("cssText "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" value\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("\n            node"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setAttribute")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("key"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" value"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("break")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("p",[t._v("分析功能，在创建完节点之后，咱们循环给节点添加属性，穿入当前元素"),n("code",[t._v("el")]),t._v(",当前第多少个要添加"),n("code",[t._v("key")]),t._v("，以及当前第多少个要添加的属性值"),n("code",[t._v("value")]),t._v(",掠一下，其实也不是很难,这里设置节点的时候，得用"),n("code",[t._v("switch")]),t._v("来穿透循环多个，可能有的节点同时拥有"),n("code",[t._v("style")]),t._v(","),n("code",[t._v("class")]),t._v("等多个属性,最容易被忽略掉的就是输入框，他的属性值"),n("code",[t._v("value")]),t._v("容易被写掉，所以得专门抽出来，再来"),n("code",[t._v("index.js")]),t._v("看看打印结果")]),t._v(" "),n("p",[n("img",{attrs:{src:a(401),alt:"react虚拟dom"}})]),t._v(" "),n("p",[t._v("有点雏形了，接下来是最为重要的一步之一，将"),n("code",[t._v("dom")]),t._v("元素，挂载到"),n("code",[t._v("html")]),t._v("文档中，这个相对而言，就简单很多了直接上代码,看结果。当然你得在html文档中有一个可挂载的节点，并且"),n("code",[t._v("id")]),t._v("为"),n("code",[t._v("root")]),t._v("才行")]),t._v(" "),n("div",{staticClass:"language-javascript extra-class"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// element.js")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//渲染页面")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("renderDom")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("el"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" target")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    target"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("appendChild")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("el"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//index.js")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" el "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("render")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("VertualDom"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("renderDom")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("el"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" window"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("root"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),n("p",[n("img",{attrs:{src:a(402),alt:"react虚拟dom"}})]),t._v(" "),n("p",[t._v("感觉离成功又近了一步，有没有，当然代码却不止如此，要不那多磕碜。")]),t._v(" "),n("h2",{attrs:{id:"element计算补丁包的神奇diff"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#element计算补丁包的神奇diff"}},[t._v("#")]),t._v(" element计算补丁包的神奇diff")]),t._v(" "),n("p",[t._v("代码到这，基本上算是离成功有近了一大步，起码元素渲染出来了，但是光渲染可不是我们想要的结果，咱们是要修改他的数据，然后数据映射到"),n("code",[t._v("dom")]),t._v("节点上，前文说到过，可不能忙不的修改，咱得考虑一下性能的问题，比如弄个补丁包记录一下修改值？听起来很不错，说干就干,分许需求，拥有一个能计算出前后修改差异的"),n("code",[t._v("diff")]),t._v("函数来算出差别。我传入一个修改之前的"),n("code",[t._v("VertualDom")]),t._v(",然后载传入修改之后的"),n("code",[t._v("VertualDom2")]),t._v(",自动给我返回一个补丁包对象。用法如下！")]),t._v(" "),n("div",{staticClass:"language-javascript extra-class"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//index.js")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" createElement"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" render"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" renderDom "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./element'")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" diff "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./diff'")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" VertualDom "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("createElement")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ul"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"list"')]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("createElement")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"li"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"itme"')]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"1"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("createElement")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"li"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"itme"')]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"2"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("createElement")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"li"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"itme"')]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"2"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" VertualDom2 "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("createElement")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ul"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"list-group"')]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("createElement")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"li"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"itme"')]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"1"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("createElement")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"li"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"itme"')]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"2"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("createElement")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"li"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"itme"')]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"1"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" el "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("render")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("VertualDom"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("renderDom")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("el"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" window"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("root"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" patchs "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("diff")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("VertualDom"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" VertualDom2"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),n("p",[t._v("看到用法，接下来根据需求来实现，老的节点与新的节点比较差异属性，首选递归，虽然容易出栈，但咱们就是试试，问题不大。其次，差异也分为其下几种展现形式")]),t._v(" "),n("ul",[n("li",[t._v("属性的差别\n"),n("ul",[n("li",[t._v("新增属性")]),t._v(" "),n("li",[t._v("删除属性")])])]),t._v(" "),n("li",[t._v("节点的差别\n"),n("ul",[n("li",[t._v("新增节点")]),t._v(" "),n("li",[t._v("删除节点")]),t._v(" "),n("li",[t._v("替换节点")])])])]),t._v(" "),n("div",{staticClass:"language-javascript extra-class"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//diff.js")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("diff")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("oldTree"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" newTree")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" patches "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" index "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//递归树，将比较的结果放入到补丁包中")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("walk")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("oldTree"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" newTree"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" index"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" patches"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" patches"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("p",[t._v("主函数来接收新旧节点，并且将索引值，补丁包对象传入来计算差异话,"),n("code",[t._v("walk")]),t._v("将递归dom结构来给修改的属性或节点存入补丁包")]),t._v(" "),n("div",{staticClass:"language-javascript extra-class"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//diff.js")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//递归树")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("ATTRS")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Symbol"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("for")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ATTRS"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("TEXT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Symbol"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("for")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"TEXT"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("REMOVE")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Symbol"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("for")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"REMOVE"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("REPLACE")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Symbol"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("for")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"REPLACE"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("INDEX")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("walk")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("oldNode"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" newNode"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" index"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" patches")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" currentPatch "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//每个元素都默认一个补丁对象")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("newNode"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//判断节点是否删除")]),t._v("\n        currentPatch"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("push")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" type"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("REMOVE")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" index "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("isString")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("oldNode"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("isString")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("newNode"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//判断文本是否变化 判断 children 是否是文本")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("oldNode "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!==")]),t._v(" newNode"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            currentPatch"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("push")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" type"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("TEXT")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" text"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" newNode "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("oldNode"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("type "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" newNode"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("type"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//属性")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//比较属性是否更改 {1:a} => {1:a1}")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" attrs "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("diffAttr")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("oldNode"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("props"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" newNode"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("props"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Object"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("keys")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("attrs"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            currentPatch"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("push")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" type"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("ATTRS")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" attrs "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// if children ")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("diffchildren")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("oldNode"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("children"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" newNode"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("children"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" patches"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//节点被替换掉")]),t._v("\n        currentPatch"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("push")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" type"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("REPLACE")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" newNode "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("currentPatch"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//当前元素的确又补丁修改")]),t._v("\n        patches"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("index"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" currentPatch\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("p",[t._v("分析一下代码：上面的常量就不用解释了，"),n("code",[t._v("Symbol")]),t._v("只是确保完全的唯一性，"),n("code",[t._v("INDEX")]),t._v("全局的索引，避免递归产生索引错乱,公用"),n("code",[t._v("isString")]),t._v("用来判断是否是文本节点对象，可以看出判断一步一步来，首先如果删除节点，想对象中接入键值对来表示该请求的属性是啥，比如"),n("code",[t._v("{ type: TEXT, text: newNode }")]),t._v(","),n("code",[t._v("type")]),t._v("是补丁包修改的属性,可能是"),n("code",[t._v("TEXT")]),t._v("，可能是属性"),n("code",[t._v("ATTR")]),t._v(",或者其他的标识，有利于后面遍历。")]),t._v(" "),n("div",{staticClass:"language-javascript extra-class"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//判断children是否是字符串 --\x3e 字符串无法使用forEach")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("isString")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("node")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Object")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prototype"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("toString")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("call")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("node"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'[object String]'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("p",[t._v("比较属性的变化也是分为多种，新增删除或者修改，这里用了"),n("code",[t._v("diffAttr")]),t._v("来计算其差别，当然还有子节点比较"),n("code",[t._v("diffchildren")]),t._v("，当一切都是准别就绪是，一个计算补丁包的函数就搞定了，必需要确认的是最后一步"),n("code",[t._v("currentPatch.length > 0")]),t._v("至少补丁包得修改了才能返回吧，要不然，动不动我没修改就调用方法，岂不是很坑。下面来分析一下计算比较属性的方法")]),t._v(" "),n("div",{staticClass:"language-javascript extra-class"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//比较属性")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("diffAttr")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("oldAttr"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" newAttr")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" patch "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//判断新属性于老属性的关系")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" key "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" oldAttr"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("oldAttr"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("key"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!==")]),t._v(" newAttr"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("key"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//比较老属性与新属性 不相同就存新属性")]),t._v("\n            patch"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("key"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" newAttr"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("key"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//有可能是undefined")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//判断是否是新增属性 老节点中没有新节点的属性")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" key "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" newAttr"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("oldAttr"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("hasOwnProperty")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("key"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            patch"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("key"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" newAttr"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("key"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" patch"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("p",[t._v("无非就是分为两种情况")]),t._v(" "),n("ul",[n("li",[t._v("老属性被删除")]),t._v(" "),n("li",[t._v("新属性增加\n简单明了，有一点是可能会存在"),n("code",[t._v("undefined")]),t._v("这点小编暂时没有办法解决")])]),t._v(" "),n("p",[t._v("再看一下分析子节点属性补丁包,使用递归简单明了")]),t._v(" "),n("div",{staticClass:"language-javascript extra-class"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("diffchildren")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("oldChildren"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" newChildren"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" patches")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//比较老的第一个 和新的第一个")]),t._v("\n    oldChildren"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("forEach")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("child"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" i")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//索引还是第一次比较的索引 会有问题 index每次传递的给walk都会递增一次")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("walk")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("child"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" newChildren"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("i"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("INDEX")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" patches"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 全局INDEX避免递归覆盖")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("p",[t._v("齐活，上代码看差别")]),t._v(" "),n("div",{staticClass:"language-javascript extra-class"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//index.js")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" VertualDom "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("createElement")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ul"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"list"')]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("createElement")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"li"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"itme"')]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"1"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("createElement")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"li"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"itme"')]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"2"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("createElement")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"li"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"itme"')]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"2"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" VertualDom2 "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("createElement")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ul"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"list-group"')]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("createElement")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"li"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"itme"')]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"1"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("createElement")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"li"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"itme"')]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"2"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("createElement")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"li"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"itme"')]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"1"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" patchs "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("diff")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("VertualDom"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" VertualDom2"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//给元素打补丁 重新更新视图")]),t._v("\nconsole"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("patchs"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),n("p",[n("img",{attrs:{src:a(403),alt:"react虚拟dom"}})]),t._v(" "),n("h2",{attrs:{id:"element替换节点的工匠patch"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#element替换节点的工匠patch"}},[t._v("#")]),t._v(" element替换节点的工匠patch")]),t._v(" "),n("p",[t._v("有没有种自豪感，差别算出来了，接下来就是替换老节点了，将原有的"),n("code",[t._v("dom")]),t._v("置换掉，也是门技术活，说下思路，将打好标记的补丁包丢到函数内，遍历其中的区别属性，一次替换，性能不性能的先放一边，先以实现为主，期待用法")]),t._v(" "),n("div",{staticClass:"language-javascript extra-class"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//index.js")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//给元素打补丁 重新更新视图")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" el "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("render")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("VertualDom"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 老节点")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" patchs "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("diff")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("VertualDom"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" VertualDom2"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 更改之后的补丁包")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("patch")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("el"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" patchs"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),n("p",[t._v("分析一下实现思路：遍历，循环，迭代,要不还是循环吧")]),t._v(" "),n("div",{staticClass:"language-javascript extra-class"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//patch.js")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" allPatches"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" index "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//默认哪个需要打补丁")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("patch")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("node"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" patches")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    allPatches "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" patches\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("walk")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("node"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("p",[t._v("主函数方法，全局存一个索引判断，避免出现污染状况")]),t._v(" "),n("div",{staticClass:"language-javascript extra-class"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//patch.js")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//补丁包")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("walk")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("node")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" currentPatch "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" allPatches"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("index"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" childNodes "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" node"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("childNodes"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    childNodes"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("forEach")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("child")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("walk")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("child"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("currentPatch"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("doPatches")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("node"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" currentPatch"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("p",[t._v("每一次循环都调用判断属性包的方法，并且得带其"),n("code",[t._v("children")])]),t._v(" "),n("div",{staticClass:"language-javascript extra-class"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//patch.js")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//开始打补丁包")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("doPatches")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("node"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" patches")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    patches"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("forEach")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("patch")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("switch")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("patch"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("type"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("case")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ATTRS"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" key "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" patch"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("attrs"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" value "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" patch"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("attrs"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("key"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n                    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("value"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                        "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setAttr")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("node"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" key"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" value"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                        node"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("removeAttribute")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("key"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("break")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("case")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"TEXT"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("\n                node"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("textContent "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" patch"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("text"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("break")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("case")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"REMOVE"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("\n                node"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("parentNode"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("removeChild")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("node"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("break")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("case")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"REPLACE"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" newNode "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("patch"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("newNode "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("instanceof")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Element")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v("\n                    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("render")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("patch"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("newNode"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" document"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("createTextNode")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("patch"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("newNode"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                node"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("parentNode"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("replaceChild")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("newNode"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" node"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("break")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("break")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("p",[t._v("重点来了，将补丁包循环出来，这时候之前添加的"),n("code",[t._v("type")]),t._v("属性就派上用处了，"),n("code",[t._v("setAttr")]),t._v("也是之前的设置属性的方法，判断节点的时候需要过滤掉文本节点，文本与元素需要单独创建。至此，乞丐版的VirtualDom完工！也算是学习中的一点小笔记吧！")])])}),[],!1,null,null,null);s.default=e.exports}}]);